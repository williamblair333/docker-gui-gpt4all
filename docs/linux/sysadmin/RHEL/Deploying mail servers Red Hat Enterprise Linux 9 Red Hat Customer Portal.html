<!DOCTYPE html>
<html dir="ltr" prefix="og: https://ogp.me/ns#" class=" js supports cssanimations flexbox csstransforms csstransforms3d" style="" lang="en"><head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8"><style>body {transition: opacity ease-in 0.2s; } 
body[unresolved] {opacity: 0; display: block; overflow: hidden; position: relative; } 
</style><style type="text/css">.truste_cursor_pointer {cursor: pointer;}.truste_border_none {border: none;}</style>
    <meta charset="utf-8">
<link rel="canonical" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html-single/deploying_mail_servers/index">
<link rel="shortlink" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html-single/deploying_mail_servers/index">
<meta property="og:site_name" content="Red Hat Customer Portal">
<meta property="og:type" content="article">
<meta property="og:url" content="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html-single/deploying_mail_servers/index">
<meta property="og:title" content="Deploying mail servers Red Hat Enterprise Linux 9 | Red Hat Customer Portal">
<meta property="og:description" content="On Red&nbsp;Hat Enterprise&nbsp;Linux, you can provide reliable and secure mail services for your customers and internal users by using the mail transport agent Postfix as SMTP service and the mail delivery agent Dovecot as IMAP and POP3 services. Both services integrate with each other and they support central backends, such as LDAP directories to store account data and to authenticate users.">
<meta property="og:image" content="https://access.redhat.com/webassets/avalon/g/shadowman-200.png">
<meta name="twitter:card" content="summary">
<meta name="twitter:description" content="On Red&nbsp;Hat Enterprise&nbsp;Linux, you can provide reliable and secure mail services for your customers and internal users by using the mail transport agent Postfix as SMTP service and the mail delivery agent Dovecot as IMAP and POP3 services. Both services integrate with each other and they support central backends, such as LDAP directories to store account data and to authenticate users.">
<meta name="twitter:title" content="Deploying mail servers Red Hat Enterprise Linux 9 | Red Hat Customer Portal">
<meta name="twitter:url" content="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html-single/deploying_mail_servers/index">
<meta name="twitter:image" content="https://access.redhat.com/webassets/avalon/g/shadowman-200.png">
<meta name="title" content="Deploying mail servers Red Hat Enterprise Linux 9 | Red Hat Customer Portal">
<link rel="alternate" hreflang="en" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html-single/deploying_mail_servers/index">
<link rel="alternate" hreflang="ko" href="https://access.redhat.com/documentation/ko-kr/red_hat_enterprise_linux/9/html-single/deploying_mail_servers/index">
<link rel="alternate" hreflang="zh-hans" href="https://access.redhat.com/documentation/zh-cn/red_hat_enterprise_linux/9/html-single/deploying_mail_servers/index">
<link rel="alternate" hreflang="ja" href="https://access.redhat.com/documentation/ja-jp/red_hat_enterprise_linux/9/html-single/deploying_mail_servers/index">
<link rel="alternate" hreflang="es" href="https://access.redhat.com/documentation/es-es/red_hat_enterprise_linux/9/html-single/deploying_mail_servers/index">
<link rel="alternate" hreflang="ru" href="https://access.redhat.com/documentation/ru-ru/red_hat_enterprise_linux/9/html-single/deploying_mail_servers/index">
<link rel="alternate" hreflang="pt-br" href="https://access.redhat.com/documentation/pt-br/red_hat_enterprise_linux/9/html-single/deploying_mail_servers/index">
<link rel="alternate" hreflang="it" href="https://access.redhat.com/documentation/it-it/red_hat_enterprise_linux/9/html-single/deploying_mail_servers/index">
<link rel="alternate" hreflang="de" href="https://access.redhat.com/documentation/de-de/red_hat_enterprise_linux/9/html-single/deploying_mail_servers/index">
<link rel="alternate" hreflang="fr" href="https://access.redhat.com/documentation/fr-fr/red_hat_enterprise_linux/9/html-single/deploying_mail_servers/index">
<link rel="alternate" hreflang="zh-hant" href="https://access.redhat.com/documentation/zh-tw/red_hat_enterprise_linux/9/html-single/deploying_mail_servers/index">
<meta name="Generator" content="Drupal 9 (https://www.drupal.org)">
<meta name="MobileOptimized" content="width">
<meta name="HandheldFriendly" content="true">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="revision" product="0ad2e1c5-8cc7-4fb9-8e05-1c2d8c07d005" title="9fa7907e-63d5-4160-b3bb-1a28b5519da0" page="41f6eb46-1cbc-4736-b94e-571f540e57f9" revision="4af2d52f2f55415dcee1b6e6ce8c78940cc3030f:en-us" body="d8ff83b9301b8abe7609819b7173b597.html" toc="384f1b97e7acc0897a6da50a72b26b22.json">

    <title>Deploying mail servers Red Hat Enterprise Linux 9 | Red Hat Customer Portal</title>
    <link rel="stylesheet" media="all" href="Deploying%20mail%20servers%20Red%20Hat%20Enterprise%20Linux%209%20Red%20Hat%20Customer%20Portal_files/css_87GMcmxT1ib8ziQiU2KUAnTDFtZQV6iP-KGslA9LigM.css">
<link rel="stylesheet" media="all" href="Deploying%20mail%20servers%20Red%20Hat%20Enterprise%20Linux%209%20Red%20Hat%20Customer%20Portal_files/css__Xq4GfgPDJw9K_yYJFmlRZGJeCENu3R3r4s0K7Tr_9g.css">

    
    <script type="application/json" data-drupal-selector="drupal-settings-json">{"path":{"baseUrl":"\/","scriptPath":null,"pathPrefix":"","currentPath":"documentation\/en-us\/red_hat_enterprise_linux\/9\/html-single\/deploying_mail_servers\/index","currentPathIsAdmin":false,"isFront":false,"currentLanguage":"en"},"pluralDelimiter":"\u0003","suppressDeprecationErrors":true,"red_hat_jwt":{"client_id":"customer-portal","cookie_name":"rh_jwt","leeway":"0","realm":"redhat-external","sso_host":"https:\/\/sso.redhat.com\/","user_integration":1,"user_plugin":"drupal_user_auth","use_external_js":0,"use_internal_js":0,"use_in_admin":0},"user":{"uid":0,"permissionsHash":"e301988aec96403b7b03860ee81161237ee18c188536caa2bfab8701012b505e"}}</script>
<script src="Deploying%20mail%20servers%20Red%20Hat%20Enterprise%20Linux%209%20Red%20Hat%20Customer%20Portal_files/js_EQWKo9EokWkWS99x_e1oM-NEM0zlKyTkp_83mGdm5Ks.js"></script>

    <!-- CP_PRIMER_HEAD -->  <!-- TrustArc & DTM -->
  <script src="Deploying%20mail%20servers%20Red%20Hat%20Enterprise%20Linux%209%20Red%20Hat%20Customer%20Portal_files/trustarc.js"></script><script type="text/javascript" src="Deploying%20mail%20servers%20Red%20Hat%20Enterprise%20Linux%209%20Red%20Hat%20Customer%20Portal_files/notice" id="truste_0.21004389557322223"></script>
  <script src="Deploying%20mail%20servers%20Red%20Hat%20Enterprise%20Linux%209%20Red%20Hat%20Customer%20Portal_files/dtm.js"></script><script src="Deploying%20mail%20servers%20Red%20Hat%20Enterprise%20Linux%209%20Red%20Hat%20Customer%20Portal_files/v1.7-920" async="async" crossorigin="" importance="high"></script><script src="Deploying%20mail%20servers%20Red%20Hat%20Enterprise%20Linux%209%20Red%20Hat%20Customer%20Portal_files/AppMeasurement.min.js" async=""></script><script src="Deploying%20mail%20servers%20Red%20Hat%20Enterprise%20Linux%209%20Red%20Hat%20Customer%20Portal_files/AppMeasurement_Module_ActivityMap.min.js" async=""></script><script src="Deploying%20mail%20servers%20Red%20Hat%20Enterprise%20Linux%209%20Red%20Hat%20Customer%20Portal_files/AppMeasurement_Module_AudienceManagement.min.js" async=""></script><script id="mktgJS" src="Deploying%20mail%20servers%20Red%20Hat%20Enterprise%20Linux%209%20Red%20Hat%20Customer%20Portal_files/rh.mktg.js"></script><script>_satellite["_runScript1"](function(event, target, Promise) {
var targetWaitAttempts = 0;

var awaitBody = function(offer){
	//mbox call has returned, ensure <body> exists, then add the mbox DIV
	var docBody  = document.getElementsByTagName("body"),
		int_mbox;
	if(docBody.length){
		int_mbox = document.createElement("div");
		docBody = docBody[0];
		int_mbox.id = "int_mbox";
		int_mbox.classList.add("mboxDefault");
		int_mbox.style.display = "none";
		//place mbox DIV as first tag within BODY
		docBody.insertBefore(int_mbox, docBody.firstChild);
	
		//now that receiving DIV is in place, inject the offer code
		adobe.target.applyOffer({
			"mbox": "int_mbox",
			"selector": "#int_mbox",
			"offer": offer
		});
	
		//and then un-hide the mbox DIV
		int_mbox.style.display = "block";
	}else{
		setTimeout(function(){awaitBody(offer)},100);
	}
}

var awaitTarget = function(){
	if (typeof adobe !== "undefined" && typeof adobe.target !== "undefined" && typeof adobe.target.getOffer !== "undefined") {
		//First get the mbox call going out
		adobe.target.getOffer({
			"mbox": "int_mbox",
			"success": function(offer) {
				awaitBody(offer);
			},
			// Handle errors gracefully
			"error": function(status, error) {}
		});
	}else{
		if(++targetWaitAttempts < 50){
			setTimeout(awaitTarget,100);
		}
	}
}
awaitTarget();
});</script><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<!--[if IEMobile]><meta http-equiv="cleartype" content="on"><![endif]-->

<!-- metaInclude -->
<meta name="avalon-host-info" content="dxp-kbase-prod-138-57cf79cd99-wkvtp">
<meta name="avalon-version" content="eb0593bd">
<meta name="cp-chrome-build-date" content="2023-09-01T18:06:20.591Z">

<meta name="viewport" content="width=device-width, initial-scale=1">

<!-- Chrome, Firefox OS and Opera -->
<meta name="theme-color" content="#000000">
<!-- Windows Phone -->
<meta name="msapplication-navbutton-color" content="#000000">
<!-- iOS Safari -->
<meta name="apple-mobile-web-app-status-bar-style" content="#000000">
<link rel="manifest" href="https://access.redhat.com/webassets/avalon/j/manifest.json">
<!-- Open Search - Tap to search -->
<link rel="search" type="application/opensearchdescription+xml" title="Red Hat Customer Portal" href="https://access.redhat.com/webassets/avalon/j/opensearch.xml">
<!-- title -->
<title>Red Hat Customer Portal - Access to 24x7 support and knowledge</title>
<!-- /title -->
<script type="text/javascript">
    window.portal = {
        analytics : {},
        host      : "https://access.redhat.com",
        idp_url   : "https://sso.redhat.com",
        lang      : "en", 
        version   : "eb0593bd",
        builddate : "2023-09-01T18:06:20.591Z",        fetchdate : "2023-09-03T14:30:08-0400",        nrid      : "NOLONGERSUPPORTED",
        nrlk      : "NOLONGERSUPPORTED"
    };
</script>
<script type="text/javascript">
    if (!/\/logout.*/.test(location.pathname) && portal.host === location.origin && document.cookie.indexOf('rh_sso_session') >= 0 && !(document.cookie.indexOf('rh_jwt') >= 0)) window.location = '/login?redirectTo=' + encodeURIComponent(window.location.href);
</script>
<!-- cssInclude -->

<link rel="shortcut icon" href="https://access.redhat.com/webassets/avalon/g/favicon.ico"><link media="all" rel="stylesheet" type="text/css" href="Deploying%20mail%20servers%20Red%20Hat%20Enterprise%20Linux%209%20Red%20Hat%20Customer%20Portal_files/bootstrap.css">
<link media="all" rel="stylesheet" type="text/css" href="Deploying%20mail%20servers%20Red%20Hat%20Enterprise%20Linux%209%20Red%20Hat%20Customer%20Portal_files/bootstrap-grid.css">
<link media="all" rel="stylesheet" type="text/css" href="Deploying%20mail%20servers%20Red%20Hat%20Enterprise%20Linux%209%20Red%20Hat%20Customer%20Portal_files/main.css">



<link href="Deploying%20mail%20servers%20Red%20Hat%20Enterprise%20Linux%209%20Red%20Hat%20Customer%20Portal_files/chosen.css" rel="stylesheet" type="text/css">

<!--[if lte IE 9]>
<link media="all" rel="stylesheet" type="text/css" href="https://access.redhat.com/chrome_themes/nimbus/css/ie.css" />
<![endif]--><noscript>
    <style type="text/css" media="screen"> .primary-nav { display: block; } </style>
</noscript>
<link media="all" rel="stylesheet" type="text/css" href="Deploying%20mail%20servers%20Red%20Hat%20Enterprise%20Linux%209%20Red%20Hat%20Customer%20Portal_files/pfe-navigation--lightdom.min.css">
<!-- /cssInclude -->
<script src="Deploying%20mail%20servers%20Red%20Hat%20Enterprise%20Linux%209%20Red%20Hat%20Customer%20Portal_files/ie-polyfills.js"></script>

<script async="">
  if (!HTMLScriptElement.supports || !HTMLScriptElement.supports('importmap')) {
    import("https://www.redhatstatic.com/dx/v1-alpha/es-module-shims@1.7.3.js");
  }
</script>
<script type="importmap">
{
  "imports": {
    "@patternfly/elements/" : "https://www.redhatstatic.com/dx/v1-alpha/@patternfly/elements@2.2.2/",
    "@rhds/elements/":"https://www.redhatstatic.com/dx/v1-alpha/@rhds/elements@1.1.0/elements/",
    "@rhds/elements/lib/":"https://www.redhatstatic.com/dx/v1-alpha/@rhds/elements@1.1.0/lib/",
    "@cpelements/elements/":"https://www.redhatstatic.com/dx/v1-alpha/@cpelements/elements@2.0.0-alpha.7/elements/"
  }
}
</script><script type="text/javascript" src="Deploying%20mail%20servers%20Red%20Hat%20Enterprise%20Linux%209%20Red%20Hat%20Customer%20Portal_files/require.js" data-main="/webassets/avalon/j/"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<script src="https://access.redhat.com/chrome_themes/nimbus/js/ie8.js"></script>
<![endif]-->
<script type="text/javascript" src="Deploying%20mail%20servers%20Red%20Hat%20Enterprise%20Linux%209%20Red%20Hat%20Customer%20Portal_files/new-nav.js"></script>
<!-- /CP_PRIMER_HEAD -->

  <script src="Deploying%20mail%20servers%20Red%20Hat%20Enterprise%20Linux%209%20Red%20Hat%20Customer%20Portal_files/RC89cb5efc622a491caa02ca11adc4672f-source.min.js" async=""></script><script src="Deploying%20mail%20servers%20Red%20Hat%20Enterprise%20Linux%209%20Red%20Hat%20Customer%20Portal_files/RC4291db99e867433ca8496d298dca09cb-source.min.js" async=""></script><link href="data:text/css,%5Bid*%3D'google_ads_iframe'%5D%2C%5Bid*%3D'taboola-'%5D%2C.taboolaHeight%2C.taboola-placeholder%2C%23credential_picker_container%2C%23credentials-picker-container%2C%23credential_picker_iframe%2C%5Bid*%3D'google-one-tap-iframe'%5D%2C%23google-one-tap-popup-container%2C.google-one-tap-modal-div%2C%23amp_floatingAdDiv%2C%23ez-content-blocker-container%2C%23notify-adblock%7Bdisplay%3Anone!important%3Bmin-height%3A0!important%3Bheight%3A0!important%3B%7D" rel="stylesheet" type="text/css"><script src="Deploying%20mail%20servers%20Red%20Hat%20Enterprise%20Linux%209%20Red%20Hat%20Customer%20Portal_files/prompt.js"></script><script charset="utf-8" src="Deploying%20mail%20servers%20Red%20Hat%20Enterprise%20Linux%209%20Red%20Hat%20Customer%20Portal_files/12.2158c5447122fa995560.chunk.js"></script><script type="text/javascript" charset="utf-8" async="" data-requirecontext="_" data-requiremodule="https://access.redhat.com/webassets/avalon/j/lib/require-css/require.css.min.js" src="Deploying%20mail%20servers%20Red%20Hat%20Enterprise%20Linux%209%20Red%20Hat%20Customer%20Portal_files/require.css.min.js"></script><script type="text/javascript" charset="utf-8" async="" data-requirecontext="_" data-requiremodule="rhn-modal" src="Deploying%20mail%20servers%20Red%20Hat%20Enterprise%20Linux%209%20Red%20Hat%20Customer%20Portal_files/rhn-modal.js"></script><script type="text/javascript" charset="utf-8" async="" data-requirecontext="_" data-requiremodule="status-widget" src="Deploying%20mail%20servers%20Red%20Hat%20Enterprise%20Linux%209%20Red%20Hat%20Customer%20Portal_files/status-widget.js"></script><script type="text/javascript" charset="utf-8" async="" data-requirecontext="_" data-requiremodule="avatars" src="Deploying%20mail%20servers%20Red%20Hat%20Enterprise%20Linux%209%20Red%20Hat%20Customer%20Portal_files/avatars.js"></script><script type="text/javascript" charset="utf-8" async="" data-requirecontext="_" data-requiremodule="cookie-monster" src="Deploying%20mail%20servers%20Red%20Hat%20Enterprise%20Linux%209%20Red%20Hat%20Customer%20Portal_files/cookie-monster.js"></script><script type="text/javascript" charset="utf-8" async="" data-requirecontext="_" data-requiremodule="pfe" src="Deploying%20mail%20servers%20Red%20Hat%20Enterprise%20Linux%209%20Red%20Hat%20Customer%20Portal_files/pfe.js"></script><script type="text/javascript" charset="utf-8" async="" data-requirecontext="_" data-requiremodule="wc" src="Deploying%20mail%20servers%20Red%20Hat%20Enterprise%20Linux%209%20Red%20Hat%20Customer%20Portal_files/wc.js"></script><script type="text/javascript" charset="utf-8" async="" data-requirecontext="_" data-requiremodule="nimbus/searchbar" src="Deploying%20mail%20servers%20Red%20Hat%20Enterprise%20Linux%209%20Red%20Hat%20Customer%20Portal_files/searchbar.js"></script><script type="text/javascript" charset="utf-8" async="" data-requirecontext="_" data-requiremodule="webcomponentsjs/custom-elements-es5-adapter" src="Deploying%20mail%20servers%20Red%20Hat%20Enterprise%20Linux%209%20Red%20Hat%20Customer%20Portal_files/custom-elements-es5-adapter.js"></script><script type="text/javascript" charset="utf-8" async="" data-requirecontext="_" data-requiremodule="webcomponentsjs/webcomponents-bundle" src="Deploying%20mail%20servers%20Red%20Hat%20Enterprise%20Linux%209%20Red%20Hat%20Customer%20Portal_files/webcomponents-bundle.js"></script><link rel="stylesheet" media="all" href="Deploying%20mail%20servers%20Red%20Hat%20Enterprise%20Linux%209%20Red%20Hat%20Customer%20Portal_files/rh-table--lightdom.min.css"><script charset="utf-8" src="Deploying%20mail%20servers%20Red%20Hat%20Enterprise%20Linux%209%20Red%20Hat%20Customer%20Portal_files/7.41dc96447e48575a0cfd.chunk.js"></script><script charset="utf-8" src="Deploying%20mail%20servers%20Red%20Hat%20Enterprise%20Linux%209%20Red%20Hat%20Customer%20Portal_files/1.e4bb9861ae9a0d936559.chunk.js"></script><script type="text/javascript" charset="utf-8" async="" data-requirecontext="_" data-requiremodule="data-action" src="Deploying%20mail%20servers%20Red%20Hat%20Enterprise%20Linux%209%20Red%20Hat%20Customer%20Portal_files/data-action.js"></script><script type="text/javascript" charset="utf-8" async="" data-requirecontext="_" data-requiremodule="nimbus/tour" src="Deploying%20mail%20servers%20Red%20Hat%20Enterprise%20Linux%209%20Red%20Hat%20Customer%20Portal_files/tour.js"></script><script type="text/javascript" charset="utf-8" async="" data-requirecontext="_" data-requiremodule="introjs" src="Deploying%20mail%20servers%20Red%20Hat%20Enterprise%20Linux%209%20Red%20Hat%20Customer%20Portal_files/introjs.min.js"></script><script type="text/javascript" charset="utf-8" async="" data-requirecontext="_" data-requiremodule="moment" src="Deploying%20mail%20servers%20Red%20Hat%20Enterprise%20Linux%209%20Red%20Hat%20Customer%20Portal_files/moment.js"></script><script type="text/javascript" charset="utf-8" async="" data-requirecontext="_" data-requiremodule="public_modules/@patternfly/pfe-icon/dist/pfe-icon.umd.min" src="Deploying%20mail%20servers%20Red%20Hat%20Enterprise%20Linux%209%20Red%20Hat%20Customer%20Portal_files/pfe-icon.umd.min.js"></script><script type="text/javascript" charset="utf-8" async="" data-requirecontext="_" data-requiremodule="public_modules/@patternfly/pfe-cta/dist/pfe-cta.umd.min" src="Deploying%20mail%20servers%20Red%20Hat%20Enterprise%20Linux%209%20Red%20Hat%20Customer%20Portal_files/pfe-cta.umd.min.js"></script><script type="text/javascript" charset="utf-8" async="" data-requirecontext="_" data-requiremodule="public_modules/@patternfly/pfe-avatar/dist/pfe-avatar.umd.min" src="Deploying%20mail%20servers%20Red%20Hat%20Enterprise%20Linux%209%20Red%20Hat%20Customer%20Portal_files/pfe-avatar.umd.min.js"></script><script type="text/javascript" charset="utf-8" async="" data-requirecontext="_" data-requiremodule="public_modules/@cpelements/cp-search-autocomplete/dist/cp-search-autocomplete.umd.min" src="Deploying%20mail%20servers%20Red%20Hat%20Enterprise%20Linux%209%20Red%20Hat%20Customer%20Portal_files/cp-search-autocomplete.umd.min.js"></script><script type="text/javascript" charset="utf-8" async="" data-requirecontext="_" data-requiremodule="public_modules/@cpelements/rh-site-switcher/dist/site-switcher.umd.min" src="Deploying%20mail%20servers%20Red%20Hat%20Enterprise%20Linux%209%20Red%20Hat%20Customer%20Portal_files/site-switcher.umd.min.js"></script><script type="text/javascript" charset="utf-8" async="" data-requirecontext="_" data-requiremodule="public_modules/@cpelements/pfe-navigation/dist/pfe-navigation.umd.min" src="Deploying%20mail%20servers%20Red%20Hat%20Enterprise%20Linux%209%20Red%20Hat%20Customer%20Portal_files/pfe-navigation.umd.min.js"></script><script type="text/javascript" charset="utf-8" async="" data-requirecontext="_" data-requiremodule="public_modules/@patternfly/pfe-primary-detail/dist/pfe-primary-detail.umd.min" src="Deploying%20mail%20servers%20Red%20Hat%20Enterprise%20Linux%209%20Red%20Hat%20Customer%20Portal_files/pfe-primary-detail.umd.min.js"></script><script type="text/javascript" charset="utf-8" async="" data-requirecontext="_" data-requiremodule="public_modules/@patternfly/pfelement/dist/pfelement.umd.min" src="Deploying%20mail%20servers%20Red%20Hat%20Enterprise%20Linux%209%20Red%20Hat%20Customer%20Portal_files/pfelement.umd.min.js"></script><script type="text/javascript" charset="utf-8" async="" data-requirecontext="_" data-requiremodule="public_modules/@patternfly/pfe-autocomplete/dist/pfe-autocomplete.umd.min" src="Deploying%20mail%20servers%20Red%20Hat%20Enterprise%20Linux%209%20Red%20Hat%20Customer%20Portal_files/pfe-autocomplete.umd.min.js"></script><script type="text/javascript" charset="utf-8" async="" data-requirecontext="_" data-requiremodule="public_modules/@patternfly/pfe-button/dist/pfe-button.umd.min" src="Deploying%20mail%20servers%20Red%20Hat%20Enterprise%20Linux%209%20Red%20Hat%20Customer%20Portal_files/pfe-button.umd.min.js"></script><script type="text/javascript" charset="utf-8" async="" data-requirecontext="_" data-requiremodule="public_modules/@cpelements/rh-table/dist/rh-table.umd.min" src="Deploying%20mail%20servers%20Red%20Hat%20Enterprise%20Linux%209%20Red%20Hat%20Customer%20Portal_files/rh-table.umd.min.js"></script><script type="text/javascript" charset="utf-8" async="" data-requirecontext="_" data-requiremodule="ieSVGfix" src="Deploying%20mail%20servers%20Red%20Hat%20Enterprise%20Linux%209%20Red%20Hat%20Customer%20Portal_files/ieSVGfix.js"></script><script type="text/javascript" charset="utf-8" async="" data-requirecontext="_" data-requiremodule="public_modules/@cpelements/rh-account-dropdown/dist/rh-account-dropdown.umd.min" src="Deploying%20mail%20servers%20Red%20Hat%20Enterprise%20Linux%209%20Red%20Hat%20Customer%20Portal_files/rh-account-dropdown.umd.min.js"></script><script type="text/javascript" charset="utf-8" async="" data-requirecontext="_" data-requiremodule="public_modules/@patternfly/pfe-clipboard/dist/pfe-clipboard.umd.min" src="Deploying%20mail%20servers%20Red%20Hat%20Enterprise%20Linux%209%20Red%20Hat%20Customer%20Portal_files/pfe-clipboard.umd.min.js"></script><script type="text/javascript" charset="utf-8" async="" data-requirecontext="_" data-requiremodule="prism" src="Deploying%20mail%20servers%20Red%20Hat%20Enterprise%20Linux%209%20Red%20Hat%20Customer%20Portal_files/prism.js"></script><script src="Deploying%20mail%20servers%20Red%20Hat%20Enterprise%20Linux%209%20Red%20Hat%20Customer%20Portal_files/RC1badf0bc400d462b892df3a5874c0bc4-source.min.js" async=""></script><script src="Deploying%20mail%20servers%20Red%20Hat%20Enterprise%20Linux%209%20Red%20Hat%20Customer%20Portal_files/RCb1afac0346e94d81bf645b608336061e-source.min.js" async=""></script><script src="Deploying%20mail%20servers%20Red%20Hat%20Enterprise%20Linux%209%20Red%20Hat%20Customer%20Portal_files/RCa65a5b793a1a4b4abe76ffa69f30f470-source.min.js" async=""></script></head>
  <body class="en loggedOut">
    
      <div class="dialog-off-canvas-main-canvas" data-off-canvas-main-canvas="">
      <!-- CP_PRIMER_HEADER -->
<div id="page-wrap" class="page-wrap">
    <div id="pers-top-page-wrap" class="top-page-wrap pers-loader-bg">

      <div id="hero-bg-top-left" class="summit-bg-shapes"></div>
      <div id="hero-bg-top-right" class="summit-bg-shapes"></div>

        <!--googleoff: all-->
        <header class="masthead" id="masthead">

            <a href="#pfe-navigation" id="global-skip-to-nav" class="skip-link visually-hidden">Skip to navigation</a>
            <a href="#doc-wrapper" class="skip-link visually-hidden">Skip to main content</a>            <nav id="portal-utility-nav" class="utility-navigation utility-navigation--bar hidden-at-mobile" data-analytics-region="utility" aria-labelledby="nav__utility-nav--desktop">
                <h3 id="nav__utility-nav--desktop" class="element-invisible">Utilities
                </h3>
                <ul aria-labelledby="nav__utility-nav--desktop">
                    <li id="nav-subscription" data-portal-tour-1="1">
                        <a class="top-nav-subscriptions" data-analytics-level="2" data-analytics-category="Utilities" data-analytics-text="Subscription" href="https://access.redhat.com/management/">Subscriptions
                        </a>
                    </li>
                    <li id="nav-downloads" data-portal-tour-1="2">
                        <a class="top-nav-downloads" data-analytics-level="2" data-analytics-category="Utilities" data-analytics-text="Downloads" href="https://access.redhat.com/downloads/">Downloads
                        </a>
                    </li>
                    <li id="nav-containers">
                        <a class="top-nav-containers" data-analytics-level="2" data-analytics-category="Utilities" data-analytics-text="Containers" href="https://catalog.redhat.com/software/containers/explore/">Containers
                        </a>
                    </li>
                    <li id="nav-support" data-portal-tour-1="3">
                        <a class="top-nav-support-cases" data-analytics-level="2" data-analytics-category="Utilities" data-analytics-text="Support Cases" href="https://access.redhat.com/support/cases/">Support Cases
                        </a>
                    </li>
                </ul>
            </nav>

            <pfe-navigation id="pfe-navigation" data-analytics-region="mega menu" pfelement="" class="PFElement pfe-navigation--processed pfe-navigation--has-search pfe-navigation--custom-dropdowns--processed" type="combo" has_search="" has_account="" breakpoint="desktop" lang="en">
                <div class="pfe-navigation__logo-wrapper" id="pfe-navigation__logo-wrapper">
                    <a href="https://access.redhat.com/" class="pfe-navigation__logo-link" data-analytics-text="logo" data-analytics-category="MM|logo">
                        <img class="pfe-navigation__logo-image" alt="Red Hat Customer Portal" src="Deploying%20mail%20servers%20Red%20Hat%20Enterprise%20Linux%209%20Red%20Hat%20Customer%20Portal_files/red-hat-customer-portal.svg">
                    </a>
                </div>

                <nav class="pfe-navigation" aria-label="Main Navigation" data-analytics-region="main nav">
                    <ul class="pfe-navigation__menu" id="pfe-navigation__menu">                        <li class="pfe-navigation__menu-item hidden-at-tablet hidden-at-desktop" id="nav-subscription--mobile" data-portal-tour-1="1">
                            <a class="pfe-navigation__menu-link" data-analytics-level="1" data-analytics-text="Subscription" href="https://access.redhat.com/management/">Subscriptions
                            </a>
                        </li>
                        <li class="pfe-navigation__menu-item hidden-at-tablet hidden-at-desktop" id="nav-downloads--mobile" data-portal-tour-1="2">
                            <a class="pfe-navigation__menu-link" data-analytics-level="1" data-analytics-text="Downloads" href="https://access.redhat.com/downloads/">Downloads
                            </a>
                        </li>
                        <li class="pfe-navigation__menu-item hidden-at-tablet hidden-at-desktop" id="nav-containers--mobile">
                            <a class="pfe-navigation__menu-link" data-analytics-level="1" data-analytics-text="Containers" href="https://catalog.redhat.com/software/containers/explore/">Containers
                            </a>
                        </li>
                        <li class="pfe-navigation__menu-item hidden-at-tablet hidden-at-desktop" id="nav-support--mobile" data-portal-tour-1="3">
                            <a class="pfe-navigation__menu-link" data-analytics-level="1" data-analytics-text="Support Cases" href="https://access.redhat.com/support/cases/">Support Cases
                            </a>
                        </li>                        <li class="pfe-navigation__menu-item">
                            <a href="https://access.redhat.com/products/" class="pfe-navigation__menu-link" data-analytics-level="1" data-analytics-text="Products and Services">Products &amp; Services
                            </a>
                            <div class="pfe-navigation__dropdown has-primary-detail">                                <div class="desktop-col-span-2 tablet-col-span-all">
                                    <h3>
                                        <a data-analytics-level="2" data-analytics-category="Products and Services" data-analytics-text="Products" href="https://access.redhat.com/products/">Products
                                        </a>
                                    </h3>
                                    <slot name="main-menu__dropdown--product__product-listing"></slot>
                                </div>                                <div>
                                    <h3 id="nav__products__support">
                                        <a data-analytics-level="2" data-analytics-category="Products and Services" data-analytics-text="Support" href="https://access.redhat.com/support">Support
                                        </a>
                                    </h3>
                                    <ul aria-labelledby="nav__products__support">
                                        <li><a data-analytics-level="3" data-analytics-category="Products and Services|Support" data-analytics-text="Production Support" href="https://access.redhat.com/support/offerings/production/">Production Support
                                            </a></li>
                                            <li><a data-analytics-level="3" data-analytics-category="Products and Services|Support" data-analytics-text="Development Support" href="https://access.redhat.com/support/offerings/developer/">Development Support
                                                </a></li>
                                                <li><a data-analytics-level="3" data-analytics-category="Products and Services|Support" data-analytics-text="Product Life Cycles" href="https://access.redhat.com/product-life-cycles/">Product Life Cycles
                                                    </a></li>
                                    </ul>

                                    <h3 id="nav__products__services">
                                        <a data-analytics-level="2" data-analytics-category="Products and Services" data-analytics-text="Services" href="https://www.redhat.com/en/services">Services
                                        </a>
                                    </h3>
                                    <ul aria-labelledby="nav__products__services">
                                        <li><a data-analytics-level="3" data-analytics-category="Products and Services|Services" data-analytics-text="Consulting" href="https://www.redhat.com/en/services/consulting">Consulting
                                            </a></li>
                                            <li><a data-analytics-level="3" data-analytics-category="Products and Services|Services" data-analytics-text="Technical Account Management" href="https://access.redhat.com/support/offerings/tam/">Technical Account Management
                                                </a></li>
                                                <li><a data-analytics-level="3" data-analytics-category="Products and Services|Services" data-analytics-text="Training and Certifications" href="https://www.redhat.com/en/services/training-and-certification">Training &amp; Certifications
                                                    </a></li>
                                    </ul>
                                </div>                                <div>
                                    <h3 id="nav__products__documentation">
                                        <a data-analytics-level="2" data-analytics-category="Products and Services" data-analytics-text="Documentation" href="https://access.redhat.com/documentation">Documentation
                                        </a>
                                    </h3>
                                    <ul aria-labelledby="nav__products__documentation">
                                        <li><a data-analytics-level="3" data-analytics-category="Products and Services|Documentation" data-analytics-text="Red Hat Enterprise Linux" href="https://access.redhat.com/documentation/en/red_hat_enterprise_linux">Red Hat Enterprise Linux
                                            </a></li>
                                            <li><a data-analytics-level="3" data-analytics-category="Products and Services|Documentation" data-analytics-text="Red Hat JBoss Enterprise Application Platform" href="https://access.redhat.com/documentation/en/red_hat_jboss_enterprise_application_platform">Red Hat JBoss Enterprise Application Platform
                                                </a></li>
                                                <li><a data-analytics-level="3" data-analytics-category="Products and Services|Documentation" data-analytics-text="Red Hat OpenStack Platform" href="https://access.redhat.com/documentation/en/red_hat_openstack_platform">Red Hat OpenStack Platform
                                                    </a></li>
                                                    <li><a data-analytics-level="3" data-analytics-category="Products and Services|Documentation" data-analytics-text="Red Hat OpenShift Container Platform" href="https://access.redhat.com/documentation/en/openshift_container_platform">Red Hat OpenShift Container Platform
                                                        </a></li>
                                    </ul>
                                    <pfe-cta pfelement="" class="PFElement" has_link="">
                                        <a data-analytics-level="3" data-analytics-category="Products and Services|Documentation" data-analytics-text="All Documentation" data-analytics-linktype="cta" href="https://access.redhat.com/documentation">All Documentation
                                        </a>
                                    </pfe-cta>

                                    <h3 id="nav__products__catalog"><a data-analytics-level="2" data-analytics-category="Products and Services" data-analytics-text="Ecosystem Catalog" href="https://catalog.redhat.com/">Ecosystem Catalog
                                        </a></h3>
                                        <ul aria-labelledby="nav__products__catalog">
                                            <li><a data-analytics-level="3" data-analytics-category="Products and Services|Ecosystem Catalog" data-analytics-text="Red Hat Partner Ecosystem" href="https://access.redhat.com/ecosystem/">Red Hat Partner Ecosystem
                                                </a></li>
                                                <li><a data-analytics-level="3" data-analytics-category="Products and Services|Ecosystem Catalog" data-analytics-text="Partner Resources" href="https://access.redhat.com/ecosystem/partner-resources">Partner Resources
                                                    </a></li>
                                        </ul>
                                </div>
                            </div>
                        </li>                        <li class="pfe-navigation__menu-item">
                            <a class="pfe-navigation__menu-link" data-analytics-level="1" data-analytics-text="Tools" href="https://access.redhat.com/labs/">Tools
                            </a>
                            <div class="pfe-navigation__dropdown pfe-navigation__dropdown--3-column">                                <div>
                                    <h3 id="nav__tools__tools" data-analytics-level="2" data-analytics-text="Tools" data-analytics-category="Tools">Tools
                                    </h3>
                                    <ul aria-labelledby="nav__tools__tools">
                                        <li><a data-analytics-level="3" data-analytics-category="Tools|Tools" data-analytics-text="Solution Engine" href="https://access.redhat.com/support/cases/#/troubleshoot">Troubleshoot a product issue
                                            </a></li>
                                            <li><a data-analytics-level="3" data-analytics-category="Tools|Tools" data-analytics-text="Packages" href="https://access.redhat.com/downloads/content/package-browser">Packages
                                                </a></li>
                                                <li><a data-analytics-level="3" data-analytics-category="Tools|Tools" data-analytics-text="Errata" href="https://access.redhat.com/errata/">Errata
                                                    </a></li>
                                    </ul>
                                </div>                                <div>
                                    <h3 id="nav__tools__labs">
                                        <a data-analytics-level="2" data-analytics-category="Tools" data-analytics-text="Customer Portal Labs" href="https://access.redhat.com/labs/">Customer Portal Labs
                                        </a>
                                    </h3>
                                    <ul aria-labelledby="nav__tools__labs">
                                        <li><a data-analytics-level="3" data-analytics-category="Tools|Customer Portal Labs" data-analytics-text="Configuration" href="https://access.redhat.com/labs/#!?type=config">Configuration
                                            </a></li>
                                            <li><a data-analytics-level="3" data-analytics-category="Tools|Customer Portal Labs" data-analytics-text="Deployment" href="https://access.redhat.com/labs/#!?type=deploy">Deployment
                                                </a></li>
                                                <li><a data-analytics-level="3" data-analytics-category="Tools|Customer Portal Labs" data-analytics-text="Security" href="https://access.redhat.com/labs/#!?type=security">Security
                                                    </a></li>                                                    <li><a data-analytics-level="3" data-analytics-category="Tools|Customer Portal Labs" data-analytics-text="Troubleshooting" href="https://access.redhat.com/labs/#!?type=troubleshoot">Troubleshoot
                                                        </a></li>
                                    </ul>
                                    <pfe-cta pfelement="" class="PFElement" has_link="">
                                        <a data-analytics-level="3" data-analytics-category="Tools|Customer Portal Labs" data-analytics-text="All Labs" data-analytics-linktype="cta" href="https://access.redhat.com/labs/">All labs
                                        </a>
                                    </pfe-cta>
                                </div>                                <div>
                                    <h4 id="nav__tools__red-hat-insights">
                                        <a data-analytics-level="2" data-analytics-category="Tools" data-analytics-text="Red Hat Insights" href="https://www.redhat.com/en/technologies/management/insights">Red Hat Insights
                                        </a>
                                    </h4>
                                    <p>Increase visibility into IT operations to detect and resolve technical issues before they impact your business.</p>
                                    <a data-analytics-level="3" data-analytics-category="Tools|Red Hat Insights" data-analytics-text="Learn more" href="https://www.redhat.com/en/technologies/management/insights">Learn More
                                    </a>
                                    <br>
                                    <a data-analytics-level="3" data-analytics-category="Tools|Red Hat Insights" data-analytics-text="Go to Insights" href="https://cloud.redhat.com/insights">Go to Insights
                                    </a>
                                </div>
                            </div>
                        </li>                        <li class="pfe-navigation__menu-item">
                            <a class="pfe-navigation__menu-link" data-analytics-level="1" data-analytics-text="Security" href="https://access.redhat.com/security/">Security
                            </a>
                            <div class="pfe-navigation__dropdown pfe-navigation__dropdown--3-column">                                <div>
                                    <h3 id="security__security-center">
                                        <a data-analytics-level="2" data-analytics-category="Security" data-analytics-text="Red Hat Product Security Center" href="https://access.redhat.com/security">Red Hat Product Security Center
                                        </a>
                                    </h3>
                                    <p>Engage with our Red Hat Product 
Security team, access security updates, and ensure your environments are
 not exposed to any known security vulnerabilities.
                                    </p>
                                    <pfe-cta pfe-priority="primary" priority="primary" pfelement="" class="PFElement" has_link="">
                                        <a data-analytics-level="3" data-analytics-category="Security|Red Hat Product Security Center" data-analytics-text="Product Security Center" data-analytics-linktype="cta" href="https://access.redhat.com/security/">Product Security Center
                                        </a>
                                    </pfe-cta>
                                </div>                                <div>
                                    <h3 id="nav__security__updates" data-analytics-level="2" data-analytics-text="Security Updates" data-analytics-category="Security">
                                        <a data-analytics-level="2" data-analytics-category="Security" data-analytics-text="Security Updates" href="https://access.redhat.com/security">Security Updates
                                        </a>
                                    </h3>
                                    <ul aria-labelledby="nav__security__updates">
                                        <li><a data-analytics-level="3" data-analytics-category="Security|Security Updates" data-analytics-text="Security Advisories" href="https://access.redhat.com/security/security-updates/#/security-advisories">Security Advisories
                                            </a></li>
                                            <li><a data-analytics-level="3" data-analytics-category="Security|Security Updates" data-analytics-text="Red Hat CVE Database" href="https://access.redhat.com/security/security-updates/#/cve">Red Hat CVE Database
                                                </a></li>
                                                <li><a data-analytics-level="3" data-analytics-category="Security|Security Updates" data-analytics-text="Security Labs" href="https://access.redhat.com/security/security-updates/#/security-labs">Security Labs
                                                    </a></li>
                                    </ul>
                                    <p class="margin-top-xl">Keep your systems secure with Red Hat's specialized responses to security vulnerabilities.
                                    </p>
                                    <pfe-cta pfelement="" class="PFElement" has_link="">
                                        <a data-analytics-level="3" data-analytics-category="Security|Security Updates" data-analytics-text="View Responses" data-analytics-linktype="cta" href="https://access.redhat.com/security/vulnerability">View Responses
                                        </a>
                                    </pfe-cta>
                                </div>                                <div>
                                    <h3 id="nav__security__resources">
                                        <a data-analytics-level="2" data-analytics-category="Security" data-analytics-text="Resources" href="https://access.redhat.com/security/overview">Resources
                                        </a>
                                    </h3>
                                    <ul aria-labelledby="nav__security__resources">                                            <li><a data-analytics-level="3" data-analytics-category="Security|Resources" data-analytics-text="Security Blog" href="https://redhat.com/en/blog/channel/security">Security Blog
                                                </a></li>
                                                <li><a data-analytics-level="3" data-analytics-category="Security|Resources" data-analytics-text="Security Measurement" href="https://www.redhat.com/security/data/metrics/">Security Measurement
                                                    </a></li>
                                                    <li><a data-analytics-level="3" data-analytics-category="Security|Resources" data-analytics-text="Severity Ratings" href="https://access.redhat.com/security/updates/classification/">Severity Ratings
                                                        </a></li>
                                                        <li><a data-analytics-level="3" data-analytics-category="Security|Resources" data-analytics-text="Backporting Policies" href="https://access.redhat.com/security/updates/backporting/">Backporting Policies
                                                            </a></li>
                                                            <li><a data-analytics-level="3" data-analytics-category="Security|Resources" data-analytics-text="Product Signing (GPG) Keys" href="https://access.redhat.com/security/team/key/">Product Signing (GPG) Keys
                                                                </a></li>
                                    </ul>
                                </div>

                            </div>
                        </li>                        <li class="pfe-navigation__menu-item">
                            <a href="https://access.redhat.com/community/" class="pfe-navigation__menu-link" data-analytics-level="1" data-analytics-text="Community">Community
                            </a>
                            <div class="pfe-navigation__dropdown pfe-navigation__dropdown--3-column">                                <div>
                                    <h3 id="nav__community__cp-community">
                                        <a href="https://access.redhat.com/community" data-analytics-level="2" data-analytics-text="Customer Portal Community" data-analytics-category="Community">Customer Portal Community
                                        </a>
                                    </h3>
                                    <ul aria-labelledby="nav__community__cp-community">
                                        <li><a data-analytics-level="3" data-analytics-category="Community|Customer Portal Community" data-analytics-text="Discussions" href="https://access.redhat.com/discussions">Discussions
                                            </a></li>                                                <li><a data-analytics-level="3" data-analytics-category="Community|Customer Portal Community" data-analytics-text="Private Groups" href="https://access.redhat.com/groups/">Private Groups
                                                    </a></li>
                                    </ul>

                                    <pfe-cta pfe-priority="primary" priority="primary" pfelement="" class="PFElement" has_link="">
                                        <a data-analytics-level="3" data-analytics-category="Community|Customer Portal Community" data-analytics-text="Community Activity" data-analytics-linktype="cta" href="https://access.redhat.com/community/">Community Activity
                                        </a>
                                    </pfe-cta>
                                </div>                                <div>
                                    <h3 id="nav__community__events" data-analytics-level="2" data-analytics-text="Customer Events" data-analytics-category="Community">Customer Events
                                    </h3>
                                    <ul aria-labelledby="nav__community__events">
                                        <li><a data-analytics-level="3" data-analytics-category="Community|Customer Events" data-analytics-text="Red Hat Convergence" href="https://access.redhat.com/convergence/">Red Hat Convergence
                                            </a></li>
                                            <li><a data-analytics-level="3" data-analytics-category="Community|Customer Events" data-analytics-text="Red Hat Summit" href="http://www.redhat.com/summit/">Red Hat Summit
                                                </a></li>
                                    </ul>
                                </div>                                <div>
                                    <h3 id="nav__community__stories" data-analytics-level="2" data-analytics-text="Stories" data-analytics-category="Community">Stories
                                    </h3>
                                    <ul aria-labelledby="nav__community__stories">
                                        <li><a data-analytics-level="3" data-analytics-category="Community|Stories" data-analytics-text="Red Hat Subscription Value" href="https://access.redhat.com/subscription-value/">Red Hat Subscription Value
                                            </a></li>
                                            <li><a data-analytics-level="3" data-analytics-text="You Asked. We Acted." data-analytics-category="Community|Stories" href="https://access.redhat.com/you-asked-we-acted/">You Asked. We Acted.
                                                </a></li>
                                                <li><a data-analytics-level="3" data-analytics-category="Community|Stories" data-analytics-text="Open Source Communities" href="http://www.redhat.com/en/open-source">Open Source Communities
                                                    </a></li>
                                    </ul>
                                </div>
                            </div>
                        </li>
                    </ul>                </nav>                <div id="site-search" slot="search" class="utility-link site-search">
                    <div class="content">
                        <form class="ng-pristine ng-valid topSearchForm" id="topSearchForm" name="topSearchForm" action="/search/browse/search/" method="get" enctype="application/x-www-form-urlencoded">
                            <cp-search-autocomplete class="push-bottom PFElement" path="/webassets/avalon/j/data.json" num-items="5" placeholder="Enter your search term" pfelement="" type="container"></cp-search-autocomplete>                            <div>Or <a href="https://access.redhat.com/support/cases/#/troubleshoot">troubleshoot an issue</a>.
                            </div>
                        </form>
                    </div>
                </div>


                <div slot="secondary-links" id="localesMenu" class="pfe-navigation__custom-dropdown__wrapper--single-column pfe-navigation__custom-dropdown__wrapper">
                    <button class="pfe-navigation__secondary-link" id="pfe-navigation__secondary-link--English" aria-controls="pfe-navigation__custom-dropdown--English" aria-expanded="false">
                        <pfe-icon icon="web-icon-globe" size="sm" aria-hidden="true" pfelement="" class="PFElement" on="light" type="content"></pfe-icon>English
                    </button>

                    
                <div id="pfe-navigation__custom-dropdown--English" class="pfe-navigation__dropdown-wrapper pfe-navigation__custom-dropdown--single-column pfe-navigation__dropdown-wrapper--invisible" aria-hidden="true" tabindex="-1"><pfe-navigation-dropdown dropdown-width="single" pfelement="" class="PFElement pfe-navigation__dropdown" type="container" data-id-suffix="English">
                        <h2 class="utility-header">Select Your Language
                        </h2>
                        <ul class="reset">
                            <li><a href="https://access.redhat.com/changeLanguage?language=en&amp;redirectTo=https%3A//access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html-single/deploying_mail_servers/index" data-lang="en" id="en" data-analytics-text="English" class="selected">English</a></li>
                            <li><a href="https://access.redhat.com/changeLanguage?language=ko&amp;redirectTo=https%3A//access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html-single/deploying_mail_servers/index" data-lang="ko" id="ko" data-analytics-text="Korean">한국어</a></li>
                            <li><a href="https://access.redhat.com/changeLanguage?language=ja&amp;redirectTo=https%3A//access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html-single/deploying_mail_servers/index" data-lang="ja" id="ja" data-analytics-text="Japanese">日本語</a></li>
                            <li><a href="https://access.redhat.com/changeLanguage?language=zh_CN&amp;redirectTo=https%3A//access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html-single/deploying_mail_servers/index" data-lang="zh_CN" id="zh_CN" data-analytics-text="Chinese">中文 (中国)</a></li>
                        </ul>

                    </pfe-navigation-dropdown></div></div>                <rh-account-dropdown slot="account" pfelement="" class="PFElement" type="content" login-link="https://sso.redhat.com/auth/realms/redhat-external/protocol/openid-connect/auth?client_id=customer-portal&amp;redirect_uri=https%3A%2F%2Faccess.redhat.com%2Fwebassets%2Favalon%2Fj%2Fincludes%2Fsession%2Fscribe%2F%3FredirectTo%3Dhttps%253A%252F%252Faccess.redhat.com%252Fdocumentation%252Fen-us%252Fred_hat_enterprise_linux%252F9%252Fhtml-single%252Fdeploying_mail_servers%252Findex&amp;state=f21ed07f-9372-4fea-8428-32bb1678b47f&amp;nonce=2fdec68b-0a1e-4b9c-8e5b-92231db3697c&amp;response_mode=fragment&amp;response_type=code&amp;scope=openid" lang="en"></rh-account-dropdown>                <pfe-primary-detail breakpoint-width="600" class="main-menu__dropdown--product__product-listing PFElement" slot="main-menu__dropdown--product__product-listing" consistent-height="" aria-orientation="vertical" role="tablist" pfelement="" on="&quot;light&quot;" type="container" has_details="" breakpoint="compact">
                    <button role="tab" slot="details-nav" data-was-tag="H3" id="pfe-detail-toggle-3zdhzoivs" data-index="0" aria-controls="pfe-detail-p3mrjj520" aria-expanded="false">Infrastructure and Management                    </button>
                    <div slot="details" data-index="0" id="pfe-detail-p3mrjj520" role="tabpanel" tabindex="-1" aria-labelledby="pfe-detail-toggle-3zdhzoivs" data-processed="true" aria-hidden="true" hidden="">
                        <ul>
                            <li>
                                <a data-analytics-level="3" data-analytics-category="Products and Services|Products:Infrastructure and Management" data-analytics-text="Red Hat Enterprise Linux" href="https://access.redhat.com/products/red-hat-enterprise-linux/">Red Hat Enterprise Linux
                                </a>
                            </li>
                            <li>
                                <a data-analytics-level="3" data-analytics-category="Products and Services|Products:Infrastructure and Management" data-analytics-text="Red Hat Satellite" href="https://access.redhat.com/products/red-hat-satellite/">Red Hat Satellite
                                </a>
                            </li>
                            <li>
                                <a data-analytics-level="3" data-analytics-category="Products and Services|Products:Infrastructure and Management" data-analytics-text="Red Hat Subscription Management" href="https://access.redhat.com/products/red-hat-subscription-management/">Red Hat Subscription Management
                                </a>
                            </li>
                            <li>
                                <a data-analytics-level="3" data-analytics-category="Products and Services|Products:Infrastructure and Management" data-analytics-text="Red Hat Insights" href="https://access.redhat.com/products/red-hat-insights/">Red Hat Insights
                                </a>
                            </li>
                            <li><a data-analytics-level="3" data-analytics-category="Products and Services|Products:Infrastructure and Management" data-analytics-text="Red Hat Ansible Automation Platform" href="https://access.redhat.com/products/red-hat-ansible-automation-platform/">Red Hat Ansible Automation Platform
                                </a></li>
                        </ul>
                    </div>

                    <button role="tab" slot="details-nav" data-was-tag="H3" id="pfe-detail-toggle-seagn82qi" data-index="1" aria-controls="pfe-detail-uc96hevf6" aria-expanded="false">Cloud Computing                    </button>
                    <div slot="details" data-index="1" id="pfe-detail-uc96hevf6" role="tabpanel" tabindex="-1" aria-labelledby="pfe-detail-toggle-seagn82qi" data-processed="true" aria-hidden="true" hidden="">
                        <ul>
                            <li>
                                <a data-analytics-level="3" data-analytics-category="Products and Services|Products:Cloud Computing" data-analytics-text="Red Hat OpenShift" href="https://access.redhat.com/products/openshift">Red Hat OpenShift
                                </a>
                            </li>
                            <li>
                                <a data-analytics-level="3" data-analytics-category="Products and Services|Products:Cloud Computing" data-analytics-text="Red Hat OpenStack Platform" href="https://access.redhat.com/products/red-hat-openstack-platform/">Red Hat OpenStack Platform
                                </a>
                            </li>
                            <li>
                                <a data-analytics-level="3" data-analytics-category="Products and Services|Products:Cloud Computing Platform" data-analytics-text="Red Hat OpenShift Container Platform" href="https://access.redhat.com/products/red-hat-openshift-container-platform/">Red Hat OpenShift Container Platform
                                </a>
                            </li>
                            <li>
                                <a data-analytics-level="3" data-analytics-category="Products and Services|Products:Cloud Computing Platform" data-analytics-text="Red Hat OpenShift Data Science" href="https://access.redhat.com/products/red-hat-openshift-data-science/">Red Hat OpenShift Data Science
                                </a>
                            </li>
                            <li>
                                <a data-analytics-level="3" data-analytics-category="Products and Services|Products:Cloud Computing" data-analytics-text="Red Hat OpenShift Dedicated" href="https://access.redhat.com/products/openshift-dedicated-red-hat/">Red Hat OpenShift Dedicated
                                </a>
                            </li>
                            <li>
                                <a data-analytics-level="3" data-analytics-category="Products and Services|Products:Cloud Computing Platform" data-analytics-text="Red Hat Advanced Cluster Security for Kubernetes" href="https://access.redhat.com/products/red-hat-advanced-cluster-security-for-kubernetes/">Red Hat Advanced Cluster Security for Kubernetes
                                </a>
                            </li>
                            <li>
                                <a data-analytics-level="3" data-analytics-category="Products and Services|Products:Cloud Computing" data-analytics-text="Red Hat Advanced Cluster Management for Kubernetes" href="https://access.redhat.com/products/red-hat-advanced-cluster-management-for-kubernetes/">Red Hat Advanced Cluster Management for Kubernetes
                                </a>
                            </li>
                            <li>
                                <a data-analytics-level="3" data-analytics-category="Products and Services|Products:Cloud Computing" data-analytics-text="Red Hat Quay" href="https://access.redhat.com/products/red-hat-quay/">Red Hat Quay
                                </a>
                            </li>
                            <li>
                                <a data-analytics-level="3" data-analytics-category="Products and Services|Products:Cloud Computing" data-analytics-text="Red Hat CodeReady Workspaces" href="https://access.redhat.com/products/red-hat-codeready-workspaces/">OpenShift Dev Spaces
                                </a>
                            </li>
                            <li>
                                <a data-analytics-level="3" data-analytics-category="Products and Services|Products:Cloud Computing" data-analytics-text="Red Hat OpenShift Service on AWS" href="https://access.redhat.com/products/red-hat-openshift-service-aws">Red Hat OpenShift Service on AWS
                                </a>
                            </li>
                        </ul>
                    </div>

                    <button role="tab" slot="details-nav" data-was-tag="H3" id="pfe-detail-toggle-v1qaakqkl" data-index="2" aria-controls="pfe-detail-i743q91wb" aria-expanded="false">Storage                    </button>
                    <div slot="details" data-index="2" id="pfe-detail-i743q91wb" role="tabpanel" tabindex="-1" aria-labelledby="pfe-detail-toggle-v1qaakqkl" data-processed="true" aria-hidden="true" hidden="">
                        <ul>
                            <li>
                                <a data-analytics-level="3" data-analytics-category="Products and Services|Products:Storage" data-analytics-text="Red Hat Gluster Storage" href="https://access.redhat.com/products/red-hat-storage/">Red Hat Gluster Storage
                                </a>
                            </li>
                            <li>
                                <a data-analytics-level="3" data-analytics-category="Products and Services|Products:Storage" data-analytics-text="Red Hat Hyperconverged Infrastructure" href="https://access.redhat.com/products/red-hat-hyperconverged-infrastructure/">Red Hat Hyperconverged Infrastructure
                                </a>
                            </li>
                            <li>
                                <a data-analytics-level="3" data-analytics-category="Products and Services|Products:Storage" data-analytics-text="Red Hat Ceph Storage" href="https://access.redhat.com/products/red-hat-ceph-storage/">Red Hat Ceph Storage
                                </a>
                            </li>
                            <li>
                                <a data-analytics-level="3" data-analytics-category="Products and Services|Products:Storage" data-analytics-text="Red Hat Openshift Container Storage" href="https://access.redhat.com/products/red-hat-openshift-data-foundation">Red Hat OpenShift Data Foundation
                                </a>
                            </li>
                        </ul>
                    </div>

                    <button role="tab" slot="details-nav" data-was-tag="H3" id="pfe-detail-toggle-sb4uochgg" data-index="3" aria-controls="pfe-detail-6mpz1v7cs" aria-expanded="false">Runtimes                    </button>
                    <div slot="details" data-index="3" id="pfe-detail-6mpz1v7cs" role="tabpanel" tabindex="-1" aria-labelledby="pfe-detail-toggle-sb4uochgg" data-processed="true" aria-hidden="true" hidden="">
                        <ul>
                            <li>
                                <a data-analytics-level="3" data-analytics-category="Products and Services|Products:Runtimes" data-analytics-text="Red Hat Runtimes" href="https://access.redhat.com/products/red-hat-runtimes/">Red Hat Runtimes
                                </a>
                            </li>
                            <li>
                                <a data-analytics-level="3" data-analytics-category="Products and Services|Products:Runtimes" data-analytics-text="Red Hat JBoss Enterprise Application Platform" href="https://access.redhat.com/products/red-hat-jboss-enterprise-application-platform/">Red Hat JBoss Enterprise Application Platform
                                </a>
                            </li>
                            <li>
                                <a data-analytics-level="3" data-analytics-category="Products and Services|Products:Runtimes" data-analytics-text="Red Hat Data Grid" href="https://access.redhat.com/products/red-hat-data-grid/">Red Hat Data Grid
                                </a>
                            </li>
                            <li>
                                <a data-analytics-level="3" data-analytics-category="Products and Services|Products:Runtimes" data-analytics-text="Red Hat JBoss Web Server" href="https://access.redhat.com/products/red-hat-jboss-web-server/">Red Hat JBoss Web Server
                                </a>
                            </li>
                            <li>
                                <a data-analytics-level="3" data-analytics-category="Products and Services|Products:Runtimes" data-analytics-text="Red Hat Single Sign On" href="https://access.redhat.com/products/red-hat-single-sign-on/">Red Hat Single Sign On
                                </a>
                            </li>
                            <li>
                                <a data-analytics-level="3" data-analytics-category="Products and Services|Products:Runtimes" data-analytics-text="Red Hat support for Spring Boot" href="https://access.redhat.com/products/spring-boot/">Red Hat support for Spring Boot
                                </a>
                            </li>
                            <li>
                                <a data-analytics-level="3" data-analytics-category="Products and Services|Products:Runtimes" data-analytics-text="Red Hat build of Node.js" href="https://access.redhat.com/products/nodejs/">Red Hat build of Node.js
                                </a>
                            </li>                            <li>
                                <a data-analytics-level="3" data-analytics-category="Products and Services|Products:Runtimes" data-analytics-text="Red Hat build of Quarkus" href="https://access.redhat.com/products/quarkus/">Red Hat build of Quarkus
                                </a>
                            </li>
                        </ul>
                    </div>

                    <button role="tab" slot="details-nav" data-was-tag="H3" id="pfe-detail-toggle-kt2g7lkp1" data-index="4" aria-controls="pfe-detail-irrspwsw2" aria-expanded="false">Integration and Automation                    </button>
                    <div slot="details" data-index="4" id="pfe-detail-irrspwsw2" role="tabpanel" tabindex="-1" aria-labelledby="pfe-detail-toggle-kt2g7lkp1" data-processed="true" aria-hidden="true" hidden="">
                        <ul class="border-bottom" id="portal-menu-border-bottom">
                            <li>
                                <a data-analytics-level="3" data-analytics-category="Products and Services|Products:Integration and Automation" data-analytics-text="Red Hat Application Foundations" href="https://access.redhat.com/products/red-hat-application-foundations/">Red Hat Application Foundations
                                </a>
                            </li>
                            <li>
                                <a data-analytics-level="3" data-analytics-category="Products and Services|Products:Integration and Automation" data-analytics-text="Red Hat Fuse" href="https://access.redhat.com/products/red-hat-fuse/">Red Hat Fuse
                                </a>
                            </li>
                            <li>
                                <a data-analytics-level="3" data-analytics-category="Products and Services|Products:Integration and Automation" data-analytics-text="Red Hat AMQ" href="https://access.redhat.com/products/red-hat-amq/">Red Hat AMQ
                                </a>
                            </li>
                            <li>
                                <a data-analytics-level="3" data-analytics-category="Products and Services|Products:Integration and Automation" data-analytics-text="Red Hat 3scale API Management" href="https://access.redhat.com/products/red-hat-3scale/">Red Hat 3scale API Management
                                </a>
                            </li>
                        </ul>
                    </div>
                    <div slot="details-nav--footer">
                        <pfe-cta pfe-priority="primary" priority="primary" pfelement="" class="PFElement" on="&quot;light&quot;" has_link="">
                            <a href="https://access.redhat.com/products/" class="pfe-navigation__menu-link" data-analytics-level="2" data-analytics-text="All Products" data-analytics-category="Products and Services|Products:" data-analytics-linktype="cta">All Products
                            </a>
                        </pfe-cta>
                    </div>
                </pfe-primary-detail>

            <div slot="secondary-links" class="pfe-navigation__site-switcher pfe-navigation__custom-dropdown__wrapper--full pfe-navigation__custom-dropdown__wrapper" mobile-slider=""><button class="pfe-navigation__secondary-link" id="pfe-navigation__secondary-link--All-Red-Hat" aria-controls="pfe-navigation__custom-dropdown--All-Red-Hat" aria-expanded="false"><pfe-icon icon="web-icon-grid-3x3" size="sm" aria-hidden="true" pfelement="" class="PFElement" on="light" type="content"></pfe-icon>All Red Hat</button> <div id="pfe-navigation__custom-dropdown--All-Red-Hat" class="pfe-navigation__dropdown-wrapper pfe-navigation__custom-dropdown--full pfe-navigation__dropdown-wrapper--invisible" aria-hidden="true" tabindex="-1"><pfe-navigation-dropdown dropdown-width="full" pfelement="" class="PFElement pfe-navigation__dropdown" type="container" data-id-suffix="All-Red-Hat"><div class="pfe-navigation__site-switcher__back-wrapper"><button class="pfe-navigation__site-switcher__back-button" aria-label="Close undefined and return to menu">Back to menu</button></div><site-switcher pfelement="" class="PFElement" type="content" lang="en"><article class="node-355871 node node-page clearfix">


    <div class="field field-name-body field-type-text-with-summary field-label-hidden">
        <div class="field-items">
            <div class="field-item even">
                <!--linking to stylesheets so /cms/ajax/site-switcher will load with styles -->
  <link type="text/css" rel="stylesheet" href="Deploying%20mail%20servers%20Red%20Hat%20Enterprise%20Linux%209%20Red%20Hat%20Customer%20Portal_files/site-switcher.css" media="all">
  
  <!-- overriding css variables to get the redhat.com logo box and text to change style indicating you are on this site-->

                <style>
                    :root {
                        --rhdc--logo: var(--rhdc--logo--you-are-here);
                        --rhdc--backgroundColor: var(--background--you-are-here);
                        --rhdc--label: var(--label--you-are-here);
                        --rhdc--margin-top: 0px;
                    }
                </style>

                <section class="site-switcher-tray" data-analytics-region="site-switcher">
                    <div class="content">
                        <div class="container">
                            <section class="site-switcher-container">
                                <ul class="site-switcher-primary-list">
                                    <li class="rhdc">
                                        <a href="https://www.redhat.com/?intcmp=701f20000012k69AAA" data-analytics-category="Websites" data-analytics-text="redhat">
                                            <p class="location-label">You are here</p>
                                            <div class="tntLogo">
                                                <div class="image"></div>
                                            </div>
                                            <h3>Red Hat</h3>
                                            <p>Learn about our open source products, services, and company.</p>
                                        </a>
                                    </li>
                                    <li class="customer-portal">
                                        <a href="https://access.redhat.com/?intcmp=701f20000012k6EAAQ" data-analytics-category="Websites" data-analytics-text="access_redhat">
                                            <p class="location-label">You are here</p>
                                            <div class="tntLogo">
                                                <!-- Customer portal -->
                                                <div class="image"></div>
                                            </div>
                                            <h3>Red Hat Customer Portal</h3>
                                            <p>Get product support and knowledge from the open source experts.</p>
                                        </a>
                                    </li>
                                    <li class="developers">
                                        <a href="https://developers.redhat.com/?intcmp=701f20000012k6JAAQ" data-analytics-category="Websites" data-analytics-text="developers_redhat">
                                            <p class="location-label">You are here</p>
                                            <div class="tntLogo">
                                                <!-- Red Hat Developer -->
                                                <div class="image"></div>
                                            </div>
                                            <h3>Red Hat Developer</h3>
                                            <p>Read developer tutorials and download Red Hat software for cloud
                                                application development.</p>
                                        </a>
                                    </li>
                                    <li class="connect">
                                        <a href="https://connect.redhat.com/" data-analytics-category="Websites" data-analytics-text="connect_redhat">
                                            <p class="location-label">You are here</p>
                                            <div class="tntLogo">
                                                <!-- Red Hat Partner Connect -->
                                                <div class="image"></div>
                                            </div>
                                            <h3>Red Hat Partner Connect</h3>
                                            <p>Become a Red Hat partner and get support in building customer solutions.
                                            </p>
                                        </a>
                                    </li>
                                </ul>
                                <hr>

                                <ul class="site-switcher-secondary-list">
                                    <li>
                                        <h2>Products</h2>
                                        <ul>
                                            <li><a href="https://www.ansible.com/?intcmp=701f20000012k6TAAQ" data-analytics-category="Websites" data-analytics-text="ansible">
                                                    <h3>Ansible.com</h3>
                                                </a>Learn about and try our IT automation product.</li>

                                        </ul>
                                    </li>
                                    <li>
                                        <h2>Try, Buy, Sell</h2>
                                        <ul>
                                            <li><a href="https://cloud.redhat.com/" data-analytics-category="Websites" data-analytics-text="hybrid-cloud">
                                                    <h3>Red Hat Hybrid Cloud</h3>
                                                </a>Access technical how-tos, tutorials, and learning paths focused on
                                                Red Hat’s hybrid cloud managed services.</li>

                                            <li><a href="https://www.redhat.com/store?intcmp=701f20000012k6nAAA" data-analytics-category="Websites" data-analytics-text="store">
                                                    <h3>Red Hat Store</h3>
                                                </a>Buy select Red Hat products and services online.</li>

                                            <li><a href="https://marketplace.redhat.com/" data-analytics-category="Websites" data-analytics-text="marketplace">
                                                    <h3>Red Hat Marketplace</h3>
                                                </a>Try, buy, sell, and manage certified enterprise software for
                                                container-based environments.</li>

                                        </ul>
                                    </li>
                                    <li>
                                        <h2>Community &amp; Open Source</h2>
                                        <ul>
                                            <li><a href="https://enterprisersproject.com/?intcmp=701f20000012k6sAAA" data-analytics-category="Websites" data-analytics-text="enterprisersproject">
                                                    <h3>The Enterprisers Project</h3>
                                                </a>Read analysis and advice articles written by CIOs, for CIOs.</li>
                                            <li><a href="https://opensource.com/?intcmp=701f20000012k6OAAQ" data-analytics-category="Websites" data-analytics-text="opensource">
                                                    <h3>Opensource.com</h3>
                                                </a>Read articles on a range of topics about open source.</li>
                                        </ul>
                                    </li>
                                    <li>
                                        <h2>&nbsp;</h2>
                                        <ul>
                                            <li><a href="https://www.redhat.com/summit?intcmp=701f20000012k6xAAA" data-analytics-category="Websites" data-analytics-text="summit">
                                                    <h3>Red Hat Summit</h3>
                                                </a>Register for and learn about our annual open source IT industry
                                                event.</li>
                                            <li><a href="https://catalog.redhat.com/" data-analytics-category="Websites" data-analytics-text="catalog">
                                                    <h3>Red Hat Ecosystem Catalog</h3>
                                                </a>Find hardware, software, and cloud providers―and download container
                                                images―certified to perform with Red Hat technologies.</li>
                                        </ul>
                                    </li>
                                </ul>
                            </section>
                        </div>
                    </div>
                </section>
            </div>
        </div>
    </div>



</article></site-switcher></pfe-navigation-dropdown></div></div></pfe-navigation>

            <div id="scroll-anchor"></div>

            <!--[if IE 8]>
                <div class="portal-messages">
                <div class="alert alert-warning alert-portal alert-w-icon">
                <span class="icon-warning alert-icon" aria-hidden="true"></span>
                You are using an unsupported web browser. Update to a supported browser for the best experience. <a href="/announcements/2120951">Read the announcement</a>.
                </div>
                </div>
            <![endif]-->
            <!--[if IE 9]>
                <div class="portal-messages">
                <div class="alert alert-warning alert-portal alert-w-icon">
                <span class="icon-warning alert-icon" aria-hidden="true"></span>As of March 1, 2016, the Red Hat Customer Portal will no longer support Internet Explorer 9. See our new <a href="/help/browsers">browser support policy</a> for more information.
                </div>
                </div>
            <![endif]-->
            <div id="site-section"></div>
        <div class="breadcrumbs"><div id="breadcrumbs" class="container"><ul><li><a href="https://access.redhat.com/products/">Products &amp; Services</a></li><li><a href="https://access.redhat.com/documentation">Product Documentation</a></li><li><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux">Red&nbsp;Hat Enterprise Linux</a></li><li><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9">9</a></li><li><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/deploying_mail_servers">Deploying mail servers</a></li><li>Deploying mail servers</li></ul></div></div></header>
        <!--googleon: all-->

        <main id="cp-main" class="portal-content-area">
            <div id="cp-content" class="main-content">                            <!-- /CP_PRIMER_HEADER -->

      <div class="container">
        

                                                                                                        <script>breadcrumbs = [["Products & Services","\/products\/"],["Product Documentation","\/documentation"],["Red Hat Enterprise Linux","\/documentation\/en-us\/red_hat_enterprise_linux"],["9","\/documentation\/en-us\/red_hat_enterprise_linux\/9"],["Deploying mail servers","\/documentation\/en-us\/red_hat_enterprise_linux\/9\/html\/deploying_mail_servers"],["Deploying mail servers","\/documentation\/en-us\/red_hat_enterprise_linux\/9\/html\/deploying_mail_servers\/--single-page-document--"]]</script>

<div data-drupal-messages-fallback="" class="hidden"></div>


    </div>
        <div class="j-chrome-content-container">
        

  

  


  <article class="pvof-doc__content-wrapper__outer">
    <script>
      'use strict';

            var $outerWrapper = document.querySelector('.pvof-doc__content-wrapper__outer');
      if ($outerWrapper && $outerWrapper.closest) {
        var $containerWrapper = $outerWrapper.closest('.container');
        if ($containerWrapper) {
          $containerWrapper.classList.remove('container');
          $containerWrapper.classList.add('j-chrome-content-container');
        }
      }

            var cssRemoved = false;
      try {
        var $crapCss = document.querySelectorAll(
          'link[href*="/chrome_themes/nimbus/css/pages.css"], link[href*="/chrome_themes/nimbus/css/components.css"]'
        );
        if ($crapCss.length) {
          for (let index = 0; index < $crapCss.length; index++) {
            const $stylesheet = $crapCss[index];
            $stylesheet.remove();
          }
        }
        cssRemoved = true;
      }
      catch (error) {
        console.error('Ran into an issue while trying to retheme page', error);
        cssRemoved = false;
      }

            if (cssRemoved) {
        var $pvofOuterWrapper = document.querySelector('.pvof-doc__content-wrapper__outer--css-not-removed');
        if ($pvofOuterWrapper) {
          $pvofOuterWrapper.classList.remove('pvof-doc__content-wrapper__outer--css-not-removed');
        }
      }
    </script>
    <div itemscope="" itemtype="https://schema.org/TechArticle" itemref="techArticle-md1 techArticle-md2 techArticle-md3"></div>
    <div itemscope="" itemtype="https://schema.org/SoftwareApplication" itemref="softwareApplication-md1 softwareApplication-md2 softwareApplication-md3 softwareApplication-md4"></div>
    <div class="pvof-doc__content-wrapper pvof-doc__content-wrapper--has-sidebar">
                                <div class="pvof-doc__content-wrapper__inner j-superdoc j-superdoc--has-nav j-reading-mode-initialized">
                            <div class="pvof-sidebar__wrapper j-doc-nav j-superdoc__nav">
            <div class="j-sidebar__menu-container j-sidebar__menu-container--processed">
              <button class="j-sidebar__menu-trigger content-expander__trigger content-expander__trigger--processed" aria-expanded="true" aria-controls="content-expander-c6uu67l">
                <span class="j-sidebar__menu-trigger__open-text">Jump To</span>
                <span class="j-sidebar__menu-trigger__close-text">Close</span>
              </button>

              <div class="pvof-sidebar__inner-wrapper j-doc-nav__wrapper content-expander content-expander--processed" id="content-expander-c6uu67l" open="">
                <div class="j-sidebar__menu-details-container">
                  <button class="j-sidebar__menu-details-button j-sidebar__menu-details-button--expand">
                    Expand all
                  </button>
                  <button class="j-sidebar__menu-details-button j-sidebar__menu-details-button--collapse">
                    Collapse all
                  </button>
                </div>
                

  <nav id="pvof-doc__toc" class="pvof-doc__toc">
  <h2 class="j-doc-nav__title" id="j-doc-nav__title">
    Table of contents
  </h2>
  <div class="pvof-doc__toc-inner">
              <ol class="j-doc-nav__list" aria-labelledby="j-doc-nav__title">
                  <li class="j-doc-nav__list-item">
                                    

    <a href="#doc-wrapper" class="j-doc-nav__link is-active">
    Deploying mail servers
  </a>
  
          </li>
                  <li class="j-doc-nav__list-item">
                                    

    <a href="#making-open-source-more-inclusive" class="j-doc-nav__link ">
    Making open source more inclusive
  </a>
  
          </li>
                  <li class="j-doc-nav__list-item">
                                    

    <a href="#proc_providing-feedback-on-red-hat-documentation_deploying-mail-servers" class="j-doc-nav__link ">
    Providing feedback on Red Hat documentation
  </a>
  
          </li>
                  <li class="j-doc-nav__list-item">
                                      

    <a href="#configuring-and-maintaining-a-dovecot-imap-and-pop3-server_deploying-mail-servers" class="j-doc-nav__link j-doc-nav__link--has-children">
    1. Configuring and maintaining a Dovecot IMAP and POP3 server
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger content-expander__trigger--processed" aria-expanded="false" aria-controls="content-expander-9ca83ct">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "1. Configuring and maintaining a Dovecot IMAP and POP3 server"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "1. Configuring and maintaining a Dovecot IMAP and POP3 server"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander content-expander--processed" id="content-expander-9ca83ct" aria-hidden="true">
                  <li class="j-superdoc-subnav__item">
                          

    <a href="#setting-up-a-dovecot-server-with-pam-authentication_configuring-and-maintaining-a-dovecot-imap-and-pop3-server" class="j-doc-nav__link j-doc-nav__link--has-children">
    1.1. Setting up a Dovecot server with PAM authentication
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger content-expander__trigger--processed" aria-expanded="false" aria-controls="content-expander-01gyvms">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "1.1. Setting up a Dovecot server with PAM authentication"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "1.1. Setting up a Dovecot server with PAM authentication"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander content-expander--processed" id="content-expander-01gyvms" aria-hidden="true">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="#installing-dovecot_setting-up-a-dovecot-server-with-pam-authentication" class="j-doc-nav__link ">
    1.1.1. Installing Dovecot
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="#configuring-tls-encryption-on-a-dovecot-server_setting-up-a-dovecot-server-with-pam-authentication" class="j-doc-nav__link ">
    1.1.2. Configuring TLS encryption on a Dovecot server
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="#preparing-dovecot-to-use-virtual-users_setting-up-a-dovecot-server-with-pam-authentication" class="j-doc-nav__link ">
    1.1.3. Preparing Dovecot to use virtual users
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="#using-pam-as-the-dovecot-authentication-backend_setting-up-a-dovecot-server-with-pam-authentication" class="j-doc-nav__link ">
    1.1.4. Using PAM as the Dovecot authentication backend
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="#completing-the-dovecot-configuration_setting-up-a-dovecot-server-with-pam-authentication" class="j-doc-nav__link ">
    1.1.5. Completing the Dovecot configuration
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="#setting-up-a-dovecot-server-with-ldap-authentication_configuring-and-maintaining-a-dovecot-imap-and-pop3-server" class="j-doc-nav__link j-doc-nav__link--has-children">
    1.2. Setting up a Dovecot server with LDAP authentication
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger content-expander__trigger--processed" aria-expanded="false" aria-controls="content-expander-2eby61s">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "1.2. Setting up a Dovecot server with LDAP authentication"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "1.2. Setting up a Dovecot server with LDAP authentication"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander content-expander--processed" id="content-expander-2eby61s" aria-hidden="true">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="#installing-dovecot_setting-up-a-dovecot-server-with-ldap-authentication" class="j-doc-nav__link ">
    1.2.1. Installing Dovecot
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="#configuring-tls-encryption-on-a-dovecot-server_setting-up-a-dovecot-server-with-ldap-authentication" class="j-doc-nav__link ">
    1.2.2. Configuring TLS encryption on a Dovecot server
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="#preparing-dovecot-to-use-virtual-users_setting-up-a-dovecot-server-with-ldap-authentication" class="j-doc-nav__link ">
    1.2.3. Preparing Dovecot to use virtual users
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="#using-ldap-as-the-dovecot-authentication-backend_setting-up-a-dovecot-server-with-ldap-authentication" class="j-doc-nav__link ">
    1.2.4. Using LDAP as the Dovecot authentication backend
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="#completing-the-dovecot-configuration_setting-up-a-dovecot-server-with-ldap-authentication" class="j-doc-nav__link ">
    1.2.5. Completing the Dovecot configuration
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="#setting-up-a-dovecot-server-with-mariadb-sql-authentication_configuring-and-maintaining-a-dovecot-imap-and-pop3-server" class="j-doc-nav__link j-doc-nav__link--has-children">
    1.3. Setting up a Dovecot server with MariaDB SQL authentication
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger content-expander__trigger--processed" aria-expanded="false" aria-controls="content-expander-o6xbgwf">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "1.3. Setting up a Dovecot server with MariaDB SQL authentication"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "1.3. Setting up a Dovecot server with MariaDB SQL authentication"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander content-expander--processed" id="content-expander-o6xbgwf" aria-hidden="true">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="#installing-dovecot_setting-up-a-dovecot-server-with-mariadb-sql-authentication" class="j-doc-nav__link ">
    1.3.1. Installing Dovecot
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="#configuring-tls-encryption-on-a-dovecot-server_setting-up-a-dovecot-server-with-mariadb-sql-authentication" class="j-doc-nav__link ">
    1.3.2. Configuring TLS encryption on a Dovecot server
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="#preparing-dovecot-to-use-virtual-users_setting-up-a-dovecot-server-with-mariadb-sql-authentication" class="j-doc-nav__link ">
    1.3.3. Preparing Dovecot to use virtual users
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="#using-a-mariadb-sql-database-as-the-dovecot-authentication-backend_setting-up-a-dovecot-server-with-mariadb-sql-authentication" class="j-doc-nav__link ">
    1.3.4. Using a MariaDB SQL database as the Dovecot authentication backend
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="#completing-the-dovecot-configuration_setting-up-a-dovecot-server-with-mariadb-sql-authentication" class="j-doc-nav__link ">
    1.3.5. Completing the Dovecot configuration
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="#configuring-replication-between-two-dovecot-servers_configuring-and-maintaining-a-dovecot-imap-and-pop3-server" class="j-doc-nav__link ">
    1.4. Configuring replication between two Dovecot servers
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="#automatically-subscribing-users-to-imap-mailboxesconfiguring-and-maintaining-a-dovecot-imap-and-pop3-server" class="j-doc-nav__link ">
    1.5. Automatically subscribing users to IMAP mailboxes
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="#configuring-an-lmtp-socket-and-lmtps-listener_configuring-and-maintaining-a-dovecot-imap-and-pop3-server" class="j-doc-nav__link ">
    1.6. Configuring an LMTP socket and LMTPS listener
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="#disabling-the-imap-or-pop3-service-in-dovecot_configuring-and-maintaining-a-dovecot-imap-and-pop3-server" class="j-doc-nav__link ">
    1.7. Disabling the IMAP or POP3 service in Dovecot
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="#enabling-server-side-email-filtering-using-sieve-on-a-dovecot-imap-server_configuring-and-maintaining-a-dovecot-imap-and-pop3-server" class="j-doc-nav__link ">
    1.8. Enabling server-side email filtering using Sieve on a Dovecot IMAP server
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="#how-dovecot-processes-configuration-files_configuring-and-maintaining-a-dovecot-imap-and-pop3-server" class="j-doc-nav__link ">
    1.9. How Dovecot processes configuration files
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-doc-nav__list-item">
                                      

    <a href="#assembly_mail-transport-agent_deploying-mail-servers" class="j-doc-nav__link j-doc-nav__link--has-children">
    2. Deploying and configuring a Postfix SMTP server
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger content-expander__trigger--processed" aria-expanded="false" aria-controls="content-expander-7zdfauf">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "2. Deploying and configuring a Postfix SMTP server"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "2. Deploying and configuring a Postfix SMTP server"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander content-expander--processed" id="content-expander-7zdfauf" aria-hidden="true">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="#con_postfix_assembly_mail-transport-agent" class="j-doc-nav__link ">
    2.1. Overview of the main Postfix configuration files
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="#proc_installing-and-configuring-postfix_assembly_mail-transport-agent" class="j-doc-nav__link ">
    2.2. Installing and configuring a Postfix SMTP server
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="#proc_customizing-tls-settings-of-a-postfix-server_assembly_mail-transport-agent" class="j-doc-nav__link ">
    2.3. Customizing TLS settings of a Postfix server
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="#proc_configuring-postfix-to-forward-all-emails-to-a-mail-relay_assembly_mail-transport-agent" class="j-doc-nav__link ">
    2.4. Configuring Postfix to forward all emails to a mail relay
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="#proc_configuring-postfix-as-a-destination-for-multiple-domains_assembly_mail-transport-agent" class="j-doc-nav__link ">
    2.5. Configuring Postfix as a destination for multiple domains
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="#proc_using-an-ldap-directory-as-a-lookup-table_assembly_mail-transport-agent" class="j-doc-nav__link ">
    2.6. Using an LDAP directory as a lookup table
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="#proc_configuring-postfix-as-an-outgoing-mail-server-to-relay-for-authenticated-users_assembly_mail-transport-agent" class="j-doc-nav__link ">
    2.7. Configuring Postfix as an outgoing mail server to relay for authenticated users
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="#proc_delivering-email-from-postfix-to-dovecot-on-the-same-host_assembly_mail-transport-agent" class="j-doc-nav__link ">
    2.8. Delivering email from Postfix to Dovecot running on the same host
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="#proc_delivering-email-from-postfix-to-dovecot-on-a-different-host_assembly_mail-transport-agent" class="j-doc-nav__link ">
    2.9. Delivering email from Postfix to Dovecot running on a different host
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="#assembly_securing-the-postfix-service_assembly_mail-transport-agent" class="j-doc-nav__link j-doc-nav__link--has-children">
    2.10. Securing the Postfix service
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger content-expander__trigger--processed" aria-expanded="false" aria-controls="content-expander-hohp230">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "2.10. Securing the Postfix service"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "2.10. Securing the Postfix service"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander content-expander--processed" id="content-expander-hohp230" aria-hidden="true">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="#ref_reducing-postfix-network-related-security-risks_assembly_securing-the-postfix-service" class="j-doc-nav__link ">
    2.10.1. Reducing Postfix network-related security risks
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="#ref_postfix-configuration-options-for-limiting-dos-attacks_assembly_securing-the-postfix-service" class="j-doc-nav__link ">
    2.10.2. Postfix configuration options for limiting DoS attacks
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="#proc_configuring-postfix-to-use-sasl_assembly_securing-the-postfix-service" class="j-doc-nav__link ">
    2.10.3. Configuring Postfix to use SASL
  </a>
  
          </li>
              </ol>

  
          </li>
              </ol>

  
          </li>
                  <li class="j-doc-nav__list-item">
                                    

    <a href="#idm140563160147008" class="j-doc-nav__link ">
    Legal Notice
  </a>
  
          </li>
              </ol>
    
  </div>
</nav>


              </div>
            </div>
            <div class="j-options-container j-options-container--mobile">
              <button class="j-sidebar__menu-trigger j-sidebar__menu-trigger--options content-expander__trigger content-expander__trigger--processed" aria-expanded="false" aria-controls="content-expander-1zocb81">
                <span class="j-sidebar__menu-trigger__open-headline">
                  Settings
                </span>
                <span class="j-sidebar__menu-trigger__close-text">Close</span>
              </button>
              

  <ul class="j-doc-options__list content-expander content-expander--processed" id="content-expander-1zocb81" aria-hidden="true">
    <li class="j-doc-options__item">
          <label class="j-doc-option__label j-doc-option__label--language" for="j-doc-language">
        Language:
      </label>
      <select id="j-doc-language" class="j-doc-option__select" data-ddg-inputtype="unknown">
                  <option value="/documentation/ko-kr/red_hat_enterprise_linux/9/html-single/deploying_mail_servers">
            한국어
          </option>
                  <option value="/documentation/zh-cn/red_hat_enterprise_linux/9/html-single/deploying_mail_servers">
            简体中文
          </option>
                  <option value="/documentation/ja-jp/red_hat_enterprise_linux/9/html-single/deploying_mail_servers">
            日本語
          </option>
                  <option value="/documentation/en-us/red_hat_enterprise_linux/9/html-single/deploying_mail_servers" selected="selected">
            English
          </option>
                  <option value="/documentation/fr-fr/red_hat_enterprise_linux/9/html-single/deploying_mail_servers">
            Français
          </option>
              </select>

            <noscript>
        <div class="j-doc-option__label j-doc-option__label--language" id="j-doc-option__label--language--nojs">
          Language:
        </div>
        <ul aria-labelledby="j-doc-option__label--language--nojs" class="j-doc-option__languages-list">
                      <li>
              <a href="/documentation/ko-kr/red_hat_enterprise_linux/9/html-single/deploying_mail_servers">한국어</a>
            </li>
                      <li>
              <a href="/documentation/zh-cn/red_hat_enterprise_linux/9/html-single/deploying_mail_servers">简体中文</a>
            </li>
                      <li>
              <a href="/documentation/ja-jp/red_hat_enterprise_linux/9/html-single/deploying_mail_servers">日本語</a>
            </li>
                      <li>
              <a href="/documentation/en-us/red_hat_enterprise_linux/9/html-single/deploying_mail_servers">English</a>
            </li>
                      <li>
              <a href="/documentation/fr-fr/red_hat_enterprise_linux/9/html-single/deploying_mail_servers">Français</a>
            </li>
                  </ul>
      </noscript>

      </li>

    <li class="j-doc-options__item">
    <label for="j-doc-mode" class="j-doc-option__label j-doc-option__label--format">
      Format:
    </label>
    <select id="j-doc-mode" class="j-doc-option__select" data-ddg-inputtype="unknown">
              <option value="/documentation/en-us/red_hat_enterprise_linux/9/html/deploying_mail_servers" class="j-doc-options__option j-doc-options__option--multi-page">
          Multi-page
        </option>
              <option value="/documentation/en-us/red_hat_enterprise_linux/9/html-single/deploying_mail_servers" selected="selected" class="j-doc-options__option j-doc-options__option--single-page">
          Single-page
        </option>
              <option value="/documentation/en-us/red_hat_enterprise_linux/9/pdf/deploying_mail_servers/Red_Hat_Enterprise_Linux-9-Deploying_mail_servers-en-US.pdf" class="j-doc-options__option j-doc-options__option--pdf">
          PDF
        </option>
          </select>

        <noscript>
      <div class="j-doc-option__label j-doc-option__label--format" id="j-doc-option__label--format--nojs">
        Format:
      </div>
      <ul class="j-doc-option__format-list" aria-labelledby="j-doc-option__label--format--nojs">
                  <li class="j-doc-mode-no-js__link j-doc-mode-no-js__link--multi-page"><a href="/documentation/en-us/red_hat_enterprise_linux/9/html/deploying_mail_servers">Multi-page</a></li>
                  <li class="j-doc-mode-no-js__link j-doc-mode-no-js__link--single-page"><a href="/documentation/en-us/red_hat_enterprise_linux/9/html-single/deploying_mail_servers">Single-page</a></li>
                  <li class="j-doc-mode-no-js__link j-doc-mode-no-js__link--pdf"><a href="/documentation/en-us/red_hat_enterprise_linux/9/pdf/deploying_mail_servers/Red_Hat_Enterprise_Linux-9-Deploying_mail_servers-en-US.pdf">PDF</a></li>
              </ul>
    </noscript>
  </li>
</ul>


              </div>
          </div>
                <div class="pvof-doc__tertiary-sidebar j-doc__tertiary-sidebar j-doc__tertiary-sidebar--sticky">
          <div class="pvof-doc__tertiary-sidebar__inner j-doc__tertiary-sidebar__inner"><div id="j-reading-mode-toggle" class="j-switch__wrapper j-reading-mode__toggle"><input type="checkbox" name="reading-mode" value="false" id="reading-mode-checkbox" class="j-reading-mode j-switch__input visually-hidden"><label for="reading-mode-checkbox" class="j-switch__label">Focus mode<span class="j-reading-mode__shortcut-hint" hidden=""><kbd>F</kbd></span><div class="j-switch"></div></label></div>
            <div class="j-doc__doc-options">
              <div class="j-options-container j-options-container--desktop j-options-container--desktop--processed">
                <button class="j-sidebar__menu-trigger j-sidebar__menu-trigger--tablet content-expander__trigger content-expander__trigger--processed" aria-expanded="true" aria-controls="content-expander-13vdpca">
                  <span class="j-sidebar__menu-trigger-icon"></span>
                  <h2 class="visually-hidden">Language and Page Formatting Options</h2>
                </button>
                  

  <ul class="j-doc-options__list content-expander content-expander--processed" id="content-expander-13vdpca" open="">
    <li class="j-doc-options__item">
          <label class="j-doc-option__label j-doc-option__label--language" for="j-doc-language--2">
        Language:
      </label>
      <select id="j-doc-language--2" class="j-doc-option__select" data-ddg-inputtype="unknown">
                  <option value="/documentation/ko-kr/red_hat_enterprise_linux/9/html-single/deploying_mail_servers">
            한국어
          </option>
                  <option value="/documentation/zh-cn/red_hat_enterprise_linux/9/html-single/deploying_mail_servers">
            简体中文
          </option>
                  <option value="/documentation/ja-jp/red_hat_enterprise_linux/9/html-single/deploying_mail_servers">
            日本語
          </option>
                  <option value="/documentation/en-us/red_hat_enterprise_linux/9/html-single/deploying_mail_servers" selected="selected">
            English
          </option>
                  <option value="/documentation/fr-fr/red_hat_enterprise_linux/9/html-single/deploying_mail_servers">
            Français
          </option>
              </select>

            <noscript>
        <div class="j-doc-option__label j-doc-option__label--language" id="j-doc-option__label--language--nojs">
          Language:
        </div>
        <ul aria-labelledby="j-doc-option__label--language--nojs" class="j-doc-option__languages-list">
                      <li>
              <a href="/documentation/ko-kr/red_hat_enterprise_linux/9/html-single/deploying_mail_servers">한국어</a>
            </li>
                      <li>
              <a href="/documentation/zh-cn/red_hat_enterprise_linux/9/html-single/deploying_mail_servers">简体中文</a>
            </li>
                      <li>
              <a href="/documentation/ja-jp/red_hat_enterprise_linux/9/html-single/deploying_mail_servers">日本語</a>
            </li>
                      <li>
              <a href="/documentation/en-us/red_hat_enterprise_linux/9/html-single/deploying_mail_servers">English</a>
            </li>
                      <li>
              <a href="/documentation/fr-fr/red_hat_enterprise_linux/9/html-single/deploying_mail_servers">Français</a>
            </li>
                  </ul>
      </noscript>

      </li>

    <li class="j-doc-options__item">
    <label for="j-doc-mode--2" class="j-doc-option__label j-doc-option__label--format">
      Format:
    </label>
    <select id="j-doc-mode--2" class="j-doc-option__select" data-ddg-inputtype="unknown">
              <option value="/documentation/en-us/red_hat_enterprise_linux/9/html/deploying_mail_servers" class="j-doc-options__option j-doc-options__option--multi-page">
          Multi-page
        </option>
              <option value="/documentation/en-us/red_hat_enterprise_linux/9/html-single/deploying_mail_servers" selected="selected" class="j-doc-options__option j-doc-options__option--single-page">
          Single-page
        </option>
              <option value="/documentation/en-us/red_hat_enterprise_linux/9/pdf/deploying_mail_servers/Red_Hat_Enterprise_Linux-9-Deploying_mail_servers-en-US.pdf" class="j-doc-options__option j-doc-options__option--pdf">
          PDF
        </option>
          </select>

        <noscript>
      <div class="j-doc-option__label j-doc-option__label--format" id="j-doc-option__label--format--nojs">
        Format:
      </div>
      <ul class="j-doc-option__format-list" aria-labelledby="j-doc-option__label--format--nojs">
                  <li class="j-doc-mode-no-js__link j-doc-mode-no-js__link--multi-page"><a href="/documentation/en-us/red_hat_enterprise_linux/9/html/deploying_mail_servers">Multi-page</a></li>
                  <li class="j-doc-mode-no-js__link j-doc-mode-no-js__link--single-page"><a href="/documentation/en-us/red_hat_enterprise_linux/9/html-single/deploying_mail_servers">Single-page</a></li>
                  <li class="j-doc-mode-no-js__link j-doc-mode-no-js__link--pdf"><a href="/documentation/en-us/red_hat_enterprise_linux/9/pdf/deploying_mail_servers/Red_Hat_Enterprise_Linux-9-Deploying_mail_servers-en-US.pdf">PDF</a></li>
              </ul>
    </noscript>
  </li>
</ul>


                </div>
              </div>
          </div>
        </div>

                  <div class="doc-wrapper pvof-doc__wrapper j-superdoc__content-wrapper" id="doc-wrapper">
            

  <div class="pane-page-title">
    <h1 class="title" itemprop="name">Deploying mail servers</h1>
  </div>


  <div xml:lang="en-US" class="book" id="idm140563155386464"><div class="titlepage"><div><div class="producttitle"><span class="productname">Red&nbsp;Hat Enterprise&nbsp;Linux</span> <span class="productnumber">9</span></div><div><h2 class="subtitle">Configuring and maintaining mail server services</h2></div><div><div xml:lang="en-US" class="authorgroup"><span class="orgname">Red&nbsp;Hat</span> <span class="orgdiv">Customer Content Services</span></div></div><div><a href="#idm140563160147008">Legal Notice</a></div><div><div class="abstract"><p class="title"><strong>Abstract</strong></p><div class="para">
				On Red&nbsp;Hat Enterprise&nbsp;Linux, you can provide reliable and 
secure mail services for your customers and internal users by using the 
mail transport agent Postfix as SMTP service and the mail delivery agent
 Dovecot as IMAP and POP3 services. Both services integrate with each 
other and they support central backends, such as LDAP directories to 
store account data and to authenticate users.
			</div></div></div></div><hr></div><section class="preface" id="making-open-source-more-inclusive"><div class="titlepage"><div><div><h1 class="title">Making open source more inclusive</h1></div></div></div><p class="_abstract _abstract">
			Red Hat is committed to replacing problematic language in our code, 
documentation, and web properties. We are beginning with these four 
terms: master, slave, blacklist, and whitelist. Because of the enormity 
of this endeavor, these changes will be implemented gradually over 
several upcoming releases. For more details, see <a class="link" href="https://www.redhat.com/en/blog/making-open-source-more-inclusive-eradicating-problematic-language">our CTO Chris Wright’s message</a>.
		</p></section><section class="preface" id="proc_providing-feedback-on-red-hat-documentation_deploying-mail-servers"><div class="titlepage"><div><div><h1 class="title">Providing feedback on Red Hat documentation</h1></div></div></div><p class="_abstract _abstract">
			We appreciate your feedback on our documentation. Let us know how we can improve it.
		</p><div class="orderedlist"><p class="title"><strong>Submitting comments on specific passages</strong></p><ol class="orderedlist" type="1"><li class="listitem">
					View the documentation in the <span class="strong strong"><strong>Multi-page HTML</strong></span> format and ensure that you see the <span class="strong strong"><strong>Feedback</strong></span> button in the upper right corner after the page fully loads.
				</li><li class="listitem">
					Use your cursor to highlight the part of the text that you want to comment on.
				</li><li class="listitem">
					Click the <span class="strong strong"><strong>Add Feedback</strong></span> button that appears near the highlighted text.
				</li><li class="listitem">
					Add your feedback and click <span class="strong strong"><strong>Submit</strong></span>.
				</li></ol></div><div class="orderedlist"><p class="title"><strong>Submitting feedback through Bugzilla (account required)</strong></p><ol class="orderedlist" type="1"><li class="listitem">
					Log in to the <a class="link" href="https://bugzilla.redhat.com/enter_bug.cgi?product=Red%20Hat%20Enterprise%20Linux%209&amp;component=Documentation">Bugzilla</a> website.
				</li><li class="listitem">
					Select the correct version from the <span class="strong strong"><strong>Version</strong></span> menu.
				</li><li class="listitem">
					Enter a descriptive title in the <span class="strong strong"><strong>Summary</strong></span> field.
				</li><li class="listitem">
					Enter your suggestion for improvement in the <span class="strong strong"><strong>Description</strong></span> field. Include links to the relevant parts of the documentation.
				</li><li class="listitem">
					Click <span class="strong strong"><strong>Submit Bug</strong></span>.
				</li></ol></div></section><section class="chapter" id="configuring-and-maintaining-a-dovecot-imap-and-pop3-server_deploying-mail-servers"><div class="titlepage"><div><div><h1 class="title">Chapter 1. Configuring and maintaining a Dovecot IMAP and POP3 server</h1></div></div></div><p>
			Dovecot is a high-performance mail delivery agent (MDA) with a focus 
on security. You can use IMAP or POP3-compatible email clients to 
connect to a Dovecot server and read or download emails.
		</p><p>
			Key features of Dovecot:
		</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
					The design and implementation focuses on security
				</li><li class="listitem">
					Two-way replication support for high availability to improve the performance in large environments
				</li><li class="listitem">
					Supports the high-performance <code class="literal">dbox</code> mailbox format, but also <code class="literal">mbox</code> and <code class="literal">Maildir</code> for compatibility reasons
				</li><li class="listitem">
					Self-healing features, such as fixing broken index files
				</li><li class="listitem">
					Compliance with the IMAP standards
				</li><li class="listitem">
					Workaround support to bypass bugs in IMAP and POP3 clients
				</li></ul></div><section class="section" id="setting-up-a-dovecot-server-with-pam-authentication_configuring-and-maintaining-a-dovecot-imap-and-pop3-server"><div class="titlepage"><div><div><h2 class="title">1.1. Setting up a Dovecot server with PAM authentication</h2></div></div></div><p>
				Dovecot supports the Name Service Switch (NSS) interface as a user 
database and the Pluggable Authentication Modules (PAM) framework as an 
authentication backend. With this configuration, Dovecot can provide 
services to users who are available locally on the server through NSS.
			</p><p>
				Use PAM authentication if accounts:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						Are defined locally in the <code class="literal">/etc/passwd</code> file
					</li><li class="listitem">
						Are stored in a remote database but they are available locally 
through the System Security Services Daemon (SSSD) or other NSS plugins.
					</li></ul></div><section class="section" id="installing-dovecot_setting-up-a-dovecot-server-with-pam-authentication"><div class="titlepage"><div><div><h3 class="title">1.1.1. Installing Dovecot</h3></div></div></div><p>
					The <code class="literal">dovecot</code> package provides:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							The <code class="literal">dovecot</code> service and the utilities to maintain it
						</li><li class="listitem">
							Services that Dovecot starts on demand, such as for authentication
						</li><li class="listitem">
							Plugins, such as server-side mail filtering
						</li><li class="listitem">
							Configuration files in the <code class="literal">/etc/dovecot/</code> directory
						</li><li class="listitem">
							Documentation in the <code class="literal">/usr/share/doc/dovecot/</code> directory
						</li></ul></div><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							Install the <code class="literal">dovecot</code> package:
						</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--s8krkhk"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="literallayout white-space-pre language-none codeblock codeblock--processed"># <span class="strong strong"><strong>dnf install dovecot</strong></span></pre></div></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
								If Dovecot is already installed and you require clean configuration files, rename or remove the <code class="literal">/etc/dovecot/</code> directory. Afterwards, reinstall the package. Without removing the configuration files, the <code class="literal">dnf reinstall dovecot</code> command does not reset the configuration files in <code class="literal">/etc/dovecot/</code>.
							</p></div></div></li></ul></div><div class="itemizedlist"><p class="title"><strong>Next step</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							<a class="link" href="#configuring-tls-encryption-on-a-dovecot-server_setting-up-a-dovecot-server-with-pam-authentication" title="1.1.2.&nbsp;Configuring TLS encryption on a Dovecot server">Configuring TLS encryption on a Dovecot server</a>.
						</li></ul></div></section><section class="section" id="configuring-tls-encryption-on-a-dovecot-server_setting-up-a-dovecot-server-with-pam-authentication"><div class="titlepage"><div><div><h3 class="title">1.1.2. Configuring TLS encryption on a Dovecot server</h3></div></div></div><p>
					Dovecot provides a secure default configuration. For example, TLS 
is enabled by default to transmit credentials and data encrypted over 
networks. To configure TLS on a Dovecot server, you only need to set the
 paths to the certificate and private key files. Additionally, you can 
increase the security of TLS connections by generating and using 
Diffie-Hellman parameters to provide perfect forward secrecy (PFS).
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							Dovecot is installed.
						</li><li class="listitem"><p class="simpara">
							The following files have been copied to the listed locations on the server:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
									The server certificate: <code class="literal">/etc/pki/dovecot/certs/server.example.com.crt</code>
								</li><li class="listitem">
									The private key: <code class="literal">/etc/pki/dovecot/private/server.example.com.key</code>
								</li><li class="listitem">
									The Certificate Authority (CA) certificate: <code class="literal">/etc/pki/dovecot/certs/ca.crt</code>
								</li></ul></div></li><li class="listitem">
							The hostname in the <code class="literal">Subject DN</code> field of the server certificate matches the server’s Fully-qualified Domain Name (FQDN).
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Set secure permissions on the private key file:
						</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--iqnp09o"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="literallayout white-space-pre language-none codeblock codeblock--processed"># <span class="strong strong"><strong>chown root:root /etc/pki/dovecot/private/server.example.com.key</strong></span>
# <span class="strong strong"><strong>chmod 600 /etc/pki/dovecot/private/server.example.com.key</strong></span></pre></div></div></li><li class="listitem"><p class="simpara">
							Generate a file with Diffie-Hellman parameters:
						</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--x96ems0"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="literallayout white-space-pre language-none codeblock codeblock--processed"># <span class="strong strong"><strong>openssl dhparam -out <span class="emphasis"><em>/etc/dovecot/dh.pem</em></span> <span class="emphasis"><em>4096</em></span></strong></span></pre></div></div><p class="simpara">
							Depending on the hardware and entropy on the server, generating 
Diffie-Hellman parameters with 4096 bits can take several minutes.
						</p></li><li class="listitem"><p class="simpara">
							Set the paths to the certificate and private key files in the <code class="literal">/etc/dovecot/conf.d/10-ssl.conf</code> file:
						</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
									Update the <code class="literal">ssl_cert</code> and <code class="literal">ssl_key</code> parameters, and set them to use the paths of the server’s certificate and private key:
								</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--nmdundb"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="literallayout white-space-pre language-none codeblock codeblock--processed"><span class="strong strong"><strong>ssl_cert = &lt;<span class="emphasis"><em>/etc/pki/dovecot/certs/server.example.com.crt</em></span></strong></span>
<span class="strong strong"><strong>ssl_key = &lt;<span class="emphasis"><em>/etc/pki/dovecot/private/server.example.com.key</em></span></strong></span></pre></div></div></li><li class="listitem"><p class="simpara">
									Uncomment the <code class="literal">ssl_ca</code> parameter, and set it to use the path to the CA certificate:
								</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--24eqosj"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="literallayout white-space-pre language-none codeblock codeblock--processed"><span class="strong strong"><strong>ssl_ca = &lt;<span class="emphasis"><em>/etc/pki/dovecot/certs/ca.crt</em></span></strong></span></pre></div></div></li><li class="listitem"><p class="simpara">
									Uncomment the <code class="literal">ssl_dh</code> parameter, and set it to use the path to the Diffie-Hellman parameters file:
								</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--bgosped"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="literallayout white-space-pre language-none codeblock codeblock--processed"><span class="strong strong"><strong>ssl_dh = &lt;<span class="emphasis"><em>/etc/dovecot/dh.pem</em></span></strong></span></pre></div></div></li></ol></div><div class="admonition important"><div class="admonition_header">Important</div><div><p>
								To ensure that Dovecot reads the value of a parameter from a file, the path must start with a leading <code class="literal">&lt;</code> character.
							</p></div></div></li></ol></div><div class="itemizedlist"><p class="title"><strong>Next step</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							<a class="link" href="#preparing-dovecot-to-use-virtual-users_setting-up-a-dovecot-server-with-pam-authentication" title="1.1.3.&nbsp;Preparing Dovecot to use virtual users">Preparing Dovecot to use virtual users</a>
						</li></ul></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
							<code class="literal">/usr/share/doc/dovecot/wiki/SSL.DovecotConfiguration.txt</code>
						</li></ul></div></section><section class="section" id="preparing-dovecot-to-use-virtual-users_setting-up-a-dovecot-server-with-pam-authentication"><div class="titlepage"><div><div><h3 class="title">1.1.3. Preparing Dovecot to use virtual users</h3></div></div></div><p>
					By default, Dovecot performs many actions on the file system as the
 user who uses the service. However, configuring the Dovecot back end to
 use one local user to perform these actions has several benefits:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							Dovecot performs file system actions as a specific local user instead of using the user’s ID (UID).
						</li><li class="listitem">
							Users do not need to be available locally on the server.
						</li><li class="listitem">
							You can store all mailboxes and user-specific files in one root directory.
						</li><li class="listitem">
							Users do not require a UID and group ID (GID), which reduces administration efforts.
						</li><li class="listitem">
							Users who have access to the file system on the server cannot 
compromise their mailboxes or indexes because they cannot access these 
files.
						</li><li class="listitem">
							Setting up replication is easier.
						</li></ul></div><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							Dovecot is installed.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Create the <code class="literal">vmail</code> user:
						</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--v633p7a"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="literallayout white-space-pre language-none codeblock codeblock--processed"># <span class="strong strong"><strong>useradd --home-dir <span class="emphasis"><em>/var/mail/</em></span> --shell /usr/sbin/nologin <span class="emphasis"><em>vmail</em></span></strong></span></pre></div></div><p class="simpara">
							Dovecot will later use this user to manage the mailboxes. For security reasons, do not use the <code class="literal">dovecot</code> or <code class="literal">dovenull</code> system users for this purpose.
						</p></li><li class="listitem"><p class="simpara">
							If you use a different path than <code class="literal">/var/mail/</code>, set the <code class="literal">mail_spool_t</code> SELinux context on it, for example:
						</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--dxrim79"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="literallayout white-space-pre language-none codeblock codeblock--processed"># <span class="strong strong"><strong>semanage fcontext -a -t mail_spool_t "<span class="emphasis"><em>&lt;path&gt;</em></span>(/.*)?"</strong></span>
# <span class="strong strong"><strong>restorecon -Rv <span class="emphasis"><em>&lt;path&gt;</em></span></strong></span></pre></div></div></li><li class="listitem"><p class="simpara">
							Grant write permissions on <code class="literal">/var/mail/</code> only to the <code class="literal">vmail</code> user:
						</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--ebmpny9"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="literallayout white-space-pre language-none codeblock codeblock--processed"># <span class="strong strong"><strong>chown vmail:vmail <span class="emphasis"><em>/var/mail/</em></span></strong></span>
# <span class="strong strong"><strong>chmod 700 <span class="emphasis"><em>/var/mail/</em></span></strong></span></pre></div></div></li><li class="listitem"><p class="simpara">
							Uncomment the <code class="literal">mail_location</code> parameter in the <code class="literal">/etc/dovecot/conf.d/10-mail.conf</code> file, and set it to the mailbox format and location:
						</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--4k4pfam"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="literallayout white-space-pre language-none codeblock codeblock--processed"><span class="strong strong"><strong>mail_location = <span class="emphasis"><em>sdbox</em></span>:<span class="emphasis"><em>/var/mail/%n/</em></span></strong></span></pre></div></div><p class="simpara">
							With this setting:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									Dovecot uses the high-performant <code class="literal">dbox</code> mailbox format in <code class="literal">single</code> mode. In this mode, the service stores each mail in a separate file, similar to the <code class="literal">maildir</code> format.
								</li><li class="listitem">
									Dovecot resolves the <code class="literal">%n</code> variable in the path to the username. This is required to ensure that each user has a separate directory for its mailbox.
								</li></ul></div></li></ol></div><div class="itemizedlist"><p class="title"><strong>Next step</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							<a class="link" href="#using-pam-as-the-dovecot-authentication-backend_setting-up-a-dovecot-server-with-pam-authentication" title="1.1.4.&nbsp;Using PAM as the Dovecot authentication backend">Using PAM as the Dovecot authentication backend</a>.
						</li></ul></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
							<code class="literal">/usr/share/doc/dovecot/wiki/VirtualUsers.txt</code>
						</li><li class="listitem">
							<code class="literal">/usr/share/doc/dovecot/wiki/MailLocation.txt</code>
						</li><li class="listitem">
							<code class="literal">/usr/share/doc/dovecot/wiki/MailboxFormat.dbox.txt</code>
						</li><li class="listitem">
							<code class="literal">/usr/share/doc/dovecot/wiki/Variables.txt</code>
						</li></ul></div></section><section class="section" id="using-pam-as-the-dovecot-authentication-backend_setting-up-a-dovecot-server-with-pam-authentication"><div class="titlepage"><div><div><h3 class="title">1.1.4. Using PAM as the Dovecot authentication backend</h3></div></div></div><p>
					By default, Dovecot uses the Name Service Switch (NSS) interface as
 the user database and the Pluggable Authentication Modules (PAM) 
framework as the authentication backend.
				</p><p>
					Customize the settings to adapt Dovecot to your environment and to 
simplify administration by using the virtual users feature.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							Dovecot is installed.
						</li><li class="listitem">
							The virtual users feature is configured.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Update the <code class="literal">first_valid_uid</code> parameter in the <code class="literal">/etc/dovecot/conf.d/10-mail.conf</code> file to define the lowest user ID (UID) that can authenticate to Dovecot:
						</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--aizezot"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="literallayout white-space-pre language-none codeblock codeblock--processed">first_valid_uid = <span class="strong strong"><strong><span class="emphasis"><em>1000</em></span></strong></span></pre></div></div><p class="simpara">
							By default, users with a UID greater than or equal to <code class="literal">1000</code> can authenticate. If required, you can also set the <code class="literal">last_valid_uid</code> parameter to define the highest UID that Dovecot allows to log in.
						</p></li><li class="listitem"><p class="simpara">
							In the <code class="literal">/etc/dovecot/conf.d/auth-system.conf.ext</code> file, add the <code class="literal">override_fields</code> parameter to the <code class="literal">userdb</code> section as follows:
						</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--ypxsehe"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="literallayout white-space-pre language-none codeblock codeblock--processed">userdb {
  driver = passwd
  <span class="strong strong"><strong>override_fields = uid=<span class="emphasis"><em>vmail</em></span> gid=<span class="emphasis"><em>vmail</em></span> home=<span class="emphasis"><em>/var/mail/%n/</em></span></strong></span>
}</pre></div></div><p class="simpara">
							Due to the fixed values, Dovecot does not query these settings from the <code class="literal">/etc/passwd</code> file. As a result, the home directory defined in <code class="literal">/etc/passwd</code> does not need to exist.
						</p></li></ol></div><div class="itemizedlist"><p class="title"><strong>Next step</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							<a class="link" href="#completing-the-dovecot-configuration_setting-up-a-dovecot-server-with-pam-authentication" title="1.1.5.&nbsp;Completing the Dovecot configuration">Complete the Dovecot configuration</a>.
						</li></ul></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
							<code class="literal">/usr/share/doc/dovecot/wiki/PasswordDatabase.PAM.txt</code>
						</li><li class="listitem">
							<code class="literal">/usr/share/doc/dovecot/wiki/VirtualUsers.Home.txt</code>
						</li></ul></div></section><section class="section" id="completing-the-dovecot-configuration_setting-up-a-dovecot-server-with-pam-authentication"><div class="titlepage"><div><div><h3 class="title">1.1.5. Completing the Dovecot configuration</h3></div></div></div><p>
					Once you have installed and configured Dovecot, open the required ports in the <code class="literal">firewalld</code> service, and enable and start the service. Afterwards, you can test the server.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							The following has been configured in Dovecot:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
									TLS encryption
								</li><li class="listitem">
									An authentication backend
								</li></ul></div></li><li class="listitem">
							Clients trust the Certificate Authority (CA) certificate.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							If you want to provide only an IMAP or POP3 service to users, uncomment the <code class="literal">protocols</code> parameter in the <code class="literal">/etc/dovecot/dovecot.conf</code> file, and set it to the required protocols. For example, if you do not require POP3, set:
						</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--0gthkpo"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="literallayout white-space-pre language-none codeblock codeblock--processed"><span class="strong strong"><strong>protocols = imap lmtp</strong></span></pre></div></div><p class="simpara">
							By default, the <code class="literal">imap</code>, <code class="literal">pop3</code>, and <code class="literal">lmtp</code> protocols are enabled.
						</p></li><li class="listitem"><p class="simpara">
							Open the ports in the local firewall. For example, to open the 
ports for the IMAPS, IMAP, POP3S, and POP3 protocols, enter:
						</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--ichxuq3"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="literallayout white-space-pre language-none codeblock codeblock--processed"># <span class="strong strong"><strong>firewall-cmd --permanent --add-service=imaps --add-service=imap --add-service=pop3s --add-service=pop3</strong></span>
# <span class="strong strong"><strong>firewall-cmd --reload</strong></span></pre></div></div></li><li class="listitem"><p class="simpara">
							Enable and start the <code class="literal">dovecot</code> service:
						</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--h0d8g1c"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="literallayout white-space-pre language-none codeblock codeblock--processed"># <span class="strong strong"><strong>systemctl enable --now dovecot</strong></span></pre></div></div></li></ol></div><div class="orderedlist"><p class="title"><strong>Verification</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Use a mail client, such as Mozilla Thunderbird, to connect to 
Dovecot and read emails. The settings for the mail client depend on the 
protocol you want to use:
						</p><div class="table" id="idm140563155214368"><p class="title">Table 1.1. Connection settings to the Dovecot server</p><rh-table class="table-contents rh-table--processed" pfelement="" type="content" data-id="1u8hzkr" id="rh-table--1u8hzkr" style="--rh-table--scrollbar--width: 0px;"><table class="gt-4-cols lt-7-rows"><colgroup><col style="width: 17%; " class="col_1"><!--Empty--><col style="width: 17%; " class="col_2"><!--Empty--><col style="width: 33%; " class="col_3"><!--Empty--><col style="width: 33%; " class="col_4"><!--Empty--></colgroup><thead><tr><th id="idm140563150619024" scope="col" data-row="1" data-col="1" class="content--sm" valign="top" align="left">Protocol</th><th id="idm140563150617936" scope="col" data-row="1" data-col="2" class="content--sm" valign="top" align="left">Port</th><th id="idm140563150616848" scope="col" data-row="1" data-col="3" class="content--sm" valign="top" align="left">Connection security</th><th id="idm140563150615760" scope="col" data-row="1" data-col="4" class="content--sm" valign="top" align="left">Authentication method</th></tr></thead><tbody><tr><td headers="idm140563150619024" data-row="2" data-col="1" class="content--md" valign="top" align="left"> <p>
											IMAP
										</p>
										 </td><td headers="idm140563150617936" data-row="2" data-col="2" class="content--md" valign="top" align="left"> <p>
											143
										</p>
										 </td><td headers="idm140563150616848" data-row="2" data-col="3" class="content--md" valign="top" align="left"> <p>
											STARTTLS
										</p>
										 </td><td headers="idm140563150615760" data-row="2" data-col="4" class="content--md" valign="top" align="left"> <p>
											PLAIN<a href="#ftn.fn-dovecot-con-settings-normal-pw_setting-up-a-dovecot-server-with-pam-authentication" class="footnote"><sup class="footnote" id="fn-dovecot-con-settings-normal-pw_setting-up-a-dovecot-server-with-pam-authentication">[a]</sup></a>
										</p>
										 </td></tr><tr><td headers="idm140563150619024" data-row="3" data-col="1" class="content--md" valign="top" align="left"> <p>
											IMAPS
										</p>
										 </td><td headers="idm140563150617936" data-row="3" data-col="2" class="content--md" valign="top" align="left"> <p>
											993
										</p>
										 </td><td headers="idm140563150616848" data-row="3" data-col="3" class="content--md" valign="top" align="left"> <p>
											SSL/TLS
										</p>
										 </td><td headers="idm140563150615760" data-row="3" data-col="4" class="content--md" valign="top" align="left"> <p>
											PLAIN<a href="#ftn.fn-dovecot-con-settings-normal-pw_setting-up-a-dovecot-server-with-pam-authentication" class="footnoteref"><sup class="footnoteref">[a]</sup></a>
										</p>
										 </td></tr><tr><td headers="idm140563150619024" data-row="4" data-col="1" class="content--md" valign="top" align="left"> <p>
											POP3
										</p>
										 </td><td headers="idm140563150617936" data-row="4" data-col="2" class="content--md" valign="top" align="left"> <p>
											110
										</p>
										 </td><td headers="idm140563150616848" data-row="4" data-col="3" class="content--md" valign="top" align="left"> <p>
											STARTTLS
										</p>
										 </td><td headers="idm140563150615760" data-row="4" data-col="4" class="content--md" valign="top" align="left"> <p>
											PLAIN<a href="#ftn.fn-dovecot-con-settings-normal-pw_setting-up-a-dovecot-server-with-pam-authentication" class="footnoteref"><sup class="footnoteref">[a]</sup></a>
										</p>
										 </td></tr><tr><td headers="idm140563150619024" data-row="5" data-col="1" class="content--md" valign="top" align="left"> <p>
											POP3S
										</p>
										 </td><td headers="idm140563150617936" data-row="5" data-col="2" class="content--md" valign="top" align="left"> <p>
											995
										</p>
										 </td><td headers="idm140563150616848" data-row="5" data-col="3" class="content--md" valign="top" align="left"> <p>
											SSL/TLS
										</p>
										 </td><td headers="idm140563150615760" data-row="5" data-col="4" class="content--md" valign="top" align="left"> <p>
											PLAIN<a href="#ftn.fn-dovecot-con-settings-normal-pw_setting-up-a-dovecot-server-with-pam-authentication" class="footnoteref"><sup class="footnoteref">[a]</sup></a>
										</p>
										 </td></tr></tbody><tbody class="footnotes"><tr><td colspan="4" data-row="6" data-col="1" class="content--lg"><div id="ftn.fn-dovecot-con-settings-normal-pw_setting-up-a-dovecot-server-with-pam-authentication" class="footnote"><div class="para"><a href="#fn-dovecot-con-settings-normal-pw_setting-up-a-dovecot-server-with-pam-authentication" class="simpara"><sup class="simpara">[a] </sup></a>
												The client transmits data encrypted through the TLS connection. Consequently, credentials are not disclosed.
											</div></div></td></tr></tbody></table></rh-table></div><p class="simpara">
							Note that this table does not list settings for unencrypted 
connections because, by default, Dovecot does not accept plain text 
authentication on connections without TLS.
						</p></li><li class="listitem"><p class="simpara">
							Display configuration settings with non-default values:
						</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--at26nx1"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="literallayout white-space-pre language-none codeblock codeblock--processed"># <span class="strong strong"><strong>doveconf -n</strong></span></pre></div></div></li></ol></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
							<code class="literal">firewall-cmd(1)</code> man page
						</li></ul></div></section></section><section class="section" id="setting-up-a-dovecot-server-with-ldap-authentication_configuring-and-maintaining-a-dovecot-imap-and-pop3-server"><div class="titlepage"><div><div><h2 class="title">1.2. Setting up a Dovecot server with LDAP authentication</h2></div></div></div><p>
				If your infrastructure uses an LDAP server to store accounts, you 
can authenticate Dovecot users against it. In this case, you manage 
accounts centrally in the directory and, users do not required local 
access to the file system on the Dovecot server.
			</p><p>
				Centrally-managed accounts are also a benefit if you plan to set up 
multiple Dovecot servers with replication to make your mailboxes high 
available.
			</p><section class="section" id="installing-dovecot_setting-up-a-dovecot-server-with-ldap-authentication"><div class="titlepage"><div><div><h3 class="title">1.2.1. Installing Dovecot</h3></div></div></div><p>
					The <code class="literal">dovecot</code> package provides:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							The <code class="literal">dovecot</code> service and the utilities to maintain it
						</li><li class="listitem">
							Services that Dovecot starts on demand, such as for authentication
						</li><li class="listitem">
							Plugins, such as server-side mail filtering
						</li><li class="listitem">
							Configuration files in the <code class="literal">/etc/dovecot/</code> directory
						</li><li class="listitem">
							Documentation in the <code class="literal">/usr/share/doc/dovecot/</code> directory
						</li></ul></div><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							Install the <code class="literal">dovecot</code> package:
						</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--vdr6bhg"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="literallayout white-space-pre language-none codeblock codeblock--processed"># <span class="strong strong"><strong>dnf install dovecot</strong></span></pre></div></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
								If Dovecot is already installed and you require clean configuration files, rename or remove the <code class="literal">/etc/dovecot/</code> directory. Afterwards, reinstall the package. Without removing the configuration files, the <code class="literal">dnf reinstall dovecot</code> command does not reset the configuration files in <code class="literal">/etc/dovecot/</code>.
							</p></div></div></li></ul></div><div class="itemizedlist"><p class="title"><strong>Next step</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							<a class="link" href="#configuring-tls-encryption-on-a-dovecot-server_setting-up-a-dovecot-server-with-ldap-authentication" title="1.2.2.&nbsp;Configuring TLS encryption on a Dovecot server">Configuring TLS encryption on a Dovecot server</a>.
						</li></ul></div></section><section class="section" id="configuring-tls-encryption-on-a-dovecot-server_setting-up-a-dovecot-server-with-ldap-authentication"><div class="titlepage"><div><div><h3 class="title">1.2.2. Configuring TLS encryption on a Dovecot server</h3></div></div></div><p>
					Dovecot provides a secure default configuration. For example, TLS 
is enabled by default to transmit credentials and data encrypted over 
networks. To configure TLS on a Dovecot server, you only need to set the
 paths to the certificate and private key files. Additionally, you can 
increase the security of TLS connections by generating and using 
Diffie-Hellman parameters to provide perfect forward secrecy (PFS).
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							Dovecot is installed.
						</li><li class="listitem"><p class="simpara">
							The following files have been copied to the listed locations on the server:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
									The server certificate: <code class="literal">/etc/pki/dovecot/certs/server.example.com.crt</code>
								</li><li class="listitem">
									The private key: <code class="literal">/etc/pki/dovecot/private/server.example.com.key</code>
								</li><li class="listitem">
									The Certificate Authority (CA) certificate: <code class="literal">/etc/pki/dovecot/certs/ca.crt</code>
								</li></ul></div></li><li class="listitem">
							The hostname in the <code class="literal">Subject DN</code> field of the server certificate matches the server’s Fully-qualified Domain Name (FQDN).
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Set secure permissions on the private key file:
						</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--x2nyody"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="literallayout white-space-pre language-none codeblock codeblock--processed"># <span class="strong strong"><strong>chown root:root /etc/pki/dovecot/private/server.example.com.key</strong></span>
# <span class="strong strong"><strong>chmod 600 /etc/pki/dovecot/private/server.example.com.key</strong></span></pre></div></div></li><li class="listitem"><p class="simpara">
							Generate a file with Diffie-Hellman parameters:
						</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--xbbfnkx"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="literallayout white-space-pre language-none codeblock codeblock--processed"># <span class="strong strong"><strong>openssl dhparam -out <span class="emphasis"><em>/etc/dovecot/dh.pem</em></span> <span class="emphasis"><em>4096</em></span></strong></span></pre></div></div><p class="simpara">
							Depending on the hardware and entropy on the server, generating 
Diffie-Hellman parameters with 4096 bits can take several minutes.
						</p></li><li class="listitem"><p class="simpara">
							Set the paths to the certificate and private key files in the <code class="literal">/etc/dovecot/conf.d/10-ssl.conf</code> file:
						</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
									Update the <code class="literal">ssl_cert</code> and <code class="literal">ssl_key</code> parameters, and set them to use the paths of the server’s certificate and private key:
								</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--kfa40sl"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="literallayout white-space-pre language-none codeblock codeblock--processed"><span class="strong strong"><strong>ssl_cert = &lt;<span class="emphasis"><em>/etc/pki/dovecot/certs/server.example.com.crt</em></span></strong></span>
<span class="strong strong"><strong>ssl_key = &lt;<span class="emphasis"><em>/etc/pki/dovecot/private/server.example.com.key</em></span></strong></span></pre></div></div></li><li class="listitem"><p class="simpara">
									Uncomment the <code class="literal">ssl_ca</code> parameter, and set it to use the path to the CA certificate:
								</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--vss0wuw"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="literallayout white-space-pre language-none codeblock codeblock--processed"><span class="strong strong"><strong>ssl_ca = &lt;<span class="emphasis"><em>/etc/pki/dovecot/certs/ca.crt</em></span></strong></span></pre></div></div></li><li class="listitem"><p class="simpara">
									Uncomment the <code class="literal">ssl_dh</code> parameter, and set it to use the path to the Diffie-Hellman parameters file:
								</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--7b0aoxk"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="literallayout white-space-pre language-none codeblock codeblock--processed"><span class="strong strong"><strong>ssl_dh = &lt;<span class="emphasis"><em>/etc/dovecot/dh.pem</em></span></strong></span></pre></div></div></li></ol></div><div class="admonition important"><div class="admonition_header">Important</div><div><p>
								To ensure that Dovecot reads the value of a parameter from a file, the path must start with a leading <code class="literal">&lt;</code> character.
							</p></div></div></li></ol></div><div class="itemizedlist"><p class="title"><strong>Next step</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							<a class="link" href="#preparing-dovecot-to-use-virtual-users_setting-up-a-dovecot-server-with-ldap-authentication" title="1.2.3.&nbsp;Preparing Dovecot to use virtual users">Preparing Dovecot to use virtual users</a>
						</li></ul></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
							<code class="literal">/usr/share/doc/dovecot/wiki/SSL.DovecotConfiguration.txt</code>
						</li></ul></div></section><section class="section" id="preparing-dovecot-to-use-virtual-users_setting-up-a-dovecot-server-with-ldap-authentication"><div class="titlepage"><div><div><h3 class="title">1.2.3. Preparing Dovecot to use virtual users</h3></div></div></div><p>
					By default, Dovecot performs many actions on the file system as the
 user who uses the service. However, configuring the Dovecot back end to
 use one local user to perform these actions has several benefits:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							Dovecot performs file system actions as a specific local user instead of using the user’s ID (UID).
						</li><li class="listitem">
							Users do not need to be available locally on the server.
						</li><li class="listitem">
							You can store all mailboxes and user-specific files in one root directory.
						</li><li class="listitem">
							Users do not require a UID and group ID (GID), which reduces administration efforts.
						</li><li class="listitem">
							Users who have access to the file system on the server cannot 
compromise their mailboxes or indexes because they cannot access these 
files.
						</li><li class="listitem">
							Setting up replication is easier.
						</li></ul></div><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							Dovecot is installed.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Create the <code class="literal">vmail</code> user:
						</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--f133ozs"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="literallayout white-space-pre language-none codeblock codeblock--processed"># <span class="strong strong"><strong>useradd --home-dir <span class="emphasis"><em>/var/mail/</em></span> --shell /usr/sbin/nologin <span class="emphasis"><em>vmail</em></span></strong></span></pre></div></div><p class="simpara">
							Dovecot will later use this user to manage the mailboxes. For security reasons, do not use the <code class="literal">dovecot</code> or <code class="literal">dovenull</code> system users for this purpose.
						</p></li><li class="listitem"><p class="simpara">
							If you use a different path than <code class="literal">/var/mail/</code>, set the <code class="literal">mail_spool_t</code> SELinux context on it, for example:
						</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--1fn4nke"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="literallayout white-space-pre language-none codeblock codeblock--processed"># <span class="strong strong"><strong>semanage fcontext -a -t mail_spool_t "<span class="emphasis"><em>&lt;path&gt;</em></span>(/.*)?"</strong></span>
# <span class="strong strong"><strong>restorecon -Rv <span class="emphasis"><em>&lt;path&gt;</em></span></strong></span></pre></div></div></li><li class="listitem"><p class="simpara">
							Grant write permissions on <code class="literal">/var/mail/</code> only to the <code class="literal">vmail</code> user:
						</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--pe602m3"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="literallayout white-space-pre language-none codeblock codeblock--processed"># <span class="strong strong"><strong>chown vmail:vmail <span class="emphasis"><em>/var/mail/</em></span></strong></span>
# <span class="strong strong"><strong>chmod 700 <span class="emphasis"><em>/var/mail/</em></span></strong></span></pre></div></div></li><li class="listitem"><p class="simpara">
							Uncomment the <code class="literal">mail_location</code> parameter in the <code class="literal">/etc/dovecot/conf.d/10-mail.conf</code> file, and set it to the mailbox format and location:
						</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--eo1ytxy"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="literallayout white-space-pre language-none codeblock codeblock--processed"><span class="strong strong"><strong>mail_location = <span class="emphasis"><em>sdbox</em></span>:<span class="emphasis"><em>/var/mail/%n/</em></span></strong></span></pre></div></div><p class="simpara">
							With this setting:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									Dovecot uses the high-performant <code class="literal">dbox</code> mailbox format in <code class="literal">single</code> mode. In this mode, the service stores each mail in a separate file, similar to the <code class="literal">maildir</code> format.
								</li><li class="listitem">
									Dovecot resolves the <code class="literal">%n</code> variable in the path to the username. This is required to ensure that each user has a separate directory for its mailbox.
								</li></ul></div></li></ol></div><div class="itemizedlist"><p class="title"><strong>Next step</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							<a class="link" href="#using-ldap-as-the-dovecot-authentication-backend_setting-up-a-dovecot-server-with-ldap-authentication" title="1.2.4.&nbsp;Using LDAP as the Dovecot authentication backend">Using LDAP as the Dovecot authentication backend</a>.
						</li></ul></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
							<code class="literal">/usr/share/doc/dovecot/wiki/VirtualUsers.txt</code>
						</li><li class="listitem">
							<code class="literal">/usr/share/doc/dovecot/wiki/MailLocation.txt</code>
						</li><li class="listitem">
							<code class="literal">/usr/share/doc/dovecot/wiki/MailboxFormat.dbox.txt</code>
						</li><li class="listitem">
							<code class="literal">/usr/share/doc/dovecot/wiki/Variables.txt</code>
						</li></ul></div></section><section class="section" id="using-ldap-as-the-dovecot-authentication-backend_setting-up-a-dovecot-server-with-ldap-authentication"><div class="titlepage"><div><div><h3 class="title">1.2.4. Using LDAP as the Dovecot authentication backend</h3></div></div></div><p>
					Users in an LDAP directory can usually authenticate themselves to 
the directory service. Dovecot can use this to authenticate users when 
they log in to the IMAP and POP3 services. This authentication method 
has a number of benefits, such as:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							Administrators can manage users centrally in the directory.
						</li><li class="listitem">
							The LDAP accounts do not require any special attributes. They 
only need to be able to authenticate to the LDAP server. Consequently, 
this method is independent from the password storage scheme used on the 
LDAP server.
						</li><li class="listitem">
							Users do not need to be available locally on the server through 
the Name Service Switch (NSS) interface and the Pluggable Authentication
 Modules (PAM) framework.
						</li></ul></div><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							Dovecot is installed.
						</li><li class="listitem">
							The virtual users feature is configured.
						</li><li class="listitem">
							Connections to the LDAP server support TLS encryption.
						</li><li class="listitem">
							RHEL on the Dovecot server trusts the Certificate Authority (CA) certificate of the LDAP server.
						</li><li class="listitem">
							If users are stored in different trees in the LDAP directory, a 
dedicated LDAP account for Dovecot exists to search the directory. This 
account requires permissions to search for Distinguished Names (DNs) of 
other users.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Configure the authentication backends in the <code class="literal">/etc/dovecot/conf.d/10-auth.conf</code> file:
						</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
									Comment out <code class="literal">include</code> statements for <code class="literal">auth-*.conf.ext</code> authentication backend configuration files that you do not require, for example:
								</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--149dwkh"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="literallayout white-space-pre language-none codeblock codeblock--processed"><span class="strong strong"><strong>#!include auth-system.conf.ext</strong></span></pre></div></div></li><li class="listitem"><p class="simpara">
									Enable LDAP authentication by uncommenting the following line:
								</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--hvvs0qq"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="literallayout white-space-pre language-none codeblock codeblock--processed"><span class="strong strong"><strong>!include auth-ldap.conf.ext</strong></span></pre></div></div></li></ol></div></li><li class="listitem"><p class="simpara">
							Edit the <code class="literal">/etc/dovecot/conf.d/auth-ldap.conf.ext</code> file, and add the <code class="literal">override_fields</code> parameter as follows to the <code class="literal">userdb</code> section:
						</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--9tin96v"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="literallayout white-space-pre language-none codeblock codeblock--processed">userdb {
  driver = ldap
  args = /etc/dovecot/dovecot-ldap.conf.ext
  <span class="strong strong"><strong>override_fields = uid=<span class="emphasis"><em>vmail</em></span> gid=<span class="emphasis"><em>vmail</em></span> home=<span class="emphasis"><em>/var/mail/%n/</em></span></strong></span>
}</pre></div></div><p class="simpara">
							Due to the fixed values, Dovecot does not query these settings 
from the LDAP server. Consequently, these attributes also do not have to
 be present.
						</p></li><li class="listitem"><p class="simpara">
							Create the <code class="literal">/etc/dovecot/dovecot-ldap.conf.ext</code> file with the following settings:
						</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
									Depending on the LDAP structure, configure one of the following:
								</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
											If users are stored in different trees in the LDAP directory, configure dynamic DN lookups:
										</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--ehojloq"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="literallayout white-space-pre language-none codeblock codeblock--processed"><span class="strong strong"><strong>dn = <span class="emphasis"><em>cn=</em></span>dovecot_LDAP<span class="emphasis"><em>,dc=example,dc=com</em></span></strong></span>
<span class="strong strong"><strong>dnpass = <span class="emphasis"><em>password</em></span></strong></span>
<span class="strong strong"><strong>pass_filter = <span class="emphasis"><em>(&amp;(objectClass=posixAccount)(uid=%n))</em></span></strong></span></pre></div></div><p class="simpara">
											Dovecot uses the specified DN, password, and filter to search
 the DN of the authenticating user in the directory. In this search, 
Dovecot replaces <code class="literal">%n</code> in the filter with the username. Note that the LDAP search must return only one result.
										</p></li><li class="listitem"><p class="simpara">
											If all users are stored under a specific entry, configure a DN template:
										</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--afnjc9k"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="literallayout white-space-pre language-none codeblock codeblock--processed"><span class="strong strong"><strong>auth_bind_userdn = <span class="emphasis"><em>cn=%n,ou=People,dc=example,dc=com</em></span></strong></span></pre></div></div></li></ul></div></li><li class="listitem"><p class="simpara">
									Enable authentication binds to the LDAP server to verify Dovecot users:
								</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--wxm6615"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="literallayout white-space-pre language-none codeblock codeblock--processed"><span class="strong strong"><strong>auth_bind = yes</strong></span></pre></div></div></li><li class="listitem"><p class="simpara">
									Set the URL to the LDAP server:
								</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--p55qk39"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="literallayout white-space-pre language-none codeblock codeblock--processed"><span class="strong strong"><strong>uris = <span class="emphasis"><em>ldaps://LDAP-srv.example.com</em></span></strong></span></pre></div></div><p class="simpara">
									For security reasons, only use encrypted connections using LDAPS or the <code class="literal">STARTTLS</code> command over the LDAP protocol. For the latter, additionally add <code class="literal">tls = yes</code> to the settings.
								</p><p class="simpara">
									For a working certificate validation, the hostname of the LDAP 
server must match the hostname used in its TLS certificate.
								</p></li><li class="listitem"><p class="simpara">
									Enable the verification of the LDAP server’s TLS certificate:
								</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--7v79o19"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="literallayout white-space-pre language-none codeblock codeblock--processed"><span class="strong strong"><strong>tls_require_cert = hard</strong></span></pre></div></div></li><li class="listitem"><p class="simpara">
									Set the base DN to the DN where to start searching for users:
								</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--oxxhqty"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="literallayout white-space-pre language-none codeblock codeblock--processed"><span class="strong strong"><strong>base = <span class="emphasis"><em>ou=People,dc=example,dc=com</em></span></strong></span></pre></div></div></li><li class="listitem"><p class="simpara">
									Set the search scope:
								</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--gyp73fq"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="literallayout white-space-pre language-none codeblock codeblock--processed"><span class="strong strong"><strong>scope = <span class="emphasis"><em>onelevel</em></span></strong></span></pre></div></div><p class="simpara">
									Dovecot searches with the <code class="literal">onelevel</code> scope only in the specified base DN and with the <code class="literal">subtree</code> scope also in subtrees.
								</p></li></ol></div></li><li class="listitem"><p class="simpara">
							Set secure permissions on the <code class="literal">/etc/dovecot/dovecot-ldap.conf.ext</code> file:
						</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--sjm88m1"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="literallayout white-space-pre language-none codeblock codeblock--processed"># <span class="strong strong"><strong>chown root:root /etc/dovecot/dovecot-ldap.conf.ext</strong></span>
# <span class="strong strong"><strong>chmod 600 /etc/dovecot/dovecot-ldap.conf.ext</strong></span></pre></div></div></li></ol></div><div class="itemizedlist"><p class="title"><strong>Next step</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							<a class="link" href="#completing-the-dovecot-configuration_setting-up-a-dovecot-server-with-ldap-authentication" title="1.2.5.&nbsp;Completing the Dovecot configuration">Complete the Dovecot configuration</a>.
						</li></ul></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
							<code class="literal">/usr/share/doc/dovecot/example-config/dovecot-ldap.conf.ext</code>
						</li><li class="listitem">
							<code class="literal">/usr/share/doc/dovecot/wiki/UserDatabase.Static.txt</code>
						</li><li class="listitem">
							<code class="literal">/usr/share/doc/dovecot/wiki/AuthDatabase.LDAP.txt</code>
						</li><li class="listitem">
							<code class="literal">/usr/share/doc/dovecot/wiki/AuthDatabase.LDAP.AuthBinds.txt</code>
						</li><li class="listitem">
							<code class="literal">/usr/share/doc/dovecot/wiki/AuthDatabase.LDAP.PasswordLookups.txt</code>
						</li></ul></div></section><section class="section" id="completing-the-dovecot-configuration_setting-up-a-dovecot-server-with-ldap-authentication"><div class="titlepage"><div><div><h3 class="title">1.2.5. Completing the Dovecot configuration</h3></div></div></div><p>
					Once you have installed and configured Dovecot, open the required ports in the <code class="literal">firewalld</code> service, and enable and start the service. Afterwards, you can test the server.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							The following has been configured in Dovecot:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
									TLS encryption
								</li><li class="listitem">
									An authentication backend
								</li></ul></div></li><li class="listitem">
							Clients trust the Certificate Authority (CA) certificate.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							If you want to provide only an IMAP or POP3 service to users, uncomment the <code class="literal">protocols</code> parameter in the <code class="literal">/etc/dovecot/dovecot.conf</code> file, and set it to the required protocols. For example, if you do not require POP3, set:
						</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--emubqe6"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="literallayout white-space-pre language-none codeblock codeblock--processed"><span class="strong strong"><strong>protocols = imap lmtp</strong></span></pre></div></div><p class="simpara">
							By default, the <code class="literal">imap</code>, <code class="literal">pop3</code>, and <code class="literal">lmtp</code> protocols are enabled.
						</p></li><li class="listitem"><p class="simpara">
							Open the ports in the local firewall. For example, to open the 
ports for the IMAPS, IMAP, POP3S, and POP3 protocols, enter:
						</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--czmafux"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="literallayout white-space-pre language-none codeblock codeblock--processed"># <span class="strong strong"><strong>firewall-cmd --permanent --add-service=imaps --add-service=imap --add-service=pop3s --add-service=pop3</strong></span>
# <span class="strong strong"><strong>firewall-cmd --reload</strong></span></pre></div></div></li><li class="listitem"><p class="simpara">
							Enable and start the <code class="literal">dovecot</code> service:
						</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--ckl0dui"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="literallayout white-space-pre language-none codeblock codeblock--processed"># <span class="strong strong"><strong>systemctl enable --now dovecot</strong></span></pre></div></div></li></ol></div><div class="orderedlist"><p class="title"><strong>Verification</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Use a mail client, such as Mozilla Thunderbird, to connect to 
Dovecot and read emails. The settings for the mail client depend on the 
protocol you want to use:
						</p><div class="table" id="idm140563154752672"><p class="title">Table 1.2. Connection settings to the Dovecot server</p><rh-table class="table-contents rh-table--processed" pfelement="" type="content" data-id="8mdmj47" id="rh-table--8mdmj47" style="--rh-table--scrollbar--width: 0px;"><table class="gt-4-cols lt-7-rows"><colgroup><col style="width: 17%; " class="col_1"><!--Empty--><col style="width: 17%; " class="col_2"><!--Empty--><col style="width: 33%; " class="col_3"><!--Empty--><col style="width: 33%; " class="col_4"><!--Empty--></colgroup><thead><tr><th id="idm140563152701824" scope="col" data-row="1" data-col="1" class="content--sm" valign="top" align="left">Protocol</th><th id="idm140563152700736" scope="col" data-row="1" data-col="2" class="content--sm" valign="top" align="left">Port</th><th id="idm140563152699648" scope="col" data-row="1" data-col="3" class="content--sm" valign="top" align="left">Connection security</th><th id="idm140563152698560" scope="col" data-row="1" data-col="4" class="content--sm" valign="top" align="left">Authentication method</th></tr></thead><tbody><tr><td headers="idm140563152701824" data-row="2" data-col="1" class="content--md" valign="top" align="left"> <p>
											IMAP
										</p>
										 </td><td headers="idm140563152700736" data-row="2" data-col="2" class="content--md" valign="top" align="left"> <p>
											143
										</p>
										 </td><td headers="idm140563152699648" data-row="2" data-col="3" class="content--md" valign="top" align="left"> <p>
											STARTTLS
										</p>
										 </td><td headers="idm140563152698560" data-row="2" data-col="4" class="content--md" valign="top" align="left"> <p>
											PLAIN<a href="#ftn.fn-dovecot-con-settings-normal-pw_setting-up-a-dovecot-server-with-ldap-authentication" class="footnote"><sup class="footnote" id="fn-dovecot-con-settings-normal-pw_setting-up-a-dovecot-server-with-ldap-authentication">[a]</sup></a>
										</p>
										 </td></tr><tr><td headers="idm140563152701824" data-row="3" data-col="1" class="content--md" valign="top" align="left"> <p>
											IMAPS
										</p>
										 </td><td headers="idm140563152700736" data-row="3" data-col="2" class="content--md" valign="top" align="left"> <p>
											993
										</p>
										 </td><td headers="idm140563152699648" data-row="3" data-col="3" class="content--md" valign="top" align="left"> <p>
											SSL/TLS
										</p>
										 </td><td headers="idm140563152698560" data-row="3" data-col="4" class="content--md" valign="top" align="left"> <p>
											PLAIN<a href="#ftn.fn-dovecot-con-settings-normal-pw_setting-up-a-dovecot-server-with-ldap-authentication" class="footnoteref"><sup class="footnoteref">[a]</sup></a>
										</p>
										 </td></tr><tr><td headers="idm140563152701824" data-row="4" data-col="1" class="content--md" valign="top" align="left"> <p>
											POP3
										</p>
										 </td><td headers="idm140563152700736" data-row="4" data-col="2" class="content--md" valign="top" align="left"> <p>
											110
										</p>
										 </td><td headers="idm140563152699648" data-row="4" data-col="3" class="content--md" valign="top" align="left"> <p>
											STARTTLS
										</p>
										 </td><td headers="idm140563152698560" data-row="4" data-col="4" class="content--md" valign="top" align="left"> <p>
											PLAIN<a href="#ftn.fn-dovecot-con-settings-normal-pw_setting-up-a-dovecot-server-with-ldap-authentication" class="footnoteref"><sup class="footnoteref">[a]</sup></a>
										</p>
										 </td></tr><tr><td headers="idm140563152701824" data-row="5" data-col="1" class="content--md" valign="top" align="left"> <p>
											POP3S
										</p>
										 </td><td headers="idm140563152700736" data-row="5" data-col="2" class="content--md" valign="top" align="left"> <p>
											995
										</p>
										 </td><td headers="idm140563152699648" data-row="5" data-col="3" class="content--md" valign="top" align="left"> <p>
											SSL/TLS
										</p>
										 </td><td headers="idm140563152698560" data-row="5" data-col="4" class="content--md" valign="top" align="left"> <p>
											PLAIN<a href="#ftn.fn-dovecot-con-settings-normal-pw_setting-up-a-dovecot-server-with-ldap-authentication" class="footnoteref"><sup class="footnoteref">[a]</sup></a>
										</p>
										 </td></tr></tbody><tbody class="footnotes"><tr><td colspan="4" data-row="6" data-col="1" class="content--lg"><div id="ftn.fn-dovecot-con-settings-normal-pw_setting-up-a-dovecot-server-with-ldap-authentication" class="footnote"><div class="para"><a href="#fn-dovecot-con-settings-normal-pw_setting-up-a-dovecot-server-with-ldap-authentication" class="simpara"><sup class="simpara">[a] </sup></a>
												The client transmits data encrypted through the TLS connection. Consequently, credentials are not disclosed.
											</div></div></td></tr></tbody></table></rh-table></div><p class="simpara">
							Note that this table does not list settings for unencrypted 
connections because, by default, Dovecot does not accept plain text 
authentication on connections without TLS.
						</p></li><li class="listitem"><p class="simpara">
							Display configuration settings with non-default values:
						</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--waay7lr"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="literallayout white-space-pre language-none codeblock codeblock--processed"># <span class="strong strong"><strong>doveconf -n</strong></span></pre></div></div></li></ol></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
							<code class="literal">firewall-cmd(1)</code> man page
						</li></ul></div></section></section><section class="section" id="setting-up-a-dovecot-server-with-mariadb-sql-authentication_configuring-and-maintaining-a-dovecot-imap-and-pop3-server"><div class="titlepage"><div><div><h2 class="title">1.3. Setting up a Dovecot server with MariaDB SQL authentication</h2></div></div></div><p>
				If you store users and passwords in a MariaDB SQL server, you can 
configure Dovecot to use it as the user database and authentication 
backend. With this configuration, you manage accounts centrally in a 
database, and users have no local access to the file system on the 
Dovecot server.
			</p><p>
				Centrally managed accounts are also a benefit if you plan to set up 
multiple Dovecot servers with replication to make your mailboxes highly 
available.
			</p><section class="section" id="installing-dovecot_setting-up-a-dovecot-server-with-mariadb-sql-authentication"><div class="titlepage"><div><div><h3 class="title">1.3.1. Installing Dovecot</h3></div></div></div><p>
					The <code class="literal">dovecot</code> package provides:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							The <code class="literal">dovecot</code> service and the utilities to maintain it
						</li><li class="listitem">
							Services that Dovecot starts on demand, such as for authentication
						</li><li class="listitem">
							Plugins, such as server-side mail filtering
						</li><li class="listitem">
							Configuration files in the <code class="literal">/etc/dovecot/</code> directory
						</li><li class="listitem">
							Documentation in the <code class="literal">/usr/share/doc/dovecot/</code> directory
						</li></ul></div><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							Install the <code class="literal">dovecot</code> package:
						</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--5jkbvhe"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="literallayout white-space-pre language-none codeblock codeblock--processed"># <span class="strong strong"><strong>dnf install dovecot</strong></span></pre></div></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
								If Dovecot is already installed and you require clean configuration files, rename or remove the <code class="literal">/etc/dovecot/</code> directory. Afterwards, reinstall the package. Without removing the configuration files, the <code class="literal">dnf reinstall dovecot</code> command does not reset the configuration files in <code class="literal">/etc/dovecot/</code>.
							</p></div></div></li></ul></div><div class="itemizedlist"><p class="title"><strong>Next step</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							<a class="link" href="#configuring-tls-encryption-on-a-dovecot-server_setting-up-a-dovecot-server-with-mariadb-sql-authentication" title="1.3.2.&nbsp;Configuring TLS encryption on a Dovecot server">Configuring TLS encryption on a Dovecot server</a>.
						</li></ul></div></section><section class="section" id="configuring-tls-encryption-on-a-dovecot-server_setting-up-a-dovecot-server-with-mariadb-sql-authentication"><div class="titlepage"><div><div><h3 class="title">1.3.2. Configuring TLS encryption on a Dovecot server</h3></div></div></div><p>
					Dovecot provides a secure default configuration. For example, TLS 
is enabled by default to transmit credentials and data encrypted over 
networks. To configure TLS on a Dovecot server, you only need to set the
 paths to the certificate and private key files. Additionally, you can 
increase the security of TLS connections by generating and using 
Diffie-Hellman parameters to provide perfect forward secrecy (PFS).
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							Dovecot is installed.
						</li><li class="listitem"><p class="simpara">
							The following files have been copied to the listed locations on the server:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
									The server certificate: <code class="literal">/etc/pki/dovecot/certs/server.example.com.crt</code>
								</li><li class="listitem">
									The private key: <code class="literal">/etc/pki/dovecot/private/server.example.com.key</code>
								</li><li class="listitem">
									The Certificate Authority (CA) certificate: <code class="literal">/etc/pki/dovecot/certs/ca.crt</code>
								</li></ul></div></li><li class="listitem">
							The hostname in the <code class="literal">Subject DN</code> field of the server certificate matches the server’s Fully-qualified Domain Name (FQDN).
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Set secure permissions on the private key file:
						</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--29ng42n"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="literallayout white-space-pre language-none codeblock codeblock--processed"># <span class="strong strong"><strong>chown root:root /etc/pki/dovecot/private/server.example.com.key</strong></span>
# <span class="strong strong"><strong>chmod 600 /etc/pki/dovecot/private/server.example.com.key</strong></span></pre></div></div></li><li class="listitem"><p class="simpara">
							Generate a file with Diffie-Hellman parameters:
						</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--4rbxp2z"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="literallayout white-space-pre language-none codeblock codeblock--processed"># <span class="strong strong"><strong>openssl dhparam -out <span class="emphasis"><em>/etc/dovecot/dh.pem</em></span> <span class="emphasis"><em>4096</em></span></strong></span></pre></div></div><p class="simpara">
							Depending on the hardware and entropy on the server, generating 
Diffie-Hellman parameters with 4096 bits can take several minutes.
						</p></li><li class="listitem"><p class="simpara">
							Set the paths to the certificate and private key files in the <code class="literal">/etc/dovecot/conf.d/10-ssl.conf</code> file:
						</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
									Update the <code class="literal">ssl_cert</code> and <code class="literal">ssl_key</code> parameters, and set them to use the paths of the server’s certificate and private key:
								</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--npkpsrz"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="literallayout white-space-pre language-none codeblock codeblock--processed"><span class="strong strong"><strong>ssl_cert = &lt;<span class="emphasis"><em>/etc/pki/dovecot/certs/server.example.com.crt</em></span></strong></span>
<span class="strong strong"><strong>ssl_key = &lt;<span class="emphasis"><em>/etc/pki/dovecot/private/server.example.com.key</em></span></strong></span></pre></div></div></li><li class="listitem"><p class="simpara">
									Uncomment the <code class="literal">ssl_ca</code> parameter, and set it to use the path to the CA certificate:
								</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--a0spvfs"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="literallayout white-space-pre language-none codeblock codeblock--processed"><span class="strong strong"><strong>ssl_ca = &lt;<span class="emphasis"><em>/etc/pki/dovecot/certs/ca.crt</em></span></strong></span></pre></div></div></li><li class="listitem"><p class="simpara">
									Uncomment the <code class="literal">ssl_dh</code> parameter, and set it to use the path to the Diffie-Hellman parameters file:
								</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--wl908gt"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="literallayout white-space-pre language-none codeblock codeblock--processed"><span class="strong strong"><strong>ssl_dh = &lt;<span class="emphasis"><em>/etc/dovecot/dh.pem</em></span></strong></span></pre></div></div></li></ol></div><div class="admonition important"><div class="admonition_header">Important</div><div><p>
								To ensure that Dovecot reads the value of a parameter from a file, the path must start with a leading <code class="literal">&lt;</code> character.
							</p></div></div></li></ol></div><div class="itemizedlist"><p class="title"><strong>Next step</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							<a class="link" href="#preparing-dovecot-to-use-virtual-users_setting-up-a-dovecot-server-with-mariadb-sql-authentication" title="1.3.3.&nbsp;Preparing Dovecot to use virtual users">Preparing Dovecot to use virtual users</a>
						</li></ul></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
							<code class="literal">/usr/share/doc/dovecot/wiki/SSL.DovecotConfiguration.txt</code>
						</li></ul></div></section><section class="section" id="preparing-dovecot-to-use-virtual-users_setting-up-a-dovecot-server-with-mariadb-sql-authentication"><div class="titlepage"><div><div><h3 class="title">1.3.3. Preparing Dovecot to use virtual users</h3></div></div></div><p>
					By default, Dovecot performs many actions on the file system as the
 user who uses the service. However, configuring the Dovecot back end to
 use one local user to perform these actions has several benefits:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							Dovecot performs file system actions as a specific local user instead of using the user’s ID (UID).
						</li><li class="listitem">
							Users do not need to be available locally on the server.
						</li><li class="listitem">
							You can store all mailboxes and user-specific files in one root directory.
						</li><li class="listitem">
							Users do not require a UID and group ID (GID), which reduces administration efforts.
						</li><li class="listitem">
							Users who have access to the file system on the server cannot 
compromise their mailboxes or indexes because they cannot access these 
files.
						</li><li class="listitem">
							Setting up replication is easier.
						</li></ul></div><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							Dovecot is installed.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Create the <code class="literal">vmail</code> user:
						</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--hd0kbt7"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="literallayout white-space-pre language-none codeblock codeblock--processed"># <span class="strong strong"><strong>useradd --home-dir <span class="emphasis"><em>/var/mail/</em></span> --shell /usr/sbin/nologin <span class="emphasis"><em>vmail</em></span></strong></span></pre></div></div><p class="simpara">
							Dovecot will later use this user to manage the mailboxes. For security reasons, do not use the <code class="literal">dovecot</code> or <code class="literal">dovenull</code> system users for this purpose.
						</p></li><li class="listitem"><p class="simpara">
							If you use a different path than <code class="literal">/var/mail/</code>, set the <code class="literal">mail_spool_t</code> SELinux context on it, for example:
						</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--51549b2"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="literallayout white-space-pre language-none codeblock codeblock--processed"># <span class="strong strong"><strong>semanage fcontext -a -t mail_spool_t "<span class="emphasis"><em>&lt;path&gt;</em></span>(/.*)?"</strong></span>
# <span class="strong strong"><strong>restorecon -Rv <span class="emphasis"><em>&lt;path&gt;</em></span></strong></span></pre></div></div></li><li class="listitem"><p class="simpara">
							Grant write permissions on <code class="literal">/var/mail/</code> only to the <code class="literal">vmail</code> user:
						</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--xrj7dtt"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="literallayout white-space-pre language-none codeblock codeblock--processed"># <span class="strong strong"><strong>chown vmail:vmail <span class="emphasis"><em>/var/mail/</em></span></strong></span>
# <span class="strong strong"><strong>chmod 700 <span class="emphasis"><em>/var/mail/</em></span></strong></span></pre></div></div></li><li class="listitem"><p class="simpara">
							Uncomment the <code class="literal">mail_location</code> parameter in the <code class="literal">/etc/dovecot/conf.d/10-mail.conf</code> file, and set it to the mailbox format and location:
						</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--p79l2yr"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="literallayout white-space-pre language-none codeblock codeblock--processed"><span class="strong strong"><strong>mail_location = <span class="emphasis"><em>sdbox</em></span>:<span class="emphasis"><em>/var/mail/%n/</em></span></strong></span></pre></div></div><p class="simpara">
							With this setting:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									Dovecot uses the high-performant <code class="literal">dbox</code> mailbox format in <code class="literal">single</code> mode. In this mode, the service stores each mail in a separate file, similar to the <code class="literal">maildir</code> format.
								</li><li class="listitem">
									Dovecot resolves the <code class="literal">%n</code> variable in the path to the username. This is required to ensure that each user has a separate directory for its mailbox.
								</li></ul></div></li></ol></div><div class="itemizedlist"><p class="title"><strong>Next step</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							<a class="link" href="#using-a-mariadb-sql-database-as-the-dovecot-authentication-backend_setting-up-a-dovecot-server-with-mariadb-sql-authentication" title="1.3.4.&nbsp;Using a MariaDB SQL database as the Dovecot authentication backend">Using a MariaDB SQL database as the Dovecot authentication backend</a>
						</li></ul></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
							<code class="literal">/usr/share/doc/dovecot/wiki/VirtualUsers.txt</code>
						</li><li class="listitem">
							<code class="literal">/usr/share/doc/dovecot/wiki/MailLocation.txt</code>
						</li><li class="listitem">
							<code class="literal">/usr/share/doc/dovecot/wiki/MailboxFormat.dbox.txt</code>
						</li><li class="listitem">
							<code class="literal">/usr/share/doc/dovecot/wiki/Variables.txt</code>
						</li></ul></div></section><section class="section" id="using-a-mariadb-sql-database-as-the-dovecot-authentication-backend_setting-up-a-dovecot-server-with-mariadb-sql-authentication"><div class="titlepage"><div><div><h3 class="title">1.3.4. Using a MariaDB SQL database as the Dovecot authentication backend</h3></div></div></div><p>
					Dovecot can read accounts and passwords from a MariaDB database and
 use it to authenticate users when they log in to the IMAP or POP3 
service. The benefits of this authentication method include:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							Administrators can manage users centrally in a database.
						</li><li class="listitem">
							Users have no access locally on the server.
						</li></ul></div><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							Dovecot is installed.
						</li><li class="listitem">
							The virtual users feature is configured.
						</li><li class="listitem">
							Connections to the MariaDB server support TLS encryption.
						</li><li class="listitem">
							The <code class="literal">dovecotDB</code> database exists in MariaDB, and the <code class="literal">users</code> table contains at least a <code class="literal">username</code> and <code class="literal">password</code> column.
						</li><li class="listitem">
							The <code class="literal">password</code> column contains passwords encrypted with a scheme that Dovecot supports.
						</li><li class="listitem">
							The passwords either use the same scheme or have a <code class="literal">{<span class="emphasis"><em>pw-storage-scheme</em></span>}</code> prefix.
						</li><li class="listitem">
							The <code class="literal">dovecot</code> MariaDB user has read permission on the <code class="literal">users</code> table in the <code class="literal">dovecotDB</code> database.
						</li><li class="listitem">
							The certificate of the Certificate Authority (CA) that issued the
 MariaDB server’s TLS certificate is stored on the Dovecot server in the
 <code class="literal">/etc/pki/tls/certs/ca.crt</code> file.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Install the <code class="literal">dovecot-mysql</code> package:
						</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--yaz44fc"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="literallayout white-space-pre language-none codeblock codeblock--processed"># <span class="strong strong"><strong>dnf install dovecot-mysql</strong></span></pre></div></div></li><li class="listitem"><p class="simpara">
							Configure the authentication backends in the <code class="literal">/etc/dovecot/conf.d/10-auth.conf</code> file:
						</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
									Comment out <code class="literal">include</code> statements for <code class="literal">auth-*.conf.ext</code> authentication backend configuration files that you do not require, for example:
								</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--omc46md"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="literallayout white-space-pre language-none codeblock codeblock--processed"><span class="strong strong"><strong>#!include auth-system.conf.ext</strong></span></pre></div></div></li><li class="listitem"><p class="simpara">
									Enable SQL authentication by uncommenting the following line:
								</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--vdoh4av"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="literallayout white-space-pre language-none codeblock codeblock--processed"><span class="strong strong"><strong>!include auth-sql.conf.ext</strong></span></pre></div></div></li></ol></div></li><li class="listitem"><p class="simpara">
							Edit the <code class="literal">/etc/dovecot/conf.d/auth-sql.conf.ext</code> file, and add the <code class="literal">override_fields</code> parameter to the <code class="literal">userdb</code> section as follows:
						</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--xlklh1g"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="literallayout white-space-pre language-none codeblock codeblock--processed">userdb {
  driver = sql
  args = /etc/dovecot/dovecot-sql.conf.ext
  <span class="strong strong"><strong>override_fields = uid=<span class="emphasis"><em>vmail</em></span> gid=<span class="emphasis"><em>vmail</em></span> home=<span class="emphasis"><em>/var/mail/%n/</em></span></strong></span>
}</pre></div></div><p class="simpara">
							Due to the fixed values, Dovecot does not query these settings from the SQL server.
						</p></li><li class="listitem"><p class="simpara">
							Create the <code class="literal">/etc/dovecot/dovecot-sql.conf.ext</code> file with the following settings:
						</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--dawukla"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="literallayout white-space-pre language-none codeblock codeblock--processed"><span class="strong strong"><strong>driver = mysql</strong></span>
<span class="strong strong"><strong>connect = host=<span class="emphasis"><em>mariadb_srv.example.com</em></span> dbname=<span class="emphasis"><em>dovecotDB</em></span> user=<span class="emphasis"><em>dovecot</em></span> password=<span class="emphasis"><em>dovecotPW</em></span> ssl_ca=<span class="emphasis"><em>/etc/pki/tls/certs/ca.crt</em></span></strong></span>
<span class="strong strong"><strong>default_pass_scheme = <span class="emphasis"><em>SHA512-CRYPT</em></span></strong></span>
<span class="strong strong"><strong>user_query = SELECT <span class="emphasis"><em>username</em></span> FROM <span class="emphasis"><em>users</em></span> WHERE <span class="emphasis"><em>username</em></span>='%u';</strong></span>
<span class="strong strong"><strong>password_query = SELECT <span class="emphasis"><em>username</em></span> AS user, <span class="emphasis"><em>password</em></span> FROM <span class="emphasis"><em>users</em></span> WHERE <span class="emphasis"><em>username</em></span>='%u';</strong></span>
<span class="strong strong"><strong>iterate_query = SELECT <span class="emphasis"><em>username</em></span> FROM <span class="emphasis"><em>users</em></span>;</strong></span></pre></div></div><p class="simpara">
							To use TLS encryption to the database server, set the <code class="literal">ssl_ca</code>
 option to the path of the certificate of the CA that issued the MariaDB
 server certificate. For a working certificate validation, the hostname 
of the MariaDB server must match the hostname used in its TLS 
certificate.
						</p><p class="simpara">
							If the password values in the database contain a <code class="literal">{<span class="emphasis"><em>pw-storage-scheme</em></span>}</code> prefix, you can omit the <code class="literal">default_pass_scheme</code> setting.
						</p><p class="simpara">
							The queries in the file must be set as follows:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									For the <code class="literal">user_query</code> parameter, the query must return the username of the Dovecot user. The query must also return only one result.
								</li><li class="listitem">
									For the <code class="literal">password_query</code> parameter, the query must return the username and the password, and Dovecot must use these values in the <code class="literal">user</code> and <code class="literal">password</code> variables. Therefore, if the database uses different column names, use the <code class="literal">AS</code> SQL command to rename a column in the result.
								</li><li class="listitem">
									For the <code class="literal">iterate_query</code> parameter, the query must return a list of all users.
								</li></ul></div></li><li class="listitem"><p class="simpara">
							Set secure permissions on the <code class="literal">/etc/dovecot/dovecot-sql.conf.ext</code> file:
						</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--3eheprp"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="literallayout white-space-pre language-none codeblock codeblock--processed"># <span class="strong strong"><strong>chown root:root /etc/dovecot/dovecot-sql.conf.ext</strong></span>
# <span class="strong strong"><strong>chmod 600 /etc/dovecot/dovecot-sql.conf.ext</strong></span></pre></div></div></li></ol></div><div class="itemizedlist"><p class="title"><strong>Next step</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							<a class="link" href="#completing-the-dovecot-configuration_setting-up-a-dovecot-server-with-mariadb-sql-authentication" title="1.3.5.&nbsp;Completing the Dovecot configuration">Complete the Dovecot configuration</a>.
						</li></ul></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
							<code class="literal">/usr/share/doc/dovecot/example-config/dovecot-sql.conf.ext</code>
						</li><li class="listitem">
							<code class="literal">/usr/share/doc/dovecot/wiki/Authentication.PasswordSchemes.txt</code>
						</li></ul></div></section><section class="section" id="completing-the-dovecot-configuration_setting-up-a-dovecot-server-with-mariadb-sql-authentication"><div class="titlepage"><div><div><h3 class="title">1.3.5. Completing the Dovecot configuration</h3></div></div></div><p>
					Once you have installed and configured Dovecot, open the required ports in the <code class="literal">firewalld</code> service, and enable and start the service. Afterwards, you can test the server.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							The following has been configured in Dovecot:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
									TLS encryption
								</li><li class="listitem">
									An authentication backend
								</li></ul></div></li><li class="listitem">
							Clients trust the Certificate Authority (CA) certificate.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							If you want to provide only an IMAP or POP3 service to users, uncomment the <code class="literal">protocols</code> parameter in the <code class="literal">/etc/dovecot/dovecot.conf</code> file, and set it to the required protocols. For example, if you do not require POP3, set:
						</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--ait7npo"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="literallayout white-space-pre language-none codeblock codeblock--processed"><span class="strong strong"><strong>protocols = imap lmtp</strong></span></pre></div></div><p class="simpara">
							By default, the <code class="literal">imap</code>, <code class="literal">pop3</code>, and <code class="literal">lmtp</code> protocols are enabled.
						</p></li><li class="listitem"><p class="simpara">
							Open the ports in the local firewall. For example, to open the 
ports for the IMAPS, IMAP, POP3S, and POP3 protocols, enter:
						</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--03a7e75"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="literallayout white-space-pre language-none codeblock codeblock--processed"># <span class="strong strong"><strong>firewall-cmd --permanent --add-service=imaps --add-service=imap --add-service=pop3s --add-service=pop3</strong></span>
# <span class="strong strong"><strong>firewall-cmd --reload</strong></span></pre></div></div></li><li class="listitem"><p class="simpara">
							Enable and start the <code class="literal">dovecot</code> service:
						</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--5vlzdcl"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="literallayout white-space-pre language-none codeblock codeblock--processed"># <span class="strong strong"><strong>systemctl enable --now dovecot</strong></span></pre></div></div></li></ol></div><div class="orderedlist"><p class="title"><strong>Verification</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Use a mail client, such as Mozilla Thunderbird, to connect to 
Dovecot and read emails. The settings for the mail client depend on the 
protocol you want to use:
						</p><div class="table" id="idm140563161328736"><p class="title">Table 1.3. Connection settings to the Dovecot server</p><rh-table class="table-contents rh-table--processed" pfelement="" type="content" data-id="08m3d92" id="rh-table--08m3d92" style="--rh-table--scrollbar--width: 0px;"><table class="gt-4-cols lt-7-rows"><colgroup><col style="width: 17%; " class="col_1"><!--Empty--><col style="width: 17%; " class="col_2"><!--Empty--><col style="width: 33%; " class="col_3"><!--Empty--><col style="width: 33%; " class="col_4"><!--Empty--></colgroup><thead><tr><th id="idm140563151912800" scope="col" data-row="1" data-col="1" class="content--sm" valign="top" align="left">Protocol</th><th id="idm140563151911712" scope="col" data-row="1" data-col="2" class="content--sm" valign="top" align="left">Port</th><th id="idm140563151910624" scope="col" data-row="1" data-col="3" class="content--sm" valign="top" align="left">Connection security</th><th id="idm140563151909536" scope="col" data-row="1" data-col="4" class="content--sm" valign="top" align="left">Authentication method</th></tr></thead><tbody><tr><td headers="idm140563151912800" data-row="2" data-col="1" class="content--md" valign="top" align="left"> <p>
											IMAP
										</p>
										 </td><td headers="idm140563151911712" data-row="2" data-col="2" class="content--md" valign="top" align="left"> <p>
											143
										</p>
										 </td><td headers="idm140563151910624" data-row="2" data-col="3" class="content--md" valign="top" align="left"> <p>
											STARTTLS
										</p>
										 </td><td headers="idm140563151909536" data-row="2" data-col="4" class="content--md" valign="top" align="left"> <p>
											PLAIN<a href="#ftn.fn-dovecot-con-settings-normal-pw_setting-up-a-dovecot-server-with-mariadb-sql-authentication" class="footnote"><sup class="footnote" id="fn-dovecot-con-settings-normal-pw_setting-up-a-dovecot-server-with-mariadb-sql-authentication">[a]</sup></a>
										</p>
										 </td></tr><tr><td headers="idm140563151912800" data-row="3" data-col="1" class="content--md" valign="top" align="left"> <p>
											IMAPS
										</p>
										 </td><td headers="idm140563151911712" data-row="3" data-col="2" class="content--md" valign="top" align="left"> <p>
											993
										</p>
										 </td><td headers="idm140563151910624" data-row="3" data-col="3" class="content--md" valign="top" align="left"> <p>
											SSL/TLS
										</p>
										 </td><td headers="idm140563151909536" data-row="3" data-col="4" class="content--md" valign="top" align="left"> <p>
											PLAIN<a href="#ftn.fn-dovecot-con-settings-normal-pw_setting-up-a-dovecot-server-with-mariadb-sql-authentication" class="footnoteref"><sup class="footnoteref">[a]</sup></a>
										</p>
										 </td></tr><tr><td headers="idm140563151912800" data-row="4" data-col="1" class="content--md" valign="top" align="left"> <p>
											POP3
										</p>
										 </td><td headers="idm140563151911712" data-row="4" data-col="2" class="content--md" valign="top" align="left"> <p>
											110
										</p>
										 </td><td headers="idm140563151910624" data-row="4" data-col="3" class="content--md" valign="top" align="left"> <p>
											STARTTLS
										</p>
										 </td><td headers="idm140563151909536" data-row="4" data-col="4" class="content--md" valign="top" align="left"> <p>
											PLAIN<a href="#ftn.fn-dovecot-con-settings-normal-pw_setting-up-a-dovecot-server-with-mariadb-sql-authentication" class="footnoteref"><sup class="footnoteref">[a]</sup></a>
										</p>
										 </td></tr><tr><td headers="idm140563151912800" data-row="5" data-col="1" class="content--md" valign="top" align="left"> <p>
											POP3S
										</p>
										 </td><td headers="idm140563151911712" data-row="5" data-col="2" class="content--md" valign="top" align="left"> <p>
											995
										</p>
										 </td><td headers="idm140563151910624" data-row="5" data-col="3" class="content--md" valign="top" align="left"> <p>
											SSL/TLS
										</p>
										 </td><td headers="idm140563151909536" data-row="5" data-col="4" class="content--md" valign="top" align="left"> <p>
											PLAIN<a href="#ftn.fn-dovecot-con-settings-normal-pw_setting-up-a-dovecot-server-with-mariadb-sql-authentication" class="footnoteref"><sup class="footnoteref">[a]</sup></a>
										</p>
										 </td></tr></tbody><tbody class="footnotes"><tr><td colspan="4" data-row="6" data-col="1" class="content--lg"><div id="ftn.fn-dovecot-con-settings-normal-pw_setting-up-a-dovecot-server-with-mariadb-sql-authentication" class="footnote"><div class="para"><a href="#fn-dovecot-con-settings-normal-pw_setting-up-a-dovecot-server-with-mariadb-sql-authentication" class="simpara"><sup class="simpara">[a] </sup></a>
												The client transmits data encrypted through the TLS connection. Consequently, credentials are not disclosed.
											</div></div></td></tr></tbody></table></rh-table></div><p class="simpara">
							Note that this table does not list settings for unencrypted 
connections because, by default, Dovecot does not accept plain text 
authentication on connections without TLS.
						</p></li><li class="listitem"><p class="simpara">
							Display configuration settings with non-default values:
						</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--ee4kf9x"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="literallayout white-space-pre language-none codeblock codeblock--processed"># <span class="strong strong"><strong>doveconf -n</strong></span></pre></div></div></li></ol></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
							<code class="literal">firewall-cmd(1)</code> man page
						</li></ul></div></section></section><section class="section" id="configuring-replication-between-two-dovecot-servers_configuring-and-maintaining-a-dovecot-imap-and-pop3-server"><div class="titlepage"><div><div><h2 class="title">1.4. Configuring replication between two Dovecot servers</h2></div></div></div><p>
				With two-way replication, you can make your Dovecot server 
high-available, and IMAP and POP3 clients can access a mailbox on both 
servers. Dovecot keeps track of changes in the index logs of each 
mailbox and solves conflicts in a safe way.
			</p><p>
				Perform this procedure on both replication partners.
			</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
					Replication works only between server pairs. Consequently, in a large cluster, you need multiple independent backend pairs.
				</p></div></div><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						Both servers use the same authentication backend. Preferably, use LDAP or SQL to maintain accounts centrally.
					</li><li class="listitem">
						The Dovecot user database configuration supports user listing. Use the <code class="literal">doveadm user '*'</code> command to verify this.
					</li><li class="listitem">
						Dovecot accesses mailboxes on the file system as the <code class="literal">vmail</code> user instead of the user’s ID (UID).
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Create the <code class="literal">/etc/dovecot/conf.d/10-replication.conf</code> file and perform the following steps in it:
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
								Enable the <code class="literal">notify</code> and <code class="literal">replication</code> plug-ins:
							</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--dri3lcl"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="literallayout white-space-pre language-none codeblock codeblock--processed"><span class="strong strong"><strong>mail_plugins = $mail_plugins notify replication</strong></span></pre></div></div></li><li class="listitem"><p class="simpara">
								Add a <code class="literal">service replicator</code> section:
							</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--he3a9i1"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="literallayout white-space-pre language-none codeblock codeblock--processed"><span class="strong strong"><strong>service replicator {</strong></span>
  <span class="strong strong"><strong>process_min_avail = 1</strong></span>

  <span class="strong strong"><strong>unix_listener replicator-doveadm {</strong></span>
    <span class="strong strong"><strong>mode = 0600</strong></span>
    <span class="strong strong"><strong>user = vmail</strong></span>
  <span class="strong strong"><strong>}</strong></span>
<span class="strong strong"><strong>}</strong></span></pre></div></div><p class="simpara">
								With these settings, Dovecot starts at least one replicator process when the <code class="literal">dovecot</code> service starts. Additionally, this section defines the settings on the <code class="literal">replicator-doveadm</code> socket.
							</p></li><li class="listitem"><p class="simpara">
								Add a <code class="literal">service aggregator</code> section to configure the <code class="literal">replication-notify-fifo</code> pipe and <code class="literal">replication-notify</code> socket:
							</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--5rg245c"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="literallayout white-space-pre language-none codeblock codeblock--processed"><span class="strong strong"><strong>service aggregator {</strong></span>
  <span class="strong strong"><strong>fifo_listener replication-notify-fifo {</strong></span>
    <span class="strong strong"><strong>user = vmail</strong></span>
  <span class="strong strong"><strong>}</strong></span>
  <span class="strong strong"><strong>unix_listener replication-notify {</strong></span>
    <span class="strong strong"><strong>user = vmail</strong></span>
  <span class="strong strong"><strong>}</strong></span>
<span class="strong strong"><strong>}</strong></span></pre></div></div></li><li class="listitem"><p class="simpara">
								Add a <code class="literal">service doveadm</code> section to define the port of the replication service:
							</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--azkb50u"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="literallayout white-space-pre language-none codeblock codeblock--processed"><span class="strong strong"><strong>service doveadm {</strong></span>
  <span class="strong strong"><strong>inet_listener {</strong></span>
    <span class="strong strong"><strong>port = <span class="emphasis"><em>12345</em></span></strong></span>
  <span class="strong strong"><strong>}</strong></span>
<span class="strong strong"><strong>}</strong></span></pre></div></div></li><li class="listitem"><p class="simpara">
								Set the password of the <code class="literal">doveadm</code> replication service:
							</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--n2byliw"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="literallayout white-space-pre language-none codeblock codeblock--processed"><span class="strong strong"><strong>doveadm_password = <span class="emphasis"><em>replication_password</em></span></strong></span></pre></div></div><p class="simpara">
								The password must be the same on both servers.
							</p></li><li class="listitem"><p class="simpara">
								Configure the replication partner:
							</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--58oksrm"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="literallayout white-space-pre language-none codeblock codeblock--processed"><span class="strong strong"><strong>plugin {</strong></span>
  <span class="strong strong"><strong>mail_replica = tcp:<span class="emphasis"><em>server2.example.com</em></span>:<span class="emphasis"><em>12345</em></span></strong></span>
<span class="strong strong"><strong>}</strong></span></pre></div></div></li><li class="listitem"><p class="simpara">
								Optional: Define the maximum number of parallel <code class="literal">dsync</code> processes:
							</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--g8jqhpc"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="literallayout white-space-pre language-none codeblock codeblock--processed"><span class="strong strong"><strong>replication_max_conns = <span class="emphasis"><em>20</em></span></strong></span></pre></div></div><p class="simpara">
								The default value of <code class="literal">replication_max_conns</code> is <code class="literal">10</code>.
							</p></li></ol></div></li><li class="listitem"><p class="simpara">
						Set secure permissions on the <code class="literal">/etc/dovecot/conf.d/10-replication.conf</code> file:
					</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--4nrai41"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="literallayout white-space-pre language-none codeblock codeblock--processed"># <span class="strong strong"><strong>chown root:root /etc/dovecot/conf.d/10-replication.conf</strong></span>
# <span class="strong strong"><strong>chmod 600 /etc/dovecot/conf.d/10-replication.conf</strong></span></pre></div></div></li><li class="listitem"><p class="simpara">
						Enable the <code class="literal">nis_enabled</code> SELinux Boolean to allow Dovecot to open the <code class="literal">doveadm</code> replication port:
					</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--yznh8b4"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="literallayout white-space-pre language-none codeblock codeblock--processed"><span class="strong strong"><strong>setsebool -P nis_enabled on</strong></span></pre></div></div></li><li class="listitem"><p class="simpara">
						Configure <code class="literal">firewalld</code> rules to allow only the replication partner to access the replication port, for example:
					</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--tgpr9n6"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="literallayout white-space-pre language-none codeblock codeblock--processed"># <span class="strong strong"><strong>firewall-cmd --permanent --zone=public --add-rich-rule="rule family="ipv4" source address="<span class="emphasis"><em>192.0.2.1/32</em></span>" port protocol="tcp" port="<span class="emphasis"><em>12345</em></span>" accept"</strong></span>
# <span class="strong strong"><strong>firewall-cmd --permanent --zone=public --add-rich-rule="rule family="ipv6" source address="<span class="emphasis"><em>2001:db8:2::1/128</em></span>" port protocol="tcp" port="<span class="emphasis"><em>12345</em></span>" accept"</strong></span>
# <span class="strong strong"><strong>firewall-cmd --reload</strong></span></pre></div></div><p class="simpara">
						The subnet masks <code class="literal">/32</code> for the IPv4 and <code class="literal">/128</code> for the IPv6 address limit the access to the specified addresses.
					</p></li><li class="listitem">
						Perform this procedure also on the other replication partner.
					</li><li class="listitem"><p class="simpara">
						Reload Dovecot:
					</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--ixib1s1"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="literallayout white-space-pre language-none codeblock codeblock--processed"># <span class="strong strong"><strong>systemctl reload dovecot</strong></span></pre></div></div></li></ol></div><div class="orderedlist"><p class="title"><strong>Verification</strong></p><ol class="orderedlist" type="1"><li class="listitem">
						Perform an action in a mailbox on one server and then verify if Dovecot has replicated the change to the other server.
					</li><li class="listitem"><p class="simpara">
						Display the replicator status:
					</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--gnys1sn"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="literallayout white-space-pre language-none codeblock codeblock--processed"># <span class="strong strong"><strong>doveadm replicator status</strong></span>
Queued 'sync' requests        0
Queued 'high' requests        0
Queued 'low' requests         0
Queued 'failed' requests      0
Queued 'full resync' requests 30
Waiting 'failed' requests     0
Total number of known users   75</pre></div></div></li><li class="listitem"><p class="simpara">
						Display the replicator status of a specific user:
					</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--63tpbe5"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="literallayout white-space-pre language-none codeblock codeblock--processed"># <span class="strong strong"><strong>doveadm replicator status <span class="emphasis"><em>example_user</em></span></strong></span>
username        priority  fast sync  full sync  success sync  failed
<span class="emphasis"><em>example_user</em></span>    <span class="emphasis"><em>none</em></span>      <span class="emphasis"><em>02:05:28</em></span>   <span class="emphasis"><em>04:19:07</em></span>   <span class="emphasis"><em>02:05:28</em></span>      <span class="emphasis"><em>-</em></span></pre></div></div></li></ol></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<code class="literal">dsync(1)</code> man page
					</li><li class="listitem">
						<code class="literal">/usr/share/doc/dovecot/wiki/Replication.txt</code>
					</li></ul></div></section><section class="section" id="automatically-subscribing-users-to-imap-mailboxesconfiguring-and-maintaining-a-dovecot-imap-and-pop3-server"><div class="titlepage"><div><div><h2 class="title">1.5. Automatically subscribing users to IMAP mailboxes</h2></div></div></div><p>
				Typically, IMAP server administrators want Dovecot to automatically create certain mailboxes, such as <code class="literal">Sent</code> and <code class="literal">Trash</code>, and subscribe the users to them. You can set this in the configuration files.
			</p><p>
				Additionally, you can define <span class="emphasis"><em>special-use mailboxes</em></span>.
 IMAP clients often support defining mailboxes for special purposes, 
such as for sent emails. To avoid that the user has to manually select 
and set the correct mailboxes, IMAP servers can send a <code class="literal">special-use</code> attribute in the IMAP <code class="literal">LIST</code> command. Clients can then use this attribute to identify and set, for example, the mailbox for sent emails.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						Dovecot is configured.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Update the <code class="literal">inbox</code> namespace section in the <code class="literal">/etc/dovecot/conf.d/15-mailboxes.conf</code> file:
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
								Add the <code class="literal">auto = subscribe</code> setting to each special-use mailbox that should be available to users, for example:
							</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--xkygt9q"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="literallayout white-space-pre language-none codeblock codeblock--processed">namespace inbox {
  ...
  mailbox Drafts {
    special_use = \Drafts
    <span class="strong strong"><strong>auto = subscribe</strong></span>
  }

  mailbox Junk {
    special_use = \Junk
    <span class="strong strong"><strong>auto = subscribe</strong></span>
  }

  mailbox Trash {
    special_use = \Trash
    <span class="strong strong"><strong>auto = subscribe</strong></span>
  }

  mailbox Sent {
    special_use = \Sent
    <span class="strong strong"><strong>auto = subscribe</strong></span>
  }
  ...
}</pre></div></div><p class="simpara">
								If your mail clients support more special-use mailboxes, you can add similar entries. The <code class="literal">special_use</code> parameter defines the value that Dovecot sends in the <code class="literal">special-use</code> attribute to the clients.
							</p></li><li class="listitem"><p class="simpara">
								Optional: If you want to define other mailboxes that have no special purpose, add <code class="literal">mailbox</code> sections for them in the user’s inbox, for example:
							</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--iq8mex4"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="literallayout white-space-pre language-none codeblock codeblock--processed">namespace inbox {
  ...
  <span class="strong strong"><strong>mailbox "<span class="emphasis"><em>Important Emails</em></span>" {</strong></span>
    <span class="strong strong"><strong>auto = <span class="emphasis"><em>&lt;value&gt;</em></span></strong></span>
  <span class="strong strong"><strong>}</strong></span>
  ...
}</pre></div></div><p class="simpara">
								You can set the <code class="literal">auto</code> parameter to one of the following values:
							</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
										<code class="literal">subscribe</code>: Automatically creates the mailbox and subscribes the user to it.
									</li><li class="listitem">
										<code class="literal">create</code>: Automatically creates the mailbox without subscribing the user to it.
									</li><li class="listitem">
										<code class="literal">no</code> (default): Dovecot neither creates the mailbox nor does it subscribe the user to it.
									</li></ul></div></li></ol></div></li><li class="listitem"><p class="simpara">
						Reload Dovecot:
					</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--vylaiie"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="literallayout white-space-pre language-none codeblock codeblock--processed"># <span class="strong strong"><strong>systemctl reload dovecot</strong></span></pre></div></div></li></ol></div><div class="itemizedlist"><p class="title"><strong>Verification</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						Use an IMAP client and access your mailbox.
					</p><p class="simpara">
						Mailboxes with the setting <code class="literal">auto = subscribe</code>
 are automatically visible. If the client supports special-use mailboxes
 and the defined purposes, the client automatically uses them.
					</p></li></ul></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<a class="link" href="https://www.rfc-editor.org/rfc/rfc6154">RFC 6154: IMAP LIST Extension for Special-Use Mailboxes</a>
					</li><li class="listitem">
						<code class="literal">/usr/share/doc/dovecot/wiki/MailboxSettings.txt</code>
					</li></ul></div></section><section class="section" id="configuring-an-lmtp-socket-and-lmtps-listener_configuring-and-maintaining-a-dovecot-imap-and-pop3-server"><div class="titlepage"><div><div><h2 class="title">1.6. Configuring an LMTP socket and LMTPS listener</h2></div></div></div><p>
				SMTP servers, such as Postfix, use the Local Mail Transfer Protocol 
(LMTP) to deliver emails to Dovecot. If the SMTP server runs:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						On the same host as Dovecot, use an LMTP socket
					</li><li class="listitem"><p class="simpara">
						On a different host, use an LMTP service
					</p><p class="simpara">
						By default, the LMTP protocol is not encrypted. However, if you 
configured TLS encryption, Dovecot uses the same settings automatically 
for the LMTP service. SMTP servers can then connect to it using the 
LMTPS protocol or the <code class="literal">STARTTLS</code> command over LMTP.
					</p></li></ul></div><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						Dovecot is installed.
					</li><li class="listitem">
						If you want to configure an LMTP service, TLS encryption is configured in Dovecot.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Verify that the LMTP protocol is enabled:
					</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--kos7lhy"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="literallayout white-space-pre language-none codeblock codeblock--processed"># <span class="strong strong"><strong>doveconf -a | egrep "^protocols"</strong></span>
protocols = imap pop3 lmtp</pre></div></div><p class="simpara">
						The protocol is enabled, if the output contains <code class="literal">lmtp</code>.
					</p></li><li class="listitem"><p class="simpara">
						If the <code class="literal">lmtp</code> protocol is disabled, edit the <code class="literal">/etc/dovecot/dovecot.conf</code> file, and append <code class="literal">lmtp</code> to the values in the <code class="literal">protocols</code> parameter:
					</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--gcfl2uj"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="literallayout white-space-pre language-none codeblock codeblock--processed">protocols = ... <span class="strong strong"><strong>lmtp</strong></span></pre></div></div></li><li class="listitem"><p class="simpara">
						Depending on whether you need an LMTP socket or service, make the following changes in the <code class="literal">service lmtp</code> section in the <code class="literal">/etc/dovecot/conf.d/10-master.conf</code> file:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								LMTP socket: By default, Dovecot automatically creates the <code class="literal">/var/run/dovecot/lmtp</code> socket.
							</p><p class="simpara">
								Optional: Customize the ownership and permissions:
							</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--m8ftv5k"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="literallayout white-space-pre language-none codeblock codeblock--processed">service lmtp {
  ...
  unix_listener lmtp {
    <span class="strong strong"><strong>mode = <span class="emphasis"><em>0600</em></span></strong></span>
    <span class="strong strong"><strong>user = <span class="emphasis"><em>postfix</em></span></strong></span>
    <span class="strong strong"><strong>group = <span class="emphasis"><em>postfix</em></span></strong></span>
  }
  ...
}</pre></div></div></li><li class="listitem"><p class="simpara">
								LMTP service: Add a <code class="literal">inet_listener</code> sub-section:
							</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--pqg7gwz"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="literallayout white-space-pre language-none codeblock codeblock--processed">service lmtp {
  ...
  <span class="strong strong"><strong>inet_listener lmtp {</strong></span>
    <span class="strong strong"><strong>port = <span class="emphasis"><em>24</em></span></strong></span>
  <span class="strong strong"><strong>}</strong></span>
  ...
}</pre></div></div></li></ul></div></li><li class="listitem"><p class="simpara">
						Configure <code class="literal">firewalld</code> rules to allow only the SMTP server to access the LMTP port, for example:
					</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--y6op66n"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="literallayout white-space-pre language-none codeblock codeblock--processed"># <span class="strong strong"><strong>firewall-cmd --permanent --zone=public --add-rich-rule="rule family="ipv4" source address="<span class="emphasis"><em>192.0.2.1/32</em></span>" port protocol="tcp" port="<span class="emphasis"><em>24</em></span>" accept"</strong></span>
# <span class="strong strong"><strong>firewall-cmd --permanent --zone=public --add-rich-rule="rule family="ipv6" source address="<span class="emphasis"><em>2001:db8:2::1/128</em></span>" port protocol="tcp" port="<span class="emphasis"><em>24</em></span>" accept"</strong></span>
# <span class="strong strong"><strong>firewall-cmd --reload</strong></span></pre></div></div><p class="simpara">
						The subnet masks <code class="literal">/32</code> for the IPv4 and <code class="literal">/128</code> for the IPv6 address limit the access to the specified addresses.
					</p></li><li class="listitem"><p class="simpara">
						Reload Dovecot:
					</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--oe8ibax"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="literallayout white-space-pre language-none codeblock codeblock--processed"># <span class="strong strong"><strong>systemctl reload dovecot</strong></span></pre></div></div></li></ol></div><div class="orderedlist"><p class="title"><strong>Verification</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						If you configured the LMTP socket, verify that Dovecot has created the socket and that the permissions are correct:
					</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--zsaj3ra"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="literallayout white-space-pre language-none codeblock codeblock--processed"># <span class="strong strong"><strong>ls -l /var/run/dovecot/lmtp</strong></span>
s<span class="emphasis"><em>rw-------</em></span>. 1 <span class="emphasis"><em>postfix</em></span> <span class="emphasis"><em>postfix</em></span> 0 Nov 22 17:17 <span class="emphasis"><em>/var/run/dovecot/lmtp</em></span></pre></div></div></li><li class="listitem"><p class="simpara">
						Configure the SMTP server to submit emails to Dovecot using the LMTP socket or service.
					</p><p class="simpara">
						When you use the LMTP service, ensure that the SMTP server uses the LMTPS protocol or sends the <code class="literal">STARTTLS</code> command to use an encrypted connection.
					</p></li></ol></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<code class="literal">/usr/share/doc/dovecot/wiki/LMTP.txt</code>
					</li></ul></div></section><section class="section" id="disabling-the-imap-or-pop3-service-in-dovecot_configuring-and-maintaining-a-dovecot-imap-and-pop3-server"><div class="titlepage"><div><div><h2 class="title">1.7. Disabling the IMAP or POP3 service in Dovecot</h2></div></div></div><p>
				By default, Dovecot provides IMAP and POP3 services. If you require 
only one of them, you can disable the other to reduce the surface for 
attack.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						Dovecot is installed.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Uncomment the <code class="literal">protocols</code> parameter in the <code class="literal">/etc/dovecot/dovecot.conf</code> file, and set it to use the required protocols. For example, if you do not require POP3, set:
					</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--pl45n1d"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="literallayout white-space-pre language-none codeblock codeblock--processed"><span class="strong strong"><strong>protocols = imap lmtp</strong></span></pre></div></div><p class="simpara">
						By default, the <code class="literal">imap</code>, <code class="literal">pop3</code>, and <code class="literal">lmtp</code> protocols are enabled.
					</p></li><li class="listitem"><p class="simpara">
						Reload Dovecot:
					</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--xfwa12f"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="literallayout white-space-pre language-none codeblock codeblock--processed"># <span class="strong strong"><strong>systemctl reload dovecot</strong></span></pre></div></div></li><li class="listitem"><p class="simpara">
						Close the ports that are no longer required in the local firewall.
 For example, to close the ports for the POP3S and POP3 protocols, 
enter:
					</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--v95r43p"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="literallayout white-space-pre language-none codeblock codeblock--processed"># <span class="strong strong"><strong>firewall-cmd --remove-service=pop3s --remove-service=pop3</strong></span>
# <span class="strong strong"><strong>firewall-cmd --reload</strong></span></pre></div></div></li></ol></div><div class="itemizedlist"><p class="title"><strong>Verification</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						Display all ports in <code class="literal">LISTEN</code> mode opened by the <code class="literal">dovecot</code> process:
					</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--hhxltxe"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="literallayout white-space-pre language-none codeblock codeblock--processed"># <span class="strong strong"><strong>ss -tulp | grep dovecot</strong></span>
tcp  LISTEN <span class="emphasis"><em>0</em></span>  <span class="emphasis"><em>100</em></span>  0.0.0.0:993  0.0.0.0:*  users:(("dovecot",pid=<span class="emphasis"><em>1405</em></span>,fd=<span class="emphasis"><em>44</em></span>))
tcp  LISTEN <span class="emphasis"><em>0</em></span>  <span class="emphasis"><em>100</em></span>  0.0.0.0:143  0.0.0.0:*  users:(("dovecot",pid=<span class="emphasis"><em>1405</em></span>,fd=<span class="emphasis"><em>42</em></span>))
tcp  LISTEN <span class="emphasis"><em>0</em></span>  <span class="emphasis"><em>100</em></span>     [::]:993     [::]:*  users:(("dovecot",pid=<span class="emphasis"><em>1405</em></span>,fd=<span class="emphasis"><em>45</em></span>))
tcp  LISTEN <span class="emphasis"><em>0</em></span>  <span class="emphasis"><em>100</em></span>     [::]:143     [::]:*  users:(("dovecot",pid=<span class="emphasis"><em>1405</em></span>,fd=<span class="emphasis"><em>43</em></span>))</pre></div></div><p class="simpara">
						In this example, Dovecot listens only on the TCP ports <code class="literal">993</code> (IMAPS) and <code class="literal">143</code> (IMAP).
					</p><p class="simpara">
						Note that Dovecot only opens a port for the LMTP protocol if you 
configure the service to listen on a port instead of using a socket.
					</p></li></ul></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<code class="literal">firewall-cmd(1)</code> man page
					</li></ul></div></section><section class="section" id="enabling-server-side-email-filtering-using-sieve-on-a-dovecot-imap-server_configuring-and-maintaining-a-dovecot-imap-and-pop3-server"><div class="titlepage"><div><div><h2 class="title">1.8. Enabling server-side email filtering using Sieve on a Dovecot IMAP server</h2></div></div></div><p>
				You can upload Sieve scripts to a server using the ManageSieve 
protocol. Sieve scripts define rules and actions that a server should 
validate and perform on incoming emails. For example, users can use 
Sieve to forward emails from a specific sender, and administrators can 
create a global filter to move mails flagged by a spam filter into a 
separate IMAP folder.
			</p><p>
				The <code class="literal">ManageSieve</code> plugin adds support for Sieve scripts and the ManageSieve protocol to a Dovecot IMAP server.
			</p><div class="admonition warning"><div class="admonition_header">Warning</div><div><p>
					Use only clients that support using the ManageSieve protocol over 
TLS connections. Disabling TLS for this protocol causes clients to send 
credentials in plain text over the network.
				</p></div></div><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						Dovecot is configured and provides IMAP mailboxes.
					</li><li class="listitem">
						TLS encryption is configured in Dovecot.
					</li><li class="listitem">
						The mail clients support the ManageSieve protocol over TLS connections.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Install the <code class="literal">dovecot-pigeonhole</code> package:
					</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--46lyk5j"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="literallayout white-space-pre language-none codeblock codeblock--processed"># <span class="strong strong"><strong>dnf install dovecot-pigeonhole</strong></span></pre></div></div></li><li class="listitem"><p class="simpara">
						Uncomment the following line in <code class="literal">/etc/dovecot/conf.d/20-managesieve.conf</code> to enable the <code class="literal">sieve</code> protocol:
					</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--fsljtv8"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="literallayout white-space-pre language-none codeblock codeblock--processed"><span class="strong strong"><strong>protocols = $protocols sieve</strong></span></pre></div></div><p class="simpara">
						This setting activates Sieve in addition to the other protocols that are already enabled.
					</p></li><li class="listitem"><p class="simpara">
						Open the ManageSieve port in <code class="literal">firewalld</code>:
					</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--cgz6eyd"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="literallayout white-space-pre language-none codeblock codeblock--processed"># <span class="strong strong"><strong>firewall-cmd --permanent --add-service=managesieve</strong></span>
# <span class="strong strong"><strong>firewall-cmd --reload</strong></span></pre></div></div></li><li class="listitem"><p class="simpara">
						Reload Dovecot:
					</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--0w90283"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="literallayout white-space-pre language-none codeblock codeblock--processed"># <span class="strong strong"><strong>systemctl reload dovecot</strong></span></pre></div></div></li></ol></div><div class="orderedlist"><p class="title"><strong>Verification</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Use a client and upload a Sieve script. Use the following connection settings:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								Port: 4190
							</li><li class="listitem">
								Connection security: SSL/TLS
							</li><li class="listitem">
								Authentication method: PLAIN
							</li></ul></div></li><li class="listitem">
						Send an email to the user who has the Sieve script uploaded. If 
the email matches the rules in the script, verify that the server 
performs the defined actions.
					</li></ol></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<code class="literal">/usr/share/doc/dovecot/wiki/Pigeonhole.Sieve.Plugins.IMAPSieve.txt</code>
					</li><li class="listitem">
						<code class="literal">/usr/share/doc/dovecot/wiki/Pigeonhole.Sieve.Troubleshooting.txt</code>
					</li><li class="listitem">
						<code class="literal">firewall-cmd(1)</code> man page
					</li></ul></div></section><section class="section" id="how-dovecot-processes-configuration-files_configuring-and-maintaining-a-dovecot-imap-and-pop3-server"><div class="titlepage"><div><div><h2 class="title">1.9. How Dovecot processes configuration files</h2></div></div></div><p>
				The <code class="literal">dovecot</code> package provides the main configuration file <code class="literal">/etc/dovecot/dovecot.conf</code> and multiple configuration files in the <code class="literal">/etc/dovecot/conf.d/</code> directory. Dovecot combines the files to build the configuration when you start the service.
			</p><p>
				The main benefit of multiple config files is to group settings and 
increase readability. If you prefer a single configuration file, you can
 instead maintain all settings in <code class="literal">/etc/dovecot/dovecot.conf</code> and remove all <code class="literal">include</code> and <code class="literal">include_try</code> statements from that file.
			</p><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<code class="literal">/usr/share/doc/dovecot/wiki/ConfigFile.txt</code>
					</li><li class="listitem">
						<code class="literal">/usr/share/doc/dovecot/wiki/Variables.txt</code>
					</li></ul></div></section></section><section class="chapter" id="assembly_mail-transport-agent_deploying-mail-servers"><div class="titlepage"><div><div><h1 class="title">Chapter 2. Deploying and configuring a Postfix SMTP server</h1></div></div></div><p class="_abstract _abstract">
			As a system administrator, you can configure your email 
infrastructure by using a mail transport agent (MTA), such as Postfix, 
to transport email messages between hosts using the SMTP protocol. 
Postfix is a server-side application for routing and delivering mail. 
You can use Postfix to set up a local mail server, create a null-client 
mail relay, use a Postfix server as a destination for multiple domains, 
or choose an LDAP directory instead of files for lookups.
		</p><p>
			The key features of Postfix:
		</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
					Security features to protect against common email related threats
				</li><li class="listitem">
					Customization options, including support for virtual domains and aliases
				</li></ul></div><section class="section" id="con_postfix_assembly_mail-transport-agent"><div class="titlepage"><div><div><h2 class="title">2.1. Overview of the main Postfix configuration files</h2></div></div></div><p class="_abstract _abstract">
				The <code class="literal">postfix</code> package provides multiple configuration files in the <code class="literal">/etc/postfix/</code> directory.
			</p><p>
				To configure your email infrastructure, use the following configuration files:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						<code class="literal">main.cf</code> — contains the global configuration of Postfix.
					</li><li class="listitem">
						<code class="literal">master.cf</code> — specifies Postfix interaction with various processes to accomplish mail delivery.
					</li><li class="listitem">
						<code class="literal">access</code> — specifies access rules, for example hosts that are allowed to connect to Postfix.
					</li><li class="listitem">
						<code class="literal">transport</code> — maps email addresses to relay hosts.
					</li><li class="listitem">
						<code class="literal">aliases</code> — contains a configurable 
list required by the mail protocol that describes user ID aliases. Note 
that you can find this file in the <code class="literal">/etc/</code> directory.
					</li></ul></div></section><section class="section" id="proc_installing-and-configuring-postfix_assembly_mail-transport-agent"><div class="titlepage"><div><div><h2 class="title">2.2. Installing and configuring a Postfix SMTP server</h2></div></div></div><p class="_abstract _abstract">
				You can configure your Postfix SMTP server to receive, store, and 
deliver email messages. If the mail server package is not selected 
during the system installation, Postfix will not be available by 
default. Perform the following steps to install Postfix:
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						You have the root access.
					</li><li class="listitem">
						<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html-single/performing_a_standard_rhel_9_installation/index#subman-rhel8-setup_post-installation-tasks">Register your system</a>.
					</li><li class="listitem"><p class="simpara">
						Disable and remove Sendmail:
					</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--ismptav"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed"># <span class="strong strong"><strong>dnf remove sendmail</strong></span></pre></div></div></li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Install Postfix:
					</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--wihedhp"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed"># <span class="strong strong"><strong>dnf install postfix</strong></span></pre></div></div></li><li class="listitem"><p class="simpara">
						To configure Postfix, edit the <code class="literal">/etc/postfix/main.cf</code> file and make the following changes:
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
								By default, Postfix receives emails only on the <code class="literal">loopback</code> interface. To configure Postfix to listen on specific interfaces, update the <code class="literal">inet_interfaces</code> parameter to the IP addresses of these interfaces:
							</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--af1zk8b"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed">inet_interfaces = 127.0.0.1/32, [::1]/128, 192.0.2.1, [2001:db8:1::1]</pre></div></div><p class="simpara">
								To configure Postfix to listen on all interfaces, set:
							</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--a7zdmxg"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed">inet_interfaces = all</pre></div></div></li><li class="listitem"><p class="simpara">
								If you want that Postfix uses a different hostname than the fully-qualified domain name (FQDN) that is returned by the <code class="literal">gethostname()</code> function, add the <code class="literal">myhostname</code> parameter:
							</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--9ag5ij0"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed">myhostname = <span class="emphasis"><em>&lt;smtp.example.com&gt;</em></span></pre></div></div><p class="simpara">
								For example, Postfix adds this hostname to header of emails it processes.
							</p></li><li class="listitem"><p class="simpara">
								If the domain name differs from the one in the <code class="literal">myhostname</code> parameter, add the <code class="literal">mydomain</code> parameter:
							</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--e0auniq"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed">mydomain = <span class="emphasis"><em>&lt;example.com&gt;</em></span></pre></div></div></li><li class="listitem"><p class="simpara">
								Add the <code class="literal">myorigin</code> parameter and set it to the value of <code class="literal">mydomain</code>:
							</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--igavsqa"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed">myorigin = $mydomain</pre></div></div><p class="simpara">
								With this setting, Postfix uses the domain name as origin for locally posted mails instead of the hostname.
							</p></li><li class="listitem"><p class="simpara">
								Add the <code class="literal">mynetworks</code> parameter, and define the IP ranges of trusted networks that are allowed to send mails:
							</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--gijgozv"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed">mynetworks = 127.0.0.1/32, [::1]/128, 192.0.2.1/24, [2001:db8:1::1]/64</pre></div></div><p class="simpara">
								If clients from not trustworthy networks, such as the Internet, 
should be able to send mails through this server, you must configure 
relay restrictions in a later step.
							</p></li></ol></div></li><li class="listitem"><p class="simpara">
						Verify if the Postfix configuration in the <code class="literal">main.cf</code> file is correct:
					</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--mbwkefl"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed">$ <span class="strong strong"><strong>postfix check</strong></span></pre></div></div></li><li class="listitem"><p class="simpara">
						Enable the <code class="literal">postfix</code> service to start at boot and start it:
					</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--xickhoh"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed"># <span class="strong strong"><strong>systemctl enable --now postfix</strong></span></pre></div></div></li><li class="listitem"><p class="simpara">
						Allow the smtp traffic through firewall and reload the firewall rules:
					</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--9a2rcau"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed"># <span class="strong strong"><strong>firewall-cmd --permanent --add-service smtp</strong></span>

# <span class="strong strong"><strong>firewall-cmd --reload</strong></span></pre></div></div></li></ol></div><div class="orderedlist"><p class="title"><strong>Verification</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Verify that the <code class="literal">postfix</code> service is running:
					</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--4gfpxzl"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed"># <span class="strong strong"><strong>systemctl status postfix</strong></span></pre></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								Optional: Restart the <code class="literal">postfix</code> service, if the output is stopped, waiting, or the service is not running:
							</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--8jwr62d"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed"># <span class="strong strong"><strong>systemctl restart postfix</strong></span></pre></div></div></li><li class="listitem"><p class="simpara">
								Optional: Reload the <code class="literal">postfix</code> service after changing any options in the configuration files in the <code class="literal">/etc/postfix/</code> directory to apply those changes:
							</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--bgc9laf"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed"># <span class="strong strong"><strong>systemctl reload postfix</strong></span></pre></div></div></li></ul></div></li><li class="listitem"><p class="simpara">
						Verify the email communication between local users on your system:
					</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--glwphbt"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed"># <span class="strong strong"><strong>echo "This is a test message" | mail -s <span class="emphasis"><em>&lt;SUBJECT&gt;</em></span> <span class="emphasis"><em>&lt;user@mydomain.com&gt;</em></span></strong></span></pre></div></div></li><li class="listitem"><p class="simpara">
						Verify that your mail server is not an open relay by sending an 
email to an email address outside of your domain from a client (<span class="strong strong"><strong>server1</strong></span>) to your mail server (<span class="strong strong"><strong>server2</strong></span>):
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
								Edit the <code class="literal">/etc/postfix/main.cf</code> file for <span class="strong strong"><strong>server1</strong></span> as follows:
							</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--99ai8zs"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed">relayhost = <span class="emphasis"><em>&lt;ip_address_of_server2&gt;</em></span></pre></div></div></li><li class="listitem"><p class="simpara">
								Edit the <code class="literal">/etc/postfix/main.cf</code> file for <span class="strong strong"><strong>server2</strong></span> as follows:
							</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--2q3hvqg"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed">mynetworks = <span class="emphasis"><em>&lt;ip_address_of_server2&gt;</em></span></pre></div></div></li><li class="listitem"><p class="simpara">
								On <span class="strong strong"><strong>server1</strong></span>, send the following mail:
							</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--wuiry6q"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed"># <span class="strong strong"><strong>echo "This is an open relay test message" | mail -s <span class="emphasis"><em>&lt;SUBJECT&gt;</em></span> <span class="emphasis"><em>&lt;user@example.com&gt;</em></span></strong></span></pre></div></div></li><li class="listitem"><p class="simpara">
								Check the <code class="literal">/var/log/maillog</code> file:
							</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--1xsgjsc"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed">554 Relay access denied - the server is not going to relay.
250 OK or similar - the server is going to relay.</pre></div></div></li></ol></div></li></ol></div><div class="itemizedlist"><p class="title"><strong>Troubleshooting</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						In case of errors, check the <code class="literal">/var/log/maillog</code> file.
					</li></ul></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						The <code class="literal">/etc/postfix/main.cf</code> configuration file
					</li><li class="listitem">
						The <code class="literal">/usr/share/doc/postfix/README_FILES</code> directory
					</li><li class="listitem">
						<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/securing_networks/using-and-configuring-firewalld_securing-networks">Using and configuring firewalld</a>
					</li></ul></div></section><section class="section" id="proc_customizing-tls-settings-of-a-postfix-server_assembly_mail-transport-agent"><div class="titlepage"><div><div><h2 class="title">2.3. Customizing TLS settings of a Postfix server</h2></div></div></div><p class="_abstract _abstract">
				As a system administrator, you want encrypted and secure email 
traffic. In RHEL 9, the Transport Layer Security (TLS) encryption 
protocol is enabled in the Postfix server by default. The basic Postfix 
TLS configuration contains self-signed certificates for inbound SMTP and
 the opportunistic TLS for outbound SMTP. You can configure Postfix to 
use a certificate from a trusted certificate authority (CA) instead of 
the self-signed certificate and customize the TLS security settings.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						You have the root access.
					</li><li class="listitem">
						You have the <code class="literal">postfix</code> package installed on your server.
					</li><li class="listitem">
						You have a certificate signed by a trusted certificate authority (CA) and a private key.
					</li><li class="listitem"><p class="simpara">
						You have copied the following files to the Postfix server:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
								The server certificate: <code class="literal">/etc/pki/tls/certs/postfix.pem</code>
							</li><li class="listitem">
								The private key: <code class="literal">/etc/pki/tls/private/postfix.key</code>
							</li></ul></div></li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Set the path to the certificate and private key files on the 
server where Postfix is running by adding the following lines to the <code class="literal">/etc/postfix/main.cf</code> file:
					</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--4qwe7tq"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed">smtpd_tls_cert_file = /etc/pki/tls/certs/postfix.pem
smtpd_tls_key_file = /etc/pki/tls/private/postfix.key</pre></div></div></li><li class="listitem"><p class="simpara">
						Restrict the incoming SMTP connections to authenticated users only by editing the <code class="literal">/etc/postfix/main.cf</code> file:
					</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--l56snx0"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed">smtpd_tls_auth_only = yes</pre></div></div></li><li class="listitem"><p class="simpara">
						Reload the <code class="literal">postfix</code> service to apply the changes:
					</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--3jjckmi"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed"># <span class="strong strong"><strong>systemctl reload postfix</strong></span></pre></div></div></li></ol></div><div class="itemizedlist"><p class="title"><strong>Verification</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						Configure your client to use TLS encryption and send an email.
					</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							To get additional information about Postfix client TLS activity, increase the log level from <code class="literal">0</code> to <code class="literal">1</code> by changing the following line in the <code class="literal">/etc/postfix/main.cf</code>:
						</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--7a358n2"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed">smtp_tls_loglevel = 1</pre></div></div></div></div></li></ul></div></section><section class="section" id="proc_configuring-postfix-to-forward-all-emails-to-a-mail-relay_assembly_mail-transport-agent"><div class="titlepage"><div><div><h2 class="title">2.4. Configuring Postfix to forward all emails to a mail relay</h2></div></div></div><p class="_abstract _abstract">
				If you want to forward all email to a mail relay, you can configure 
Postfix server as a null client. In this configuration Postfix only 
forwards mail to a different mail server and is not capable of receiving
 mail.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						You have the root access.
					</li><li class="listitem">
						You have the <code class="literal">postfix</code> package installed on your server.
					</li><li class="listitem">
						You have the IP address or hostname of the relay host to which you want to forward emails.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						To prevent Postfix from accepting any local email delivery and making it a null client, edit the <code class="literal">/etc/postfix/main.cf</code> file and make the following changes:
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
								Configure Postfix to forward all email by setting the <code class="literal">mydestination</code> parameter equal to an empty value:
							</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--5aj7z2t"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed">mydestination =</pre></div></div><p class="simpara">
								In this configuration the Postfix server is not a destination for any email and acts as a null client.
							</p></li><li class="listitem"><p class="simpara">
								Specify the mail relay server that receives the email from your null client:
							</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--77hg5f5"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed">relayhost = <span class="emphasis"><em>&lt;[ip_address_or_hostname]&gt;</em></span></pre></div></div><p class="simpara">
								The relay host is responsible for the mail delivery. Enclose <code class="literal"><span class="emphasis"><em>&lt;ip_address_or_hostname&gt;</em></span></code> in square brackets.
							</p></li><li class="listitem"><p class="simpara">
								Configure the Postfix mail server to listen only on the loopback interface for emails to deliver:
							</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--7lpx8pc"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed">inet_interfaces = loopback-only</pre></div></div></li><li class="listitem"><p class="simpara">
								If you want Postfix to rewrite the sender domain of all outgoing
 emails to the company domain of your relay mail server, set:
							</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--pjval3a"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed">myorigin = <span class="emphasis"><em>&lt;relay.example.com&gt;</em></span></pre></div></div></li><li class="listitem"><p class="simpara">
								To disable the local mail delivery, add the following directive at the end of the configuration file:
							</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--0lg8l9k"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed">local_transport = error: local delivery disabled</pre></div></div></li><li class="listitem"><p class="simpara">
								Add the <code class="literal">mynetworks</code> parameter so 
that Postfix forwards email from the local system originating from the 
127.0.0.0/8 IPv4 network and the [::1]/128 IPv6 network to the mail 
relay server:
							</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--kds44kl"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed">mynetworks = 127.0.0.0/8, [::1]/128</pre></div></div></li></ol></div></li><li class="listitem"><p class="simpara">
						Verify if the Postfix configuration in the <code class="literal">main.cf</code> file is correct:
					</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--59jkczv"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed">$ <span class="strong strong"><strong>postfix check</strong></span></pre></div></div></li><li class="listitem"><p class="simpara">
						Restart the <code class="literal">postfix</code> service to apply the changes:
					</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--s5dkvn4"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed"># <span class="strong strong"><strong>systemctl restart postfix</strong></span></pre></div></div></li></ol></div><div class="itemizedlist"><p class="title"><strong>Verification</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						Verify that the email communication is forwarded to the mail relay:
					</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--xc7ayqu"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed"># <span class="strong strong"><strong>echo "This is a test message" | mail -s <span class="emphasis"><em>&lt;SUBJECT&gt;</em></span> <span class="emphasis"><em>&lt;user@example.com&gt;</em></span></strong></span></pre></div></div></li></ul></div><div class="itemizedlist"><p class="title"><strong>Troubleshooting</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						In case of errors, check the <code class="literal">/var/log/maillog</code> file.
					</li></ul></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						The <code class="literal">/etc/postfix/main.cf</code> configuration file
					</li></ul></div></section><section class="section" id="proc_configuring-postfix-as-a-destination-for-multiple-domains_assembly_mail-transport-agent"><div class="titlepage"><div><div><h2 class="title">2.5. Configuring Postfix as a destination for multiple domains</h2></div></div></div><p class="_abstract _abstract">
				You can configure Postfix as a mail server that can receive emails 
for multiple domains. In this configuration, Postfix acts as the final 
destination for emails sent to addresses within the specified domains. 
You can configure the following:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						Set up multiple email addresses that point to the same email destination
					</li><li class="listitem">
						Route incoming email for multiple domains to the same Postfix server
					</li></ul></div><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						You have the root access.
					</li><li class="listitem">
						You have configured a Postfix server.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						In the <code class="literal">/etc/postfix/virtual</code> virtual alias file, specify the email addresses for each domain. Add each email address on a new line:
					</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--f1qb8fm"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed"><span class="emphasis"><em>&lt;info@example.com&gt;</em></span>  <span class="emphasis"><em>&lt;user22@example.net&gt;</em></span>
<span class="emphasis"><em>&lt;sales@example.com&gt;</em></span>  <span class="emphasis"><em>&lt;user11@example.org&gt;</em></span></pre></div></div><p class="simpara">
						In this example, Postfix redirects all emails sent to 
info@example.com to user22@example.net and email sent to 
sales@example.com to user11@example.org.
					</p></li><li class="listitem"><p class="simpara">
						Create a hash file for the virtual alias map:
					</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--hwrv240"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed"># <span class="strong strong"><strong>postmap /etc/postfix/virtual</strong></span></pre></div></div><p class="simpara">
						This command creates the <code class="literal">/etc/postfix/virtual.db</code> file. Note that you must always re-run this command after you update the <code class="literal">/etc/postfix/virtual</code> file.
					</p></li><li class="listitem"><p class="simpara">
						In the Postfix <code class="literal">/etc/postfix/main.cf</code> configuration file, add the <code class="literal">virtual_alias_maps</code> parameter and point it to the hash file:
					</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--2c7ai5c"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed">virtual_alias_maps = hash:/etc/postfix/virtual</pre></div></div></li><li class="listitem"><p class="simpara">
						Reload the <code class="literal">postfix</code> service to apply the changes:
					</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--eu7tkr5"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed"># <span class="strong strong"><strong>systemctl reload postfix</strong></span></pre></div></div></li></ol></div><div class="itemizedlist"><p class="title"><strong>Verification</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						Test the configuration by sending an email to one of the virtual email addresses.
					</li></ul></div><div class="itemizedlist"><p class="title"><strong>Troubleshooting</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						In case of errors, check the <code class="literal">/var/log/maillog</code> file.
					</li></ul></div></section><section class="section" id="proc_using-an-ldap-directory-as-a-lookup-table_assembly_mail-transport-agent"><div class="titlepage"><div><div><h2 class="title">2.6. Using an LDAP directory as a lookup table</h2></div></div></div><p class="_abstract _abstract">
				If you use a Lightweight Directory Access Protocol (LDAP) server to 
store accounts, domains or aliases, you can configure Postfix to use the
 LDAP server as a lookup table. Using LDAP instead of files for lookups 
enables you to have a central database.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						You have the root access.
					</li><li class="listitem">
						You have the <code class="literal">postfix</code> package installed on your server.
					</li><li class="listitem">
						You have an LDAP server with the required schema and user credentials.
					</li><li class="listitem">
						You have the <code class="literal">postfix-ldap</code> plugin installed on the server running Postfix.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Configure the LDAP lookup parameters by creating a <code class="literal">/etc/postfix/ldap-aliases.cf</code> file with the following content:
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
								Specify the hostname of the LDAP server:
							</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--g9o7ctu"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed">server_host = <span class="emphasis"><em>&lt;ldap.example.com&gt;</em></span></pre></div></div></li><li class="listitem"><p class="simpara">
								Specify the base domain name for the LDAP search:
							</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--wclg7a2"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed">search_base = dc=<span class="emphasis"><em>&lt;example&gt;</em></span>,dc=<span class="emphasis"><em>&lt;com&gt;</em></span></pre></div></div></li><li class="listitem">
								Optional: Customize the LDAP search filter and attributes based 
on your requirements. The filter for searching the directory defaults to
 <code class="literal">query_filter = mailacceptinggeneralid=%s</code>.
							</li></ol></div></li><li class="listitem"><p class="simpara">
						Enable the LDAP source as a lookup table in the <code class="literal">/etc/postfix/main.cf</code> configuration file by adding the following content:
					</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--qcsouer"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed">virtual_alias_maps = ldap:/etc/postfix/ldap-aliases.cf</pre></div></div></li><li class="listitem"><p class="simpara">
						Verify the LDAP configuration by running the <code class="literal">postmap</code> command, which checks for any syntax errors or connectivity issues:
					</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--6xlr2q1"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed"># <span class="strong strong"><strong>postmap -q @<span class="emphasis"><em>&lt;example.com&gt;</em></span> ldap:/etc/postfix/ldap-aliases.cf</strong></span></pre></div></div></li><li class="listitem"><p class="simpara">
						Reload the <code class="literal">postfix</code> service to apply the changes:
					</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--0zemrka"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed"># <span class="strong strong"><strong>systemctl reload postfix</strong></span></pre></div></div></li></ol></div><div class="itemizedlist"><p class="title"><strong>Verification</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						Send a test email to verify that the LDAP lookup works correctly. Check the mail logs in <code class="literal">/var/log/maillog</code> for any errors.
					</li></ul></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<code class="literal">/usr/share/doc/postfix/README_FILES/LDAP_README</code> file
					</li><li class="listitem">
						<code class="literal">/usr/share/doc/postfix/README_FILES/DATABASE_README</code> file
					</li></ul></div></section><section class="section" id="proc_configuring-postfix-as-an-outgoing-mail-server-to-relay-for-authenticated-users_assembly_mail-transport-agent"><div class="titlepage"><div><div><h2 class="title">2.7. Configuring Postfix as an outgoing mail server to relay for authenticated users</h2></div></div></div><p class="_abstract _abstract">
				You can configure Postfix to relay mail for authenticated users. In 
this scenario, you allow users to authenticate themselves and use their 
email address to send mail through your SMTP server by configuring 
Postfix as an outgoing mail server with SMTP authentication, TLS 
encryption, and sender address restrictions.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						You have the root access.
					</li><li class="listitem">
						You have configured a Postfix server.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						To configure Postfix as an outgoing mail server, edit the <code class="literal">/etc/postfix/main.cf</code> file and add the following:
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
								Enable SMTP authentication:
							</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--fuc43f8"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed">smtpd_sasl_auth_enable = yes
broken_sasl_auth_clients = yes</pre></div></div></li><li class="listitem"><p class="simpara">
								Disable access without TLS:
							</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--1jhb853"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed">smtpd_tls_auth_only = yes</pre></div></div></li><li class="listitem"><p class="simpara">
								Allow mail relaying only for authenticated users:
							</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--zwd0ih3"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed">smtpd_relay_restrictions = permit_mynetworks permit_sasl_authenticated defer_unauth_destination</pre></div></div></li><li class="listitem"><p class="simpara">
								Optional: Restrict users to use their own email address only as a sender:
							</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--vxqigxg"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed">smtpd_sender_restrictions = reject_sender_login_mismatch</pre></div></div></li></ol></div></li><li class="listitem"><p class="simpara">
						Reload the <code class="literal">postfix</code> service to apply the changes:
					</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--6noiyd6"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed"># <span class="strong strong"><strong>systemctl reload postfix</strong></span></pre></div></div></li></ol></div><div class="itemizedlist"><p class="title"><strong>Verification</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						Authenticate in your SMTP client that supports TLS and SASL. Send 
an test email to verify that the SMTP authentication works correctly.
					</li></ul></div></section><section class="section" id="proc_delivering-email-from-postfix-to-dovecot-on-the-same-host_assembly_mail-transport-agent"><div class="titlepage"><div><div><h2 class="title">2.8. Delivering email from Postfix to Dovecot running on the same host</h2></div></div></div><p class="_abstract _abstract">
				You can configure Postfix to deliver incoming mail to Dovecot on the
 same host using LMTP over a UNIX socket. This socket enables direct 
communication between Postfix and Dovecot on the local machine.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						You have the root access.
					</li><li class="listitem">
						You have configured a Postfix server.
					</li><li class="listitem">
						You have configured a Dovecot server, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/deploying_mail_servers/configuring-and-maintaining-a-dovecot-imap-and-pop3-server_deploying-mail-servers#doc-wrapper">Configuring and maintaining a Dovecot IMAP and POP3 server</a>.
					</li><li class="listitem">
						You have configured the LMTP socket on your Dovecot server, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/deploying_mail_servers/configuring-and-maintaining-a-dovecot-imap-and-pop3-server_deploying-mail-servers#configuring-an-lmtp-socket-and-lmtps-listener_configuring-and-maintaining-a-dovecot-imap-and-pop3-server">Configuring an LMTP socket and LMTPS listener</a>.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Configure Postfix to use the LMTP protocol and the UNIX domain socket for delivering mail to Dovecot in the <code class="literal">/etc/postfix/main.cf</code> file:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								If you want to use virtual mailboxes, add the following content:
							</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--q43nlcx"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed">virtual_transport = lmtp:unix:/var/run/dovecot/lmtp</pre></div></div></li><li class="listitem"><p class="simpara">
								If you want to use non-virtual mailboxes, add the following content:
							</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--8bfojg4"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed">mailbox_transport = lmtp:unix:/var/run/dovecot/lmtp</pre></div></div></li></ul></div></li><li class="listitem"><p class="simpara">
						Reload <code class="literal">postfix</code> to apply the changes:
					</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--w7v6h01"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed"># <span class="strong strong"><strong>systemctl reload postfix</strong></span></pre></div></div></li></ol></div><div class="itemizedlist"><p class="title"><strong>Verification</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						Send an test email to verify that the LMTP socket works correctly. Check the mail logs in <code class="literal">/var/log/maillog</code> for any errors.
					</li></ul></div></section><section class="section" id="proc_delivering-email-from-postfix-to-dovecot-on-a-different-host_assembly_mail-transport-agent"><div class="titlepage"><div><div><h2 class="title">2.9. Delivering email from Postfix to Dovecot running on a different host</h2></div></div></div><p class="_abstract _abstract">
				You can establish a secure connection between Postfix mail server 
and the Dovecot delivery agent over the network. To do so, configure the
 LMTP service to use network socket for delivering mail between mail 
servers. By default, the LMTP protocol is not encrypted. However, if you
 configured TLS encryption, Dovecot uses the same settings automatically
 for the LMTP service. SMTP servers can then connect to it using the <code class="literal">STARTTLS</code> command over LMTP.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						You have the root access.
					</li><li class="listitem">
						You have configured a Postfix server.
					</li><li class="listitem">
						You have configured a Dovecot server, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/deploying_mail_servers/configuring-and-maintaining-a-dovecot-imap-and-pop3-server_deploying-mail-servers#doc-wrapper">Configuring and maintaining a Dovecot IMAP and POP3 server</a>.
					</li><li class="listitem">
						You have configured the LMTP service on your Dovecot server, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/deploying_mail_servers/configuring-and-maintaining-a-dovecot-imap-and-pop3-server_deploying-mail-servers#configuring-an-lmtp-socket-and-lmtps-listener_configuring-and-maintaining-a-dovecot-imap-and-pop3-server">Configuring an LMTP socket and LMTPS listener</a>.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Configure Postfix to use the LMTP protocol and the INET domain socket for delivering mail to Dovecot in the <code class="literal">/etc/postfix/main.cf</code> file by adding the following content:
					</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--x1cc75x"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed">mailbox_transport = lmtp:inet:<span class="emphasis"><em>&lt;dovecot_host&gt;</em></span>:<span class="emphasis"><em>&lt;port&gt;</em></span></pre></div></div><p class="simpara">
						Replace <code class="literal"><span class="emphasis"><em>&lt;dovecot_host&gt;</em></span></code> with the IP address or hostname of the Dovecot server and <code class="literal">&lt;port&gt;</code> with the port number of the LMTP service.
					</p></li><li class="listitem"><p class="simpara">
						Reload the <code class="literal">postfix</code> service to apply the changes:
					</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--mjvkzi2"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed"># <span class="strong strong"><strong>systemctl reload postfix</strong></span></pre></div></div></li></ol></div><div class="itemizedlist"><p class="title"><strong>Verification</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						Send an test email to an address hosted by the remote Dovecot 
server and check the Dovecot logs to ensure that the mail was 
successfully delivered.
					</li></ul></div></section><section class="section" id="assembly_securing-the-postfix-service_assembly_mail-transport-agent"><div class="titlepage"><div><div><h2 class="title">2.10. Securing the Postfix service</h2></div></div></div><p>
				Postfix is a mail transfer agent (MTA) that uses the Simple Mail 
Transfer Protocol (SMTP) to deliver electronic messages between other 
MTAs and to email clients or delivery agents. Although MTAs can encrypt 
traffic between one another, they might not do so by default. You can 
also mitigate risks to various attacks by changing setting to more 
secure values.
			</p><section class="section" id="ref_reducing-postfix-network-related-security-risks_assembly_securing-the-postfix-service"><div class="titlepage"><div><div><h3 class="title">2.10.1. Reducing Postfix network-related security risks</h3></div></div></div><p>
					To reduce the risk of attackers invading your system through the 
network, perform as many of the following tasks as possible.
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							Do not share the <code class="literal">/var/spool/postfix/</code>
 mail spool directory on a Network File System (NFS) shared volume. 
NFSv2 and NFSv3 do not maintain control over user and group IDs. 
Therefore, if two or more users have the same UID, they can receive and 
read each other’s mail, which is a security risk.
						</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
								This rule does not apply to NFSv4 using Kerberos, because the <code class="literal">SECRPC_GSS</code>
 kernel module does not use UID-based authentication. However, to reduce
 the security risks, you should not put the mail spool directory on NFS 
shared volumes.
							</p></div></div></li><li class="listitem">
							To reduce the probability of Postfix server exploits, mail users 
must access the Postfix server using an email program. Do not allow 
shell accounts on the mail server, and set all user shells in the <code class="literal">/etc/passwd</code> file to <code class="literal">/sbin/nologin</code> (with the possible exception of the <code class="literal">root</code> user).
						</li><li class="listitem">
							To protect Postfix from a network attack, it is set up to only 
listen to the local loopback address by default. You can verify this by 
viewing the <code class="literal">inet_interfaces = localhost</code> line in the <code class="literal">/etc/postfix/main.cf</code> file. This ensures that Postfix only accepts mail messages (such as <code class="literal">cron</code>
 job reports) from the local system and not from the network. This is 
the default setting and protects Postfix from a network attack. To 
remove the localhost restriction and allow Postfix to listen on all 
interfaces, set the <code class="literal">inet_interfaces</code> parameter to <code class="literal">all</code> in <code class="literal">/etc/postfix/main.cf</code>.
						</li></ul></div></section><section class="section" id="ref_postfix-configuration-options-for-limiting-dos-attacks_assembly_securing-the-postfix-service"><div class="titlepage"><div><div><h3 class="title">2.10.2. Postfix configuration options for limiting DoS attacks</h3></div></div></div><p>
					An attacker can flood the server with traffic, or send information 
that triggers a crash, causing a denial of service (DoS) attack. You can
 configure your system to reduce the risk of such attacks by setting 
limits in the <code class="literal">/etc/postfix/main.cf</code> file. You can change the value of the existing directives or you can add new directives with custom values in the <span class="emphasis"><em>&lt;directive&gt; = &lt;value&gt;</em></span> format.
				</p><p>
					Use the following list of directives for limiting a DoS attack:
				</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">smtpd_client_connection_rate_limit</span></dt><dd>
								This directive limits the maximum number of connection attempts 
any client can make to this service per time unit. The default value is <code class="literal">0</code>,
 which means a client can make as many connections per time unit as 
Postfix can accept. By default, the directive excludes clients in 
trusted networks.
							</dd><dt><span class="term">anvil_rate_time_unit</span></dt><dd>
								This directive is a time unit to calculate the rate limit. The default value is <code class="literal">60</code> seconds.
							</dd><dt><span class="term">smtpd_client_event_limit_exceptions</span></dt><dd>
								This directive excludes clients from the connection and rate 
limit commands. By default, the directive excludes clients in trusted 
networks.
							</dd><dt><span class="term">smtpd_client_message_rate_limit</span></dt><dd>
								This directive defines the maximum number of message deliveries 
from client to request per time unit (regardless of whether or not 
Postfix actually accepts those messages).
							</dd><dt><span class="term">default_process_limit</span></dt><dd>
								This directive defines the default maximum number of Postfix 
child processes that provide a given service. You can ignore this rule 
for specific services in the <code class="literal">master.cf</code> file. By default, the value is <code class="literal">100</code>.
							</dd><dt><span class="term">queue_minfree</span></dt><dd>
								This directive defines the minimum amount of free space required
 to receive mail in the queue file system. The directive is currently 
used by the Postfix SMTP server to decide if it accepts any mail at all.
 By default, the Postfix SMTP server rejects <code class="literal">MAIL FROM</code> commands when the amount of free space is less than 1.5 times the <code class="literal">message_size_limit</code>. To specify a higher minimum free space limit, specify a <code class="literal">queue_minfree</code> value that is at least 1.5 times the <code class="literal">message_size_limit</code>. By default, the <code class="literal">queue_minfree</code> value is <code class="literal">0</code>.
							</dd><dt><span class="term">header_size_limit</span></dt><dd>
								This directive defines the maximum amount of memory in bytes for
 storing a message header. If a header is large, it discards the excess 
header. By default, the value is <code class="literal">102400</code> bytes.
							</dd><dt><span class="term">message_size_limit</span></dt><dd>
								This directive defines the maximum size of a message including 
the envelope information in bytes. By default, the value is <code class="literal">10240000</code> bytes.
							</dd></dl></div></section><section class="section" id="proc_configuring-postfix-to-use-sasl_assembly_securing-the-postfix-service"><div class="titlepage"><div><div><h3 class="title">2.10.3. Configuring Postfix to use SASL</h3></div></div></div><p>
					Postfix supports Simple Authentication and Security Layer (SASL) 
based SMTP Authentication (AUTH). SMTP AUTH is an extension of the 
Simple Mail Transfer Protocol. Currently, the Postfix SMTP server 
supports the SASL implementations in the following ways:
				</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">Dovecot SASL</span></dt><dd>
								The Postfix SMTP server can communicate with the Dovecot SASL 
implementation using either a UNIX-domain socket or a TCP socket. Use 
this method if Postfix and Dovecot applications are running on separate 
machines.
							</dd><dt><span class="term">Cyrus SASL</span></dt><dd>
								When enabled, SMTP clients must authenticate with the SMTP 
server using an authentication method supported and accepted by both the
 server and the client.
							</dd></dl></div><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							The <code class="literal">dovecot</code> package is installed on the system
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Set up Dovecot:
						</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
									Include the following lines in the <code class="literal">/etc/dovecot/conf.d/10-master.conf</code> file:
								</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--d344il3"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed">service auth {
  unix_listener /var/spool/postfix/private/auth {
    mode = 0660
    user = postfix
    group = postfix
  }
}</pre></div></div><p class="simpara">
									The previous example uses UNIX-domain sockets for communication
 between Postfix and Dovecot. The example also assumes default Postfix 
SMTP server settings, which include the mail queue located in the <code class="literal">/var/spool/postfix/</code> directory, and the application running under the <code class="literal">postfix</code> user and group.
								</p></li><li class="listitem"><p class="simpara">
									Optional: Set up Dovecot to listen for Postfix authentication requests through TCP:
								</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--cb6z8ms"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed">service auth {
  inet_listener {
      port = <span class="emphasis"><em>port-number</em></span>
  }
}</pre></div></div></li><li class="listitem"><p class="simpara">
									Specify the method that the email client uses to authenticate with Dovecot by editing the <code class="literal">auth_mechanisms</code> parameter in <code class="literal">/etc/dovecot/conf.d/10-auth.conf</code> file:
								</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--4ruee07"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed">auth_mechanisms = plain login</pre></div></div><p class="simpara">
									The <code class="literal">auth_mechanisms</code> parameter supports different plaintext and non-plaintext authentication methods.
								</p></li></ol></div></li><li class="listitem"><p class="simpara">
							Set up Postfix by modifying the <code class="literal">/etc/postfix/main.cf</code> file:
						</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
									Enable SMTP Authentication on the Postfix SMTP server:
								</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--4duubhm"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed">smtpd_sasl_auth_enable = yes</pre></div></div></li><li class="listitem"><p class="simpara">
									Enable the use of Dovecot SASL implementation for SMTP Authentication:
								</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--15xrh60"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed">smtpd_sasl_type = dovecot</pre></div></div></li><li class="listitem"><p class="simpara">
									Provide the authentication path relative to the Postfix queue 
directory. Note that the use of a relative path ensures that the 
configuration works regardless of whether the Postfix server runs in <code class="literal">chroot</code> or not:
								</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--l3sedaq"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed">smtpd_sasl_path = private/auth</pre></div></div><p class="simpara">
									This step uses UNIX-domain sockets for communication between Postfix and Dovecot.
								</p><p class="simpara">
									To configure Postfix to look for Dovecot on a different machine
 in case you use TCP sockets for communication, use configuration values
 similar to the following:
								</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--592ohaj"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed">smtpd_sasl_path = inet: <span class="emphasis"><em>ip-address</em></span> : <span class="emphasis"><em>port-number</em></span></pre></div></div><p class="simpara">
									In the previous example, replace the <span class="emphasis"><em>ip-address</em></span> with the IP address of the Dovecot machine and <span class="emphasis"><em>port-number</em></span> with the port number specified in Dovecot’s <code class="literal">/etc/dovecot/conf.d/10-master.conf</code> file.
								</p></li><li class="listitem"><p class="simpara">
									Specify SASL mechanisms that the Postfix SMTP server makes 
available to clients. Note that you can specify different mechanisms for
 encrypted and unencrypted sessions.
								</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--0z9h9z0"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed">smtpd_sasl_security_options = noanonymous, noplaintext
smtpd_sasl_tls_security_options = noanonymous</pre></div></div><p class="simpara">
									The previous directives specify that during unencrypted 
sessions, no anonymous authentication is allowed and no mechanisms that 
transmit unencrypted user names or passwords are allowed. For encrypted 
sessions that use TLS, only non-anonymous authentication mechanisms are 
allowed.
								</p></li></ol></div></li></ol></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
							<a class="link" href="http://www.postfix.org/SASL_README.html#smtpd_sasl_security_options">Postfix SMTP server policy - SASL mechanism properties</a>
						</li><li class="listitem">
							<a class="link" href="https://doc.dovecot.org/configuration_manual/howto/postfix_and_dovecot_sasl/">Postfix and Dovecot SASL</a>
						</li><li class="listitem">
							<a class="link" href="http://www.postfix.org/SASL_README.html#server_sasl">Configuring SASL authentication in the Postfix SMTP server</a>
						</li></ul></div></section></section></section><div><div xml:lang="en-US" class="legalnotice" id="idm140563160147008"><h1 class="legalnotice">Legal Notice</h1><div class="para">
		Copyright <span class="trademark"><!--Empty--></span>© 2023 Red Hat, Inc.
	</div><div class="para">
		The text of and illustrations in this document are licensed by Red Hat
 under a Creative Commons Attribution–Share Alike 3.0 Unported license 
("CC-BY-SA"). An explanation of CC-BY-SA is available at <a class="uri" href="http://creativecommons.org/licenses/by-sa/3.0/">http://creativecommons.org/licenses/by-sa/3.0/</a>.
 In accordance with CC-BY-SA, if you distribute this document or an 
adaptation of it, you must provide the URL for the original version.
	</div><div class="para">
		Red Hat, as the licensor of this document, waives the right to 
enforce, and agrees not to assert, Section 4d of CC-BY-SA to the fullest
 extent permitted by applicable law.
	</div><div class="para">
		Red Hat, Red Hat Enterprise Linux, the Shadowman logo, the Red Hat 
logo, JBoss, OpenShift, Fedora, the Infinity logo, and RHCE are 
trademarks of Red Hat, Inc., registered in the United States and other 
countries.
	</div><div class="para">
		<span class="trademark">Linux</span>® is the registered trademark of Linus Torvalds in the United States and other countries.
	</div><div class="para">
		<span class="trademark">Java</span>® is a registered trademark of Oracle and/or its affiliates.
	</div><div class="para">
		<span class="trademark">XFS</span>® is a trademark of Silicon Graphics International Corp. or its subsidiaries in the United States and/or other countries.
	</div><div class="para">
		<span class="trademark">MySQL</span>® is a registered trademark of MySQL AB in the United States, the European Union and other countries.
	</div><div class="para">
		<span class="trademark">Node.js</span>® is an official trademark of 
Joyent. Red Hat is not formally related to or endorsed by the official 
Joyent Node.js open source or commercial project.
	</div><div class="para">
		The <span class="trademark">OpenStack</span>® Word Mark and OpenStack 
logo are either registered trademarks/service marks or 
trademarks/service marks of the OpenStack Foundation, in the United 
States and other countries and are used with the OpenStack Foundation's 
permission. We are not affiliated with, endorsed or sponsored by the 
OpenStack Foundation, or the OpenStack community.
	</div><div class="para">
		All other trademarks are the property of their respective owners.
	</div></div></div></div>


  <nav class="pvof-doc__book-nav">
  <ol class="book-nav__list">
              </ol>
</nav>


          </div>
              </div>
              <div id="comments-footer" class="book-comments">
          

  

        </div>
          </div>
  </article>
<meta itemscope="" itemref="md1">



    </div>
      <!-- CP_PRIMER_FOOTER -->            </div>
        </main>
    </div>
    <!--googleoff: all-->
    <div id="to-top"><a class="btn_slideto affix-top" href="#masthead" aria-label="Back to Top"><span class="web-icon-upload"></span></a></div>
    <footer class="footer-main">
        <div class="footer-top">
            <div class="container">

              <div class="brand">
                <a href="https://redhat.com/">
                  <svg class="rh-logo" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 613 145">
                    <defs>
                      <style>
                        .rh-logo-hat {
                          fill: #e00;
                        }
                        .rh-logo-type {
                          fill: #fff;
                        }
                      </style>
                    </defs>
                    <title>Red Hat</title>
                    <path class="rh-logo-hat" d="M127.47,83.49c12.51,0,30.61-2.58,30.61-17.46a14,14,0,0,0-.31-3.42l-7.45-32.36c-1.72-7.12-3.23-10.35-15.73-16.6C124.89,8.69,103.76.5,97.51.5,91.69.5,90,8,83.06,8c-6.68,0-11.64-5.6-17.89-5.6-6,0-9.91,4.09-12.93,12.5,0,0-8.41,23.72-9.49,27.16A6.43,6.43,0,0,0,42.53,44c0,9.22,36.3,39.45,84.94,39.45M160,72.07c1.73,8.19,1.73,9.05,1.73,10.13,0,14-15.74,21.77-36.43,21.77C78.54,104,37.58,76.6,37.58,58.49a18.45,18.45,0,0,1,1.51-7.33C22.27,52,.5,55,.5,74.22c0,31.48,74.59,70.28,133.65,70.28,45.28,0,56.7-20.48,56.7-36.65,0-12.72-11-27.16-30.83-35.78"></path>
                      <path class="rh-logo-band" d="M160,72.07c1.73,8.19,1.73,9.05,1.73,10.13,0,14-15.74,21.77-36.43,21.77C78.54,104,37.58,76.6,37.58,58.49a18.45,18.45,0,0,1,1.51-7.33l3.66-9.06A6.43,6.43,0,0,0,42.53,44c0,9.22,36.3,39.45,84.94,39.45,12.51,0,30.61-2.58,30.61-17.46a14,14,0,0,0-.31-3.42Z"></path>
                      <path class="rh-logo-type" d="M579.74,92.8c0,11.89,7.15,17.67,20.19,17.67a52.11,52.11,0,0,0,11.89-1.68V95a24.84,24.84,0,0,1-7.68,1.16c-5.37,0-7.36-1.68-7.36-6.73V68.3h15.56V54.1H596.78v-18l-17,3.68V54.1H568.49V68.3h11.25Zm-53,.32c0-3.68,3.69-5.47,9.26-5.47a43.12,43.12,0,0,1,10.1,1.26v7.15a21.51,21.51,0,0,1-10.63,2.63c-5.46,0-8.73-2.1-8.73-5.57m5.2,17.56c6,0,10.84-1.26,15.36-4.31v3.37h16.82V74.08c0-13.56-9.14-21-24.39-21-8.52,0-16.94,2-26,6.1l6.1,12.52c6.52-2.74,12-4.42,16.83-4.42,7,0,10.62,2.73,10.62,8.31v2.73a49.53,49.53,0,0,0-12.62-1.58c-14.31,0-22.93,6-22.93,16.73,0,9.78,7.78,17.24,20.19,17.24m-92.44-.94h18.09V80.92h30.29v28.82H506V36.12H487.93V64.41H457.64V36.12H439.55ZM370.62,81.87c0-8,6.31-14.1,14.62-14.1A17.22,17.22,0,0,1,397,72.09V91.54A16.36,16.36,0,0,1,385.24,96c-8.2,0-14.62-6.1-14.62-14.09m26.61,27.87h16.83V32.44l-17,3.68V57.05a28.3,28.3,0,0,0-14.2-3.68c-16.19,0-28.92,12.51-28.92,28.5a28.25,28.25,0,0,0,28.4,28.6,25.12,25.12,0,0,0,14.93-4.83ZM320,67c5.36,0,9.88,3.47,11.67,8.83H308.47C310.15,70.3,314.36,67,320,67M291.33,82c0,16.2,13.25,28.82,30.28,28.82,9.36,0,16.2-2.53,23.25-8.42l-11.26-10c-2.63,2.74-6.52,4.21-11.14,4.21a14.39,14.39,0,0,1-13.68-8.83h39.65V83.55c0-17.67-11.88-30.39-28.08-30.39a28.57,28.57,0,0,0-29,28.81M262,51.58c6,0,9.36,3.78,9.36,8.31S268,68.2,262,68.2H244.11V51.58Zm-36,58.16h18.09V82.92h13.77l13.89,26.82H292l-16.2-29.45a22.27,22.27,0,0,0,13.88-20.72c0-13.25-10.41-23.45-26-23.45H226Z"></path>
                  </svg>
                </a>
              </div>

              <div role="navigation" aria-label="quick">
                  <h3>Quick Links</h3>
                  <ul>
                      <li><a class="download-software" href="https://access.redhat.com/downloads/">Downloads</a></li>
                      <li><a class="manage-subscriptions" href="https://access.redhat.com/management">Subscriptions</a></li>
                      <li><a class="support-cases" href="https://access.redhat.com/support">Support Cases</a></li>
                      <li><a class="customer-service" href="https://access.redhat.com/support/customer-service">Customer Service</a></li>
                      <li><a class="quick-docs" href="https://access.redhat.com/documentation">Product Documentation</a></li>
                  </ul>
              </div>

              <div role="navigation" aria-label="help">
                  <h3>Help</h3>
                  <ul>
                      <li><a class="contact-us" href="https://access.redhat.com/support/contact/">Contact Us</a></li>
                      <li><a class="cp-faqs" href="https://access.redhat.com/articles/33844">Customer Portal FAQ</a></li>
                      <li><a class="login-problems" href="https://access.redhat.com/help/login_assistance">Log-in Assistance</a></li>
                  </ul>
              </div>

              <div role="navigation" aria-label="site">
                  <h3>Site Info</h3>
                  <ul>
                      <li><a class="trust-red-hat" href="https://www.redhat.com/en/trust">Trust Red Hat</a></li>
                      <li><a class="browser-support-policy" href="https://www.redhat.com/en/about/browser-support">Browser Support Policy</a></li>
                      <li><a class="accessibility" href="https://www.redhat.com/en/about/digital-accessibility">Accessibility</a></li>
                      <li><a class="recognition" href="https://access.redhat.com/recognition/">Awards and Recognition</a></li>
                      <li><a class="colophon" href="https://access.redhat.com/help/colophon/">Colophon</a></li>
                  </ul>
              </div>

              <div role="navigation" aria-label="other">
                  <h3>Related Sites</h3>
                  <ul>
                      <li><a href="https://www.redhat.com/" class="red-hat-com">redhat.com</a></li>
                      <li><a href="http://developers.redhat.com/" class="red-hat-developers">developers.redhat.com</a></li>
                      <li><a href="https://connect.redhat.com/" class="partner-connect">connect.redhat.com</a></li>
                      <li><a href="https://cloud.redhat.com/" class="cloud-com">cloud.redhat.com</a></li>
                  </ul>
              </div>

              <div role="navigation" aria-label="about">
                  <h3>About</h3>
                  <ul>
                      <li><a href="https://access.redhat.com/subscription-value" class="subscription-value">Red Hat Subscription Value</a></li>
                      <li><a href="https://www.redhat.com/about/" class="about-red-hat">About Red Hat</a></li>
                      <li><a href="http://jobs.redhat.com/" class="about-jobs">Red Hat Jobs</a></li>
                  </ul>
              </div>

            </div>
        </div>

        <div class="anchor">
            <div class="container">
                <div class="status-legal">
                    <a href="https://status.redhat.com/" class="status-page-widget">
                        <span class="status-description">All systems operational</span>
                        <span class="status-dot shape-circle shape-dash-lime"></span>
                    </a>
                    <div class="legal-copyright">
                        <div class="copyright">Copyright © 2023 Red Hat, Inc.</div>

                        <div role="navigation" aria-label="legal" class="legal">
                            <ul>
                                <li><a href="http://www.redhat.com/en/about/privacy-policy" class="privacy-policy">Privacy Statement</a></li>
                                <li><a href="https://www.redhat.com/en/about/terms-use" class="terms-of-use">Terms of Use</a></li>
                                <li><a href="http://www.redhat.com/en/about/all-policies-guidelines" class="all-policies">All Policies and Guidelines</a></li>
                                <li><a id="teconsent" consent="0,1,2"><a role="link" id="icon-id029929417207840014" tabindex="0" aria-haspopup="dialog" aria-label="Cookie Preferences, opens a dedicated popup modal window" class="truste_cursor_pointer" lang="en">Cookie preferences</a></a></li>
                            </ul>
                        </div>
                    </div>
                </div>
                <div class="social">
                    <a href="http://www.redhat.com/summit/" class="summit">
                        <img src="Deploying%20mail%20servers%20Red%20Hat%20Enterprise%20Linux%209%20Red%20Hat%20Customer%20Portal_files/rh-summit-red-a.svg" alt="Red Hat Summit"> <span class="offscreen">Red Hat Summit</span>
                    </a>

                    <div class="social-media">
                        <a href="https://twitter.com/RedHat" class="sm-icon twitter"><span class="nicon-twitter"></span><span class="offscreen">Twitter</span></a>                        
                    </div>
                </div>
            </div>
        </div>
    </footer>
    <!-- TrustArc -->
    <div id="consent_blackbar"></div> 
    <!--googleon: all-->
</div>
<!-- /CP_PRIMER_FOOTER -->


  </div>

    
  

<script>_satellite["_runScript2"](function(event, target, Promise) {
window._sdi=window._sdi||{},window._sdi.addEventHandler=window.addEventListener?function(e,i,t){e.addEventListener(i,t,!1)}:function(e,i,t){e.attachEvent("on"+i,t)},window._sdi.addEventHandler(window,"message",(function(e){var i={},t=0;(-1!==e.origin.indexOf("loop=1")||e.srcElement&&e.srcElement.playerOptions&&1==e.srcElement.playerOptions.loop)&&(t=1);var a=0;if(e.srcElement&&e.srcElement.playerOptions&&1==e.srcElement.playerOptions.autoplay&&(a=1),e.origin.match(/youtube\.com/)&&"undefined"!=typeof JSON&&!t&&!a){i=JSON.parse(e.data);var n=window._sdi.yt.videos;if("infoDelivery"==i.event){var d,o={};for(var r in i.info.videoData&&((o=n[d=i.info.videoData.video_id]||{}).info=i.info,o.id=i.id,n[d]=o),window._sdi.yt.videos){(c=window._sdi.yt.videos[r]).id==i.id&&(o=c)}var s=window._sdi.yt.sc||{};o.info&&(Math.abs(i.info.currentTime-o.info.currentTime)>1.5&&!0===s.track&&(s.s().Media.stop(o.info.videoData.title,o.info.currentTime),"paused"!=o.state&&s.s().Media.play(o.info.videoData.title,i.info.currentTime)),o.info.currentTime=i.info.currentTime),2==i.info.playerState&&(s.s().Media.stop(o.info.videoData.title,o.info.currentTime),o.state="paused"),1==i.info.playerState&&(o.started?!0===s.track&&s.s().Media.play(o.info.videoData.title,o.info.currentTime):(o.started=!0,!0===s.track&&(s.s().Media.open(o.info.videoData.title,o.info.duration,"youtube"),s.s().Media.play(o.info.videoData.title,o.info.currentTime))),o.state="playing"),3==i.info.playerState&&o.started&&(!0===s.track&&s.s().Media.stop(o.info.videoData.title,o.info.currentTime),o.state="paused"),0===i.info.playerState&&(!0===s.track&&(s.s().Media.stop(o.info.videoData.title,o.info.currentTime),s.s().Media.close(o.info.videoData.title)),o.state="completed")}else if("onStateChange"==i.event){for(var r in window._sdi.yt.videos){var c;(c=window._sdi.yt.videos[r]).id==i.id&&(o=c)}s=window._sdi.yt.sc||{};1==i.info&&(o.started?!0===s.track&&s.s().Media.play(o.info.videoData.title,o.info.currentTime):(o.started=!0,!0===s.track&&(s.s().Media.open(o.info.videoData.title,o.info.duration,"youtube"),"paused"!=o.state&&s.s().Media.play(o.info.videoData.title,i.info.currentTime))),o.state="playing"),2==i.info&&(!0===s.track&&s.s().Media.stop(o.info.videoData.title,o.info.currentTime),o.state="paused"),3==i.info&&o.started&&(!0===s.track&&s.s().Media.stop(o.info.videoData.title,o.info.currentTime),o.state="paused"),0===i.info&&(!0===s.track&&(s.s().Media.stop(o.info.videoData.title,o.info.currentTime),s.s().Media.close(o.info.videoData.title)),o.state="completed")}}})),window._sdi.loadScript=function(e,i){var t=document.createElement("script");t.type="text/javascript",i&&"function"==typeof i&&(t.readyState?t.onreadystatechange=function(){"loaded"!==t.readyState&&"complete"!==t.readyState||(t.onreadystatechange=null,i())}:t.onload=function(){i()}),t.src=e,document.getElementsByTagName("head")[0].appendChild(t)},window._sdi.yt={stages:{},players:{},sc:{track:!0,s:function(){return window.s}},init:function(){for(var e=document.getElementsByTagName("script"),i=!1,t=(window._sdi.yt.videos,0);t<e.length;t++){(e[t].src||"").match(/youtube\.com\/iframe_api/)&&(i=!0)}!1===i?window._sdi.loadScript("//www.youtube.com/iframe_api",(function(){window._sdi.yt.ready("api")})):window._sdi.yt.ready("api")},ready:function(e){window._sdi.yt.stages[e]=!0,window._sdi.yt.stages.dom&&window._sdi.yt.stages.api&&window._sdi.yt.checkIframes()},checkIframes:function(){var e=window._sdi.yt.videos,i=1e3,t=0;document.querySelectorAll("iframe[src*=youtube][data-sdiyt]").forEach((a=>{if("true"==a.dataset.sdiyt)return!1;if(-1!=a.src.indexOf("loop=1"))var n=null;else{var d;n=a.src.match(/h?t?t?p?s?\:?\/\/www\.youtube(-nocookie)?\.com\/embed\/([\w-]{11})(?:\?.*)?/)}if(n){d=n.length>2?n[2]:"",a.id||(a.id=d+t,t++);var o=!1;if(a.src.match(/enablejsapi=1/)||(a.src+=(a.src.indexOf("?")>-1?"&":"?")+"enablejsapi=1",o=!0),o){var r=a.cloneNode(!0);r.src=a.src,r.id=a.id,a.replaceWith(r)}else"undefined"!=typeof YT&&void 0!==YT.get?(ready=!0,e[d]={},(!YT.get(a.id)||void 0===YT.get(a.id).v&&void 0!==YT.get(a.id).v.videoId)&&(e[d].player=new YT.Player(a.id,{events:{onReady:function(){},onStateChange:function(){},videoId:a.id}})),a.setAttribute("data-sdiyt","true")):i=100}})),setTimeout((function(){window._sdi.yt.checkIframes()}),i)},videos:{}},void 0!==window._sdi&&void 0!==window._sdi.addEventHandler&&window._sdi.addEventHandler(window,"load",(function(){document.querySelectorAll('iframe[src*="youtube"]').length>=1?(window._sdi.yt.init(),window._sdi.yt.ready("dom")):window._sdi.ytinterval=setInterval((function(){document.querySelectorAll('iframe[src*="youtube"]').length>=1&&(window._sdi.yt.init(),window._sdi.yt.ready("dom"),clearInterval(window._sdi.ytinterval))}),500)}));
});</script><script>_satellite["_runScript3"](function(event, target, Promise) {
var dataLayerName="appEventData",reservedAttributes=["event"],internalDomains=[],downloadExtensions=["doc","docx","eps","jpg","png","svg","xls","ppt","pptx","pdf","xlsx","tab","csv","zip","txt","vsd","vxd","xml","js","css","rar","exe","wma","mov","avi","wmv","mp3","wav","m4v"],parseAttributes=function(t){var e={};for(var n in t.dataset)if("analytics"===n.substr(0,9)){var a=n.replace("analytics","");e[a[0]?a[0].toLocaleLowerCase()+a.slice(1):""]=t.dataset[n]}return e},addAttributes=function(t,e){return isJavascript(t)&&(e.isJavascript=!0),isDownload(t)&&(e.isDownload=!0),isCrossPropertyDomain(t)&&(e.isCrossPropertyDomain=!0,e.linkTypeName="cross property link"),isCta(t)&&(e.isCta=!0,e.linkTypeName="cta link"),isExitLink(t)&&(e.isExitLink=!0,e.linkTypeName="exit link"),isFooter(t)&&(e.isFooter=!0),isInternalCampaign(t)&&(e.isInternalCampaign=!0),isPromoSection(t)&&(e.isPromoSection=!0),isSearchContainer(t)&&(e.isSearchContainer=!0),e.targetHost=getHostName(t.href),e.internalCampaign=window._sdi.util.getQueryParam("icid",t.href)||window._sdi.util.getQueryParam("intcmp",t.href),e},getLinkText=function(t){return t.getAttribute("data-analytics-text")||t.getAttribute("sObjectId")||t.getAttribute("s-object-id")||t.getAttribute("sObjectID")||t.getAttribute("data-s-object-id")||t.innerText&&""!==t.innerText.trim()&&t.innerText.trim()||t.textContent&&""!==t.textContent.trim()&&t.textContent.trim()||t.querySelector("[alt]")&&t.querySelector("[alt]").getAttribute("alt")||t.querySelector("[title]")&&t.querySelector("[title]").getAttribute("title")||t.getAttribute("aria-label")||t.href||"unknown"},getRegions=function(t,e){if(e=e||[],!t)return e;var n=t.closest("[data-analytics-region]");return n?(e.push(n.dataset.analyticsRegion),e=getRegions(n.parentElement,e)):e},removeReservedAttributes=function(t){return reservedAttributes.forEach((function(e){delete t[e]})),t},redactEmail=function(t){return t.replace(/[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,6}/gi,"email_address_redacted")},buildDataObject=function(t,e,n){return n=n||getRegions(t),{event:buildEventName(t,e,n),linkInfo:Object.assign({href:t.href,regions:n.reverse().join("|"),text:redactEmail(getLinkText(t))},removeReservedAttributes(e))}},buildEventName=function(t,e,n){if(e.event)return e.event;var a={};if(n=n||getRegions(t))for(var i=0;i<n.length;i++)if(a[n[i]])return a[n[i]];return"Master Link Clicked"},findRootElement=function(t){if(t)return t.closest("a, [data-analytics-event]")},isJavascript=function(t){return new RegExp("^javascript:","i").test(t.href)},isDownload=function(t){return new RegExp(".("+downloadExtensions.join("|")+")$","i").test(t.href)},isInternalDomain=function(t){return new RegExp(internalDomains.join("|"),"i").test(t.href)},isExitLink=function(t){return!!t.href&&!new RegExp(_satellite.getVar("exitExclusionArray").join("|"),"i").test(t.href)},isCrossPropertyDomain=function(t){return document.location.hostname!==getHostName(t.href)&&"access.cdn.redhat.com"!==getHostName(t.href)&&new RegExp(_satellite.getVar("redHatDomains").join("|"),"i").test(getHostName(t.href))},isCta=function(t){return!(!t.classList.contains("cta-primary")&&"primary"!=t.getAttribute("data-rh-cta-type")&&"primary"!=t.getAttribute("data-ux-cta-type"))},isTab=function(t){return!!(t.classList.contains('[data-toggle="tab"]')||t.classList.contains("pfe-accordion-header")||t.classList.contains('[role="tab"]')||t.classList.contains("ux-vtab-nav-link")||t.classList.contains("ux-tile-nav-link")||t.classList.contains("btn-brick")||t.classList.contains("ux-htab-nav-link")||t.classList.contains("ux-horizontal-tab-nav-link")||t.classList.contains("ux-oss-hub-filter-type-text")||t.classList.contains("ux-htabb-nav-link")||"tab"==t.getAttribute("data-toggle")||"PFE-ACCORDION-HEADER"==t.tagName||"tab"==t.getAttribute("role"))},isFooter=function(t){return el=t.closest("footer"),"undefined"!=typeof el&&null!=el},isInternalCampaign=function(t){return(""!=window._sdi.util.getQueryParam("icid",t.href)||""!=window._sdi.util.getQueryParam("intcmp",t.href))&&(linkRole=t.getAttribute("role")||"",_satellite.logger.log("isInternalCampaign: linkRole:",linkRole),"tab"!==linkRole||void 0)},isPromoSection=function(t){return el=t.closest("div.band-hero"),"undefined"!=typeof el&&null!=el},isSearchContainer=function(t){return _satellite.logger.log("isSearchContainer ran"),el=t.closest("div.cp-sidebar")||t.closest("div.cp-search-results"),_satellite.logger.log("isSearchContainer el",el),_satellite.logger.log("isSearchContainer return","undefined"!=typeof el&&null!=el&&document.location.href.indexOf("search")>-1),"undefined"!=typeof el&&null!=el&&document.location.href.indexOf("search")>-1},getHostName=function(e){return t=document.createElement("a"),t.href=e,t.hostname},pushEvent=function(t){window.appEventData=window.appEventData||[],console.info("Pushing to the dataLayer",t);var e=window[dataLayerName];Array.isArray(e)&&e.push(t)};window.analyticsHelper=window.analyticsHelper||{},window.analyticsHelper.parseCustomEvent=function(t,e,n){_satellite.logger.log("target:",t);var a=parseAttributes(t),i=null,r=getRegions(t);if(e)i=e.closest("[data-analytics-region]");else{var s=t.getRootNode();s&&s.host&&(i=t.getRootNode().host.closest("[data-analytics-region]"))}i&&(r=r.concat(getRegions(i))),"expand"===n&&r.includes("mega menu")&&(a.event="Mega Menu Expanded"),"expand"===n&&r.includes("site-switcher")&&(a.event="Site Switcher Expanded"),"true"!==a.istab&&"true"!==a.isTab||(a.event="Tab Link Clicked",tabHref=t.getAttribute("href")||getLinkText(t)||"",tabHref=tabHref.trim(),a.tabHref=tabHref),_satellite.logger.log("attributes",a),_satellite.logger.log("event type",n),_satellite.logger.log("regions",r),a=addAttributes(t,a);var o=buildDataObject(t,a,r);o.event&&pushEvent(o)};var clickHandler=function(t){if(!(t.target&&t.target.tagName&&t.target.tagName.indexOf("-")>0)){var e=findRootElement(t.target);if(e){var n=parseAttributes(e);isTab(e)&&(n.event="Tab Link Clicked",tabHref=e.getAttribute("href")||getLinkText(e)||"",tabHref=tabHref.trim(),n.tabHref=tabHref),n=addAttributes(e,n);var a=buildDataObject(e,n);a.event&&pushEvent(a)}}};document.addEventListener("click",clickHandler,!0),document.addEventListener("pfe-tabs:shown-tab",(function(t){if(window.analyticsHelper&&"function"==typeof window.analyticsHelper.parseCustomEvent){var e=t.target.closest("pfe-content-set")||t.target.closest("pfe-tabs"),n=null;if(e){if("PFE-CONTENT-SET"===e.tagName){var a=t.detail.tab.querySelector("slot");if(a)(n=e.getSlot(a.getAttribute("name")))&&(n=e.getSlot(t.detail.tab.querySelector("slot").getAttribute("name"))[0])}else n=t.detail.tab;n?(n.setAttribute("data-analytics-isTab","true"),_satellite.logger.info("Called pfe-tabs:shown-tab:parseCustomEvent clicked"),window.analyticsHelper.parseCustomEvent(n,e,"clicked")):console.warn("Wasn't able to find the tabTextWrapper")}else console.warn("Wasn't able to find the componentParent")}})),document.addEventListener("pfe-accordion:change",(function(t){if(window.analyticsHelper&&"function"==typeof window.analyticsHelper.parseCustomEvent){var e=t.target.closest("pfe-content-set")||t.target.closest("pfe-accordion");if(t.detail.expanded){var n="PFE-ACCORDION-HEADER"===t.target.tagName?t.target:t.path[0];if(e&&"PFE-CONTENT-SET"===e.tagName){var a=n.querySelector("slot");if(a){var i=e.getSlot(a.getAttribute("name"));i&&i[0]&&(n=i[0])}}n&&n.setAttribute("data-analytics-isTab","true"),_satellite.logger.info("Called pfe-accordion:change:parseCustomEvent expand"),window.analyticsHelper.parseCustomEvent(n,e,"expand")}}})),document.addEventListener("pfe-shadow-dom-event",(function(t){window.analyticsHelper&&"function"==typeof window.analyticsHelper.parseCustomEvent&&window.analyticsHelper.parseCustomEvent(t.detail.target,t.detail.parentComponent,"click")})),document.addEventListener("pfe-navigation:expanded-item",(function(t){window.analyticsHelper&&"function"==typeof window.analyticsHelper.parseCustomEvent&&window.analyticsHelper.parseCustomEvent(t.detail.toggle,t.target,"expand")}));
});</script><div id="ZN_bCxD2jjWRr4bfVQ"></div><script type="text/javascript" src="Deploying%20mail%20servers%20Red%20Hat%20Enterprise%20Linux%209%20Red%20Hat%20Customer%20Portal_files/Untitled.js"></script><script src="Deploying%20mail%20servers%20Red%20Hat%20Enterprise%20Linux%209%20Red%20Hat%20Customer%20Portal_files/CoreModule.js" defer="defer"></script><script>_satellite["_runScript4"](function(event, target, Promise) {
_satellite.getVar("eloqua_Tag");
});</script><script>_satellite["_runScript5"](function(event, target, Promise) {
var body=document.body,html=document.documentElement,pageHeight=Math.max(body.scrollHeight,body.offsetHeight,html.clientHeight,html.scrollHeight,html.offsetHeight),viewportHeight=window.innerHeight,initialPercent=viewportHeight/pageHeight,maxInterval=0;initialPercent=initialPercent>1?100:Math.round(100*initialPercent);var maxScroll=Math.floor(initialPercent);_satellite.cookie.set("sat_ppv",maxScroll,{domain:".redhat.com"});var ticking=!1,s=window.scrollY;document.addEventListener("scroll",(()=>{ticking||(window.requestAnimationFrame((()=>{var t=document.body,e=document.documentElement;s=window.scrollY;var i=Math.max(t.scrollHeight,t.offsetHeight,e.clientHeight,e.scrollHeight,e.offsetHeight),o=window.innerHeight,l=s/(i-o)*100;l>maxScroll&&(maxScroll=Math.floor(l)),_satellite.cookie.set("sat_ppv",maxScroll,{domain:".redhat.com"}),ticking=!1})),ticking=!0)}),{passive:!0});
});</script><script>
if("yes"==_satellite.getVar("tagsAllowedFunc")){var profileID=_satellite.getVar("profileID")||"";if(profileID)try{!function(e){!function(t,n,i,a,o){var c,l,r,f,s;for((o=t[a]=t[a]||{})._q=[],l=0,r=(c=["initialize","identify","updateOptions","pageLoad"]).length;l<r;++l)!function(e){o[e]=o[e]||function(){o._q[e===c[0]?"unshift":"push"]([e].concat([].slice.call(arguments,0)))}}(c[l]);(f=n.createElement(i)).async=!0,f.src="https://cdn.pendo.io/agent/static/"+e+"/pendo.js",(s=n.getElementsByTagName(i)[0]).parentNode.insertBefore(f,s)}(window,document,"script","pendo"),setTimeout((function(){"undefined"!=typeof pendo&&pendo.initialize({visitor:{id:_satellite.getVar("profileID"),internal:"",lang:""},account:{id:_satellite.getVar("accountID"),account_number:_satellite.getVar("accountID")}})}),2e3)}("f210c485-387f-43ad-4eee-f55bab22507f")}catch(e){}}
</script></body></html>