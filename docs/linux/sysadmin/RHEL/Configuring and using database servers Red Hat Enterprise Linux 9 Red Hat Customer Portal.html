<!DOCTYPE html>
<html dir="ltr" prefix="og: https://ogp.me/ns#" class=" js supports cssanimations flexbox csstransforms csstransforms3d" style="" lang="en"><head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8"><style>body {transition: opacity ease-in 0.2s; } 
body[unresolved] {opacity: 0; display: block; overflow: hidden; position: relative; } 
</style><style type="text/css">.truste_cursor_pointer {cursor: pointer;}.truste_border_none {border: none;}</style>
    <meta charset="utf-8">
<link rel="canonical" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html-single/configuring_and_using_database_servers/index">
<link rel="shortlink" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html-single/configuring_and_using_database_servers/index">
<meta property="og:site_name" content="Red Hat Customer Portal">
<meta property="og:type" content="article">
<meta property="og:url" content="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html-single/configuring_and_using_database_servers/index">
<meta property="og:title" content="Configuring and using database servers Red Hat Enterprise Linux 9 | Red Hat Customer Portal">
<meta property="og:description" content="Install the MariaDB, MySQL, or PostgreSQL database server on Red&nbsp;Hat Enterprise&nbsp;Linux&nbsp;9. Configure the chosen database server, back up your data, and migrate your data to a later version of the database server.">
<meta property="og:image" content="https://access.redhat.com/webassets/avalon/g/shadowman-200.png">
<meta name="twitter:card" content="summary">
<meta name="twitter:description" content="Install the MariaDB, MySQL, or PostgreSQL database server on Red&nbsp;Hat Enterprise&nbsp;Linux&nbsp;9. Configure the chosen database server, back up your data, and migrate your data to a later version of the database server.">
<meta name="twitter:title" content="Configuring and using database servers Red Hat Enterprise Linux 9 | Red Hat Customer Portal">
<meta name="twitter:url" content="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html-single/configuring_and_using_database_servers/index">
<meta name="twitter:image" content="https://access.redhat.com/webassets/avalon/g/shadowman-200.png">
<meta name="title" content="Configuring and using database servers Red Hat Enterprise Linux 9 | Red Hat Customer Portal">
<link rel="alternate" hreflang="en" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html-single/configuring_and_using_database_servers/index">
<link rel="alternate" hreflang="ko" href="https://access.redhat.com/documentation/ko-kr/red_hat_enterprise_linux/9/html-single/configuring_and_using_database_servers/index">
<link rel="alternate" hreflang="zh-hans" href="https://access.redhat.com/documentation/zh-cn/red_hat_enterprise_linux/9/html-single/configuring_and_using_database_servers/index">
<link rel="alternate" hreflang="ja" href="https://access.redhat.com/documentation/ja-jp/red_hat_enterprise_linux/9/html-single/configuring_and_using_database_servers/index">
<link rel="alternate" hreflang="es" href="https://access.redhat.com/documentation/es-es/red_hat_enterprise_linux/9/html-single/configuring_and_using_database_servers/index">
<link rel="alternate" hreflang="ru" href="https://access.redhat.com/documentation/ru-ru/red_hat_enterprise_linux/9/html-single/configuring_and_using_database_servers/index">
<link rel="alternate" hreflang="pt-br" href="https://access.redhat.com/documentation/pt-br/red_hat_enterprise_linux/9/html-single/configuring_and_using_database_servers/index">
<link rel="alternate" hreflang="it" href="https://access.redhat.com/documentation/it-it/red_hat_enterprise_linux/9/html-single/configuring_and_using_database_servers/index">
<link rel="alternate" hreflang="de" href="https://access.redhat.com/documentation/de-de/red_hat_enterprise_linux/9/html-single/configuring_and_using_database_servers/index">
<link rel="alternate" hreflang="fr" href="https://access.redhat.com/documentation/fr-fr/red_hat_enterprise_linux/9/html-single/configuring_and_using_database_servers/index">
<link rel="alternate" hreflang="zh-hant" href="https://access.redhat.com/documentation/zh-tw/red_hat_enterprise_linux/9/html-single/configuring_and_using_database_servers/index">
<meta name="Generator" content="Drupal 9 (https://www.drupal.org)">
<meta name="MobileOptimized" content="width">
<meta name="HandheldFriendly" content="true">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="revision" product="0ad2e1c5-8cc7-4fb9-8e05-1c2d8c07d005" title="eb96de51-71ec-4623-9b36-c306c7bd59af" page="e6a076d3-9000-4084-b2c3-2c3bfea08364" revision="a41065ed68feff8c14c888f9c86a5430447b3ffa:en-us" body="734eafcdf85cb167e68e83efb32d649f.html" toc="ad79f2bbad23ade1254bb06902d7289e.json">

    <title>Configuring and using database servers Red Hat Enterprise Linux 9 | Red Hat Customer Portal</title>
    <link rel="stylesheet" media="all" href="Configuring%20and%20using%20database%20servers%20Red%20Hat%20Enterprise%20Linux%209%20Red%20Hat%20Customer%20Portal_files/css_87GMcmxT1ib8ziQiU2KUAnTDFtZQV6iP-KGslA9LigM.css">
<link rel="stylesheet" media="all" href="Configuring%20and%20using%20database%20servers%20Red%20Hat%20Enterprise%20Linux%209%20Red%20Hat%20Customer%20Portal_files/css__Xq4GfgPDJw9K_yYJFmlRZGJeCENu3R3r4s0K7Tr_9g.css">

    
    <script type="application/json" data-drupal-selector="drupal-settings-json">{"path":{"baseUrl":"\/","scriptPath":null,"pathPrefix":"","currentPath":"documentation\/en-us\/red_hat_enterprise_linux\/9\/html-single\/configuring_and_using_database_servers\/index","currentPathIsAdmin":false,"isFront":false,"currentLanguage":"en"},"pluralDelimiter":"\u0003","suppressDeprecationErrors":true,"red_hat_jwt":{"client_id":"customer-portal","cookie_name":"rh_jwt","leeway":"0","realm":"redhat-external","sso_host":"https:\/\/sso.redhat.com\/","user_integration":1,"user_plugin":"drupal_user_auth","use_external_js":0,"use_internal_js":0,"use_in_admin":0},"user":{"uid":0,"permissionsHash":"e301988aec96403b7b03860ee81161237ee18c188536caa2bfab8701012b505e"}}</script>
<script src="Configuring%20and%20using%20database%20servers%20Red%20Hat%20Enterprise%20Linux%209%20Red%20Hat%20Customer%20Portal_files/js_EQWKo9EokWkWS99x_e1oM-NEM0zlKyTkp_83mGdm5Ks.js"></script>

    <!-- CP_PRIMER_HEAD -->  <!-- TrustArc & DTM -->
  <script src="Configuring%20and%20using%20database%20servers%20Red%20Hat%20Enterprise%20Linux%209%20Red%20Hat%20Customer%20Portal_files/trustarc.js"></script><script type="text/javascript" src="Configuring%20and%20using%20database%20servers%20Red%20Hat%20Enterprise%20Linux%209%20Red%20Hat%20Customer%20Portal_files/notice" id="truste_0.7687453481949733"></script>
  <script src="Configuring%20and%20using%20database%20servers%20Red%20Hat%20Enterprise%20Linux%209%20Red%20Hat%20Customer%20Portal_files/dtm.js"></script><script src="Configuring%20and%20using%20database%20servers%20Red%20Hat%20Enterprise%20Linux%209%20Red%20Hat%20Customer%20Portal_files/AppMeasurement.min.js" async=""></script><script src="Configuring%20and%20using%20database%20servers%20Red%20Hat%20Enterprise%20Linux%209%20Red%20Hat%20Customer%20Portal_files/AppMeasurement_Module_ActivityMap.min.js" async=""></script><script src="Configuring%20and%20using%20database%20servers%20Red%20Hat%20Enterprise%20Linux%209%20Red%20Hat%20Customer%20Portal_files/AppMeasurement_Module_AudienceManagement.min.js" async=""></script><script id="mktgJS" src="Configuring%20and%20using%20database%20servers%20Red%20Hat%20Enterprise%20Linux%209%20Red%20Hat%20Customer%20Portal_files/rh.mktg.js"></script><script>_satellite["_runScript1"](function(event, target, Promise) {
var targetWaitAttempts = 0;

var awaitBody = function(offer){
	//mbox call has returned, ensure <body> exists, then add the mbox DIV
	var docBody  = document.getElementsByTagName("body"),
		int_mbox;
	if(docBody.length){
		int_mbox = document.createElement("div");
		docBody = docBody[0];
		int_mbox.id = "int_mbox";
		int_mbox.classList.add("mboxDefault");
		int_mbox.style.display = "none";
		//place mbox DIV as first tag within BODY
		docBody.insertBefore(int_mbox, docBody.firstChild);
	
		//now that receiving DIV is in place, inject the offer code
		adobe.target.applyOffer({
			"mbox": "int_mbox",
			"selector": "#int_mbox",
			"offer": offer
		});
	
		//and then un-hide the mbox DIV
		int_mbox.style.display = "block";
	}else{
		setTimeout(function(){awaitBody(offer)},100);
	}
}

var awaitTarget = function(){
	if (typeof adobe !== "undefined" && typeof adobe.target !== "undefined" && typeof adobe.target.getOffer !== "undefined") {
		//First get the mbox call going out
		adobe.target.getOffer({
			"mbox": "int_mbox",
			"success": function(offer) {
				awaitBody(offer);
			},
			// Handle errors gracefully
			"error": function(status, error) {}
		});
	}else{
		if(++targetWaitAttempts < 50){
			setTimeout(awaitTarget,100);
		}
	}
}
awaitTarget();
});</script><script src="Configuring%20and%20using%20database%20servers%20Red%20Hat%20Enterprise%20Linux%209%20Red%20Hat%20Customer%20Portal_files/v1.7-920" async="async" crossorigin="" importance="high"></script><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<!--[if IEMobile]><meta http-equiv="cleartype" content="on"><![endif]-->

<!-- metaInclude -->
<meta name="avalon-host-info" content="dxp-kbase-prod-138-57cf79cd99-wkvtp">
<meta name="avalon-version" content="eb0593bd">
<meta name="cp-chrome-build-date" content="2023-09-01T18:06:20.591Z">

<meta name="viewport" content="width=device-width, initial-scale=1">

<!-- Chrome, Firefox OS and Opera -->
<meta name="theme-color" content="#000000">
<!-- Windows Phone -->
<meta name="msapplication-navbutton-color" content="#000000">
<!-- iOS Safari -->
<meta name="apple-mobile-web-app-status-bar-style" content="#000000">
<link rel="manifest" href="https://access.redhat.com/webassets/avalon/j/manifest.json">
<!-- Open Search - Tap to search -->
<link rel="search" type="application/opensearchdescription+xml" title="Red Hat Customer Portal" href="https://access.redhat.com/webassets/avalon/j/opensearch.xml">
<!-- title -->
<title>Red Hat Customer Portal - Access to 24x7 support and knowledge</title>
<!-- /title -->
<script type="text/javascript">
    window.portal = {
        analytics : {},
        host      : "https://access.redhat.com",
        idp_url   : "https://sso.redhat.com",
        lang      : "en", 
        version   : "eb0593bd",
        builddate : "2023-09-01T18:06:20.591Z",        fetchdate : "2023-09-03T14:30:08-0400",        nrid      : "NOLONGERSUPPORTED",
        nrlk      : "NOLONGERSUPPORTED"
    };
</script>
<script type="text/javascript">
    if (!/\/logout.*/.test(location.pathname) && portal.host === location.origin && document.cookie.indexOf('rh_sso_session') >= 0 && !(document.cookie.indexOf('rh_jwt') >= 0)) window.location = '/login?redirectTo=' + encodeURIComponent(window.location.href);
</script>
<!-- cssInclude -->

<link rel="shortcut icon" href="https://access.redhat.com/webassets/avalon/g/favicon.ico"><link media="all" rel="stylesheet" type="text/css" href="Configuring%20and%20using%20database%20servers%20Red%20Hat%20Enterprise%20Linux%209%20Red%20Hat%20Customer%20Portal_files/bootstrap.css">
<link media="all" rel="stylesheet" type="text/css" href="Configuring%20and%20using%20database%20servers%20Red%20Hat%20Enterprise%20Linux%209%20Red%20Hat%20Customer%20Portal_files/bootstrap-grid.css">
<link media="all" rel="stylesheet" type="text/css" href="Configuring%20and%20using%20database%20servers%20Red%20Hat%20Enterprise%20Linux%209%20Red%20Hat%20Customer%20Portal_files/main.css">



<link href="Configuring%20and%20using%20database%20servers%20Red%20Hat%20Enterprise%20Linux%209%20Red%20Hat%20Customer%20Portal_files/chosen.css" rel="stylesheet" type="text/css">

<!--[if lte IE 9]>
<link media="all" rel="stylesheet" type="text/css" href="https://access.redhat.com/chrome_themes/nimbus/css/ie.css" />
<![endif]--><noscript>
    <style type="text/css" media="screen"> .primary-nav { display: block; } </style>
</noscript>
<link media="all" rel="stylesheet" type="text/css" href="Configuring%20and%20using%20database%20servers%20Red%20Hat%20Enterprise%20Linux%209%20Red%20Hat%20Customer%20Portal_files/pfe-navigation--lightdom.min.css">
<!-- /cssInclude -->
<script src="Configuring%20and%20using%20database%20servers%20Red%20Hat%20Enterprise%20Linux%209%20Red%20Hat%20Customer%20Portal_files/ie-polyfills.js"></script>

<script async="">
  if (!HTMLScriptElement.supports || !HTMLScriptElement.supports('importmap')) {
    import("https://www.redhatstatic.com/dx/v1-alpha/es-module-shims@1.7.3.js");
  }
</script>
<script type="importmap">
{
  "imports": {
    "@patternfly/elements/" : "https://www.redhatstatic.com/dx/v1-alpha/@patternfly/elements@2.2.2/",
    "@rhds/elements/":"https://www.redhatstatic.com/dx/v1-alpha/@rhds/elements@1.1.0/elements/",
    "@rhds/elements/lib/":"https://www.redhatstatic.com/dx/v1-alpha/@rhds/elements@1.1.0/lib/",
    "@cpelements/elements/":"https://www.redhatstatic.com/dx/v1-alpha/@cpelements/elements@2.0.0-alpha.7/elements/"
  }
}
</script><script type="text/javascript" src="Configuring%20and%20using%20database%20servers%20Red%20Hat%20Enterprise%20Linux%209%20Red%20Hat%20Customer%20Portal_files/require.js" data-main="/webassets/avalon/j/"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<script src="https://access.redhat.com/chrome_themes/nimbus/js/ie8.js"></script>
<![endif]-->
<script type="text/javascript" src="Configuring%20and%20using%20database%20servers%20Red%20Hat%20Enterprise%20Linux%209%20Red%20Hat%20Customer%20Portal_files/new-nav.js"></script>
<!-- /CP_PRIMER_HEAD -->

  <script src="Configuring%20and%20using%20database%20servers%20Red%20Hat%20Enterprise%20Linux%209%20Red%20Hat%20Customer%20Portal_files/RC89cb5efc622a491caa02ca11adc4672f-source.min.js" async=""></script><script src="Configuring%20and%20using%20database%20servers%20Red%20Hat%20Enterprise%20Linux%209%20Red%20Hat%20Customer%20Portal_files/RC4291db99e867433ca8496d298dca09cb-source.min.js" async=""></script><link href="data:text/css,%5Bid*%3D'google_ads_iframe'%5D%2C%5Bid*%3D'taboola-'%5D%2C.taboolaHeight%2C.taboola-placeholder%2C%23credential_picker_container%2C%23credentials-picker-container%2C%23credential_picker_iframe%2C%5Bid*%3D'google-one-tap-iframe'%5D%2C%23google-one-tap-popup-container%2C.google-one-tap-modal-div%2C%23amp_floatingAdDiv%2C%23ez-content-blocker-container%2C%23notify-adblock%7Bdisplay%3Anone!important%3Bmin-height%3A0!important%3Bheight%3A0!important%3B%7D" rel="stylesheet" type="text/css"><script src="Configuring%20and%20using%20database%20servers%20Red%20Hat%20Enterprise%20Linux%209%20Red%20Hat%20Customer%20Portal_files/prompt.js"></script><script charset="utf-8" src="Configuring%20and%20using%20database%20servers%20Red%20Hat%20Enterprise%20Linux%209%20Red%20Hat%20Customer%20Portal_files/12.2158c5447122fa995560.chunk.js"></script><script type="text/javascript" charset="utf-8" async="" data-requirecontext="_" data-requiremodule="https://access.redhat.com/webassets/avalon/j/lib/require-css/require.css.min.js" src="Configuring%20and%20using%20database%20servers%20Red%20Hat%20Enterprise%20Linux%209%20Red%20Hat%20Customer%20Portal_files/require.css.min.js"></script><script type="text/javascript" charset="utf-8" async="" data-requirecontext="_" data-requiremodule="rhn-modal" src="Configuring%20and%20using%20database%20servers%20Red%20Hat%20Enterprise%20Linux%209%20Red%20Hat%20Customer%20Portal_files/rhn-modal.js"></script><script type="text/javascript" charset="utf-8" async="" data-requirecontext="_" data-requiremodule="status-widget" src="Configuring%20and%20using%20database%20servers%20Red%20Hat%20Enterprise%20Linux%209%20Red%20Hat%20Customer%20Portal_files/status-widget.js"></script><script type="text/javascript" charset="utf-8" async="" data-requirecontext="_" data-requiremodule="avatars" src="Configuring%20and%20using%20database%20servers%20Red%20Hat%20Enterprise%20Linux%209%20Red%20Hat%20Customer%20Portal_files/avatars.js"></script><script type="text/javascript" charset="utf-8" async="" data-requirecontext="_" data-requiremodule="cookie-monster" src="Configuring%20and%20using%20database%20servers%20Red%20Hat%20Enterprise%20Linux%209%20Red%20Hat%20Customer%20Portal_files/cookie-monster.js"></script><script type="text/javascript" charset="utf-8" async="" data-requirecontext="_" data-requiremodule="pfe" src="Configuring%20and%20using%20database%20servers%20Red%20Hat%20Enterprise%20Linux%209%20Red%20Hat%20Customer%20Portal_files/pfe.js"></script><script type="text/javascript" charset="utf-8" async="" data-requirecontext="_" data-requiremodule="wc" src="Configuring%20and%20using%20database%20servers%20Red%20Hat%20Enterprise%20Linux%209%20Red%20Hat%20Customer%20Portal_files/wc.js"></script><script type="text/javascript" charset="utf-8" async="" data-requirecontext="_" data-requiremodule="nimbus/searchbar" src="Configuring%20and%20using%20database%20servers%20Red%20Hat%20Enterprise%20Linux%209%20Red%20Hat%20Customer%20Portal_files/searchbar.js"></script><script type="text/javascript" charset="utf-8" async="" data-requirecontext="_" data-requiremodule="webcomponentsjs/custom-elements-es5-adapter" src="Configuring%20and%20using%20database%20servers%20Red%20Hat%20Enterprise%20Linux%209%20Red%20Hat%20Customer%20Portal_files/custom-elements-es5-adapter.js"></script><script type="text/javascript" charset="utf-8" async="" data-requirecontext="_" data-requiremodule="webcomponentsjs/webcomponents-bundle" src="Configuring%20and%20using%20database%20servers%20Red%20Hat%20Enterprise%20Linux%209%20Red%20Hat%20Customer%20Portal_files/webcomponents-bundle.js"></script><script charset="utf-8" src="Configuring%20and%20using%20database%20servers%20Red%20Hat%20Enterprise%20Linux%209%20Red%20Hat%20Customer%20Portal_files/7.41dc96447e48575a0cfd.chunk.js"></script><script charset="utf-8" src="Configuring%20and%20using%20database%20servers%20Red%20Hat%20Enterprise%20Linux%209%20Red%20Hat%20Customer%20Portal_files/1.e4bb9861ae9a0d936559.chunk.js"></script><script type="text/javascript" charset="utf-8" async="" data-requirecontext="_" data-requiremodule="data-action" src="Configuring%20and%20using%20database%20servers%20Red%20Hat%20Enterprise%20Linux%209%20Red%20Hat%20Customer%20Portal_files/data-action.js"></script><script type="text/javascript" charset="utf-8" async="" data-requirecontext="_" data-requiremodule="public_modules/@patternfly/pfe-icon/dist/pfe-icon.umd.min" src="Configuring%20and%20using%20database%20servers%20Red%20Hat%20Enterprise%20Linux%209%20Red%20Hat%20Customer%20Portal_files/pfe-icon.umd.min.js"></script><script type="text/javascript" charset="utf-8" async="" data-requirecontext="_" data-requiremodule="public_modules/@patternfly/pfe-cta/dist/pfe-cta.umd.min" src="Configuring%20and%20using%20database%20servers%20Red%20Hat%20Enterprise%20Linux%209%20Red%20Hat%20Customer%20Portal_files/pfe-cta.umd.min.js"></script><script type="text/javascript" charset="utf-8" async="" data-requirecontext="_" data-requiremodule="public_modules/@patternfly/pfe-avatar/dist/pfe-avatar.umd.min" src="Configuring%20and%20using%20database%20servers%20Red%20Hat%20Enterprise%20Linux%209%20Red%20Hat%20Customer%20Portal_files/pfe-avatar.umd.min.js"></script><script type="text/javascript" charset="utf-8" async="" data-requirecontext="_" data-requiremodule="public_modules/@cpelements/cp-search-autocomplete/dist/cp-search-autocomplete.umd.min" src="Configuring%20and%20using%20database%20servers%20Red%20Hat%20Enterprise%20Linux%209%20Red%20Hat%20Customer%20Portal_files/cp-search-autocomplete.umd.min.js"></script><script type="text/javascript" charset="utf-8" async="" data-requirecontext="_" data-requiremodule="public_modules/@cpelements/rh-site-switcher/dist/site-switcher.umd.min" src="Configuring%20and%20using%20database%20servers%20Red%20Hat%20Enterprise%20Linux%209%20Red%20Hat%20Customer%20Portal_files/site-switcher.umd.min.js"></script><script type="text/javascript" charset="utf-8" async="" data-requirecontext="_" data-requiremodule="public_modules/@cpelements/pfe-navigation/dist/pfe-navigation.umd.min" src="Configuring%20and%20using%20database%20servers%20Red%20Hat%20Enterprise%20Linux%209%20Red%20Hat%20Customer%20Portal_files/pfe-navigation.umd.min.js"></script><script type="text/javascript" charset="utf-8" async="" data-requirecontext="_" data-requiremodule="nimbus/tour" src="Configuring%20and%20using%20database%20servers%20Red%20Hat%20Enterprise%20Linux%209%20Red%20Hat%20Customer%20Portal_files/tour.js"></script><script type="text/javascript" charset="utf-8" async="" data-requirecontext="_" data-requiremodule="public_modules/@patternfly/pfelement/dist/pfelement.umd.min" src="Configuring%20and%20using%20database%20servers%20Red%20Hat%20Enterprise%20Linux%209%20Red%20Hat%20Customer%20Portal_files/pfelement.umd.min.js"></script><script type="text/javascript" charset="utf-8" async="" data-requirecontext="_" data-requiremodule="public_modules/@patternfly/pfe-autocomplete/dist/pfe-autocomplete.umd.min" src="Configuring%20and%20using%20database%20servers%20Red%20Hat%20Enterprise%20Linux%209%20Red%20Hat%20Customer%20Portal_files/pfe-autocomplete.umd.min.js"></script><script type="text/javascript" charset="utf-8" async="" data-requirecontext="_" data-requiremodule="introjs" src="Configuring%20and%20using%20database%20servers%20Red%20Hat%20Enterprise%20Linux%209%20Red%20Hat%20Customer%20Portal_files/introjs.min.js"></script><script type="text/javascript" charset="utf-8" async="" data-requirecontext="_" data-requiremodule="moment" src="Configuring%20and%20using%20database%20servers%20Red%20Hat%20Enterprise%20Linux%209%20Red%20Hat%20Customer%20Portal_files/moment.js"></script><script type="text/javascript" charset="utf-8" async="" data-requirecontext="_" data-requiremodule="public_modules/@patternfly/pfe-button/dist/pfe-button.umd.min" src="Configuring%20and%20using%20database%20servers%20Red%20Hat%20Enterprise%20Linux%209%20Red%20Hat%20Customer%20Portal_files/pfe-button.umd.min.js"></script><script type="text/javascript" charset="utf-8" async="" data-requirecontext="_" data-requiremodule="public_modules/@patternfly/pfe-primary-detail/dist/pfe-primary-detail.umd.min" src="Configuring%20and%20using%20database%20servers%20Red%20Hat%20Enterprise%20Linux%209%20Red%20Hat%20Customer%20Portal_files/pfe-primary-detail.umd.min.js"></script><script type="text/javascript" charset="utf-8" async="" data-requirecontext="_" data-requiremodule="ieSVGfix" src="Configuring%20and%20using%20database%20servers%20Red%20Hat%20Enterprise%20Linux%209%20Red%20Hat%20Customer%20Portal_files/ieSVGfix.js"></script><script type="text/javascript" charset="utf-8" async="" data-requirecontext="_" data-requiremodule="public_modules/@cpelements/rh-account-dropdown/dist/rh-account-dropdown.umd.min" src="Configuring%20and%20using%20database%20servers%20Red%20Hat%20Enterprise%20Linux%209%20Red%20Hat%20Customer%20Portal_files/rh-account-dropdown.umd.min.js"></script><script type="text/javascript" charset="utf-8" async="" data-requirecontext="_" data-requiremodule="public_modules/@patternfly/pfe-clipboard/dist/pfe-clipboard.umd.min" src="Configuring%20and%20using%20database%20servers%20Red%20Hat%20Enterprise%20Linux%209%20Red%20Hat%20Customer%20Portal_files/pfe-clipboard.umd.min.js"></script><script type="text/javascript" charset="utf-8" async="" data-requirecontext="_" data-requiremodule="prism" src="Configuring%20and%20using%20database%20servers%20Red%20Hat%20Enterprise%20Linux%209%20Red%20Hat%20Customer%20Portal_files/prism.js"></script><script src="Configuring%20and%20using%20database%20servers%20Red%20Hat%20Enterprise%20Linux%209%20Red%20Hat%20Customer%20Portal_files/RC1badf0bc400d462b892df3a5874c0bc4-source.min.js" async=""></script><script src="Configuring%20and%20using%20database%20servers%20Red%20Hat%20Enterprise%20Linux%209%20Red%20Hat%20Customer%20Portal_files/RCb1afac0346e94d81bf645b608336061e-source.min.js" async=""></script><script src="Configuring%20and%20using%20database%20servers%20Red%20Hat%20Enterprise%20Linux%209%20Red%20Hat%20Customer%20Portal_files/RCa65a5b793a1a4b4abe76ffa69f30f470-source.min.js" async=""></script></head>
  <body class="en loggedOut">
    
      <div class="dialog-off-canvas-main-canvas" data-off-canvas-main-canvas="">
      <!-- CP_PRIMER_HEADER -->
<div id="page-wrap" class="page-wrap">
    <div id="pers-top-page-wrap" class="top-page-wrap pers-loader-bg">

      <div id="hero-bg-top-left" class="summit-bg-shapes"></div>
      <div id="hero-bg-top-right" class="summit-bg-shapes"></div>

        <!--googleoff: all-->
        <header class="masthead" id="masthead">

            <a href="#pfe-navigation" id="global-skip-to-nav" class="skip-link visually-hidden">Skip to navigation</a>
            <a href="#doc-wrapper" class="skip-link visually-hidden">Skip to main content</a>            <nav id="portal-utility-nav" class="utility-navigation utility-navigation--bar hidden-at-mobile" data-analytics-region="utility" aria-labelledby="nav__utility-nav--desktop">
                <h3 id="nav__utility-nav--desktop" class="element-invisible">Utilities
                </h3>
                <ul aria-labelledby="nav__utility-nav--desktop">
                    <li id="nav-subscription" data-portal-tour-1="1">
                        <a class="top-nav-subscriptions" data-analytics-level="2" data-analytics-category="Utilities" data-analytics-text="Subscription" href="https://access.redhat.com/management/">Subscriptions
                        </a>
                    </li>
                    <li id="nav-downloads" data-portal-tour-1="2">
                        <a class="top-nav-downloads" data-analytics-level="2" data-analytics-category="Utilities" data-analytics-text="Downloads" href="https://access.redhat.com/downloads/">Downloads
                        </a>
                    </li>
                    <li id="nav-containers">
                        <a class="top-nav-containers" data-analytics-level="2" data-analytics-category="Utilities" data-analytics-text="Containers" href="https://catalog.redhat.com/software/containers/explore/">Containers
                        </a>
                    </li>
                    <li id="nav-support" data-portal-tour-1="3">
                        <a class="top-nav-support-cases" data-analytics-level="2" data-analytics-category="Utilities" data-analytics-text="Support Cases" href="https://access.redhat.com/support/cases/">Support Cases
                        </a>
                    </li>
                </ul>
            </nav>

            <pfe-navigation id="pfe-navigation" data-analytics-region="mega menu" pfelement="" class="PFElement pfe-navigation--processed pfe-navigation--has-search pfe-navigation--custom-dropdowns--processed" type="combo" has_search="" has_account="" breakpoint="desktop" lang="en">
                <div class="pfe-navigation__logo-wrapper" id="pfe-navigation__logo-wrapper">
                    <a href="https://access.redhat.com/" class="pfe-navigation__logo-link" data-analytics-text="logo" data-analytics-category="MM|logo">
                        <img class="pfe-navigation__logo-image" alt="Red Hat Customer Portal" src="Configuring%20and%20using%20database%20servers%20Red%20Hat%20Enterprise%20Linux%209%20Red%20Hat%20Customer%20Portal_files/red-hat-customer-portal.svg">
                    </a>
                </div>

                <nav class="pfe-navigation" aria-label="Main Navigation" data-analytics-region="main nav">
                    <ul class="pfe-navigation__menu" id="pfe-navigation__menu">                        <li class="pfe-navigation__menu-item hidden-at-tablet hidden-at-desktop" id="nav-subscription--mobile" data-portal-tour-1="1">
                            <a class="pfe-navigation__menu-link" data-analytics-level="1" data-analytics-text="Subscription" href="https://access.redhat.com/management/">Subscriptions
                            </a>
                        </li>
                        <li class="pfe-navigation__menu-item hidden-at-tablet hidden-at-desktop" id="nav-downloads--mobile" data-portal-tour-1="2">
                            <a class="pfe-navigation__menu-link" data-analytics-level="1" data-analytics-text="Downloads" href="https://access.redhat.com/downloads/">Downloads
                            </a>
                        </li>
                        <li class="pfe-navigation__menu-item hidden-at-tablet hidden-at-desktop" id="nav-containers--mobile">
                            <a class="pfe-navigation__menu-link" data-analytics-level="1" data-analytics-text="Containers" href="https://catalog.redhat.com/software/containers/explore/">Containers
                            </a>
                        </li>
                        <li class="pfe-navigation__menu-item hidden-at-tablet hidden-at-desktop" id="nav-support--mobile" data-portal-tour-1="3">
                            <a class="pfe-navigation__menu-link" data-analytics-level="1" data-analytics-text="Support Cases" href="https://access.redhat.com/support/cases/">Support Cases
                            </a>
                        </li>                        <li class="pfe-navigation__menu-item">
                            <a href="https://access.redhat.com/products/" class="pfe-navigation__menu-link" data-analytics-level="1" data-analytics-text="Products and Services">Products &amp; Services
                            </a>
                            <div class="pfe-navigation__dropdown has-primary-detail">                                <div class="desktop-col-span-2 tablet-col-span-all">
                                    <h3>
                                        <a data-analytics-level="2" data-analytics-category="Products and Services" data-analytics-text="Products" href="https://access.redhat.com/products/">Products
                                        </a>
                                    </h3>
                                    <slot name="main-menu__dropdown--product__product-listing"></slot>
                                </div>                                <div>
                                    <h3 id="nav__products__support">
                                        <a data-analytics-level="2" data-analytics-category="Products and Services" data-analytics-text="Support" href="https://access.redhat.com/support">Support
                                        </a>
                                    </h3>
                                    <ul aria-labelledby="nav__products__support">
                                        <li><a data-analytics-level="3" data-analytics-category="Products and Services|Support" data-analytics-text="Production Support" href="https://access.redhat.com/support/offerings/production/">Production Support
                                            </a></li>
                                            <li><a data-analytics-level="3" data-analytics-category="Products and Services|Support" data-analytics-text="Development Support" href="https://access.redhat.com/support/offerings/developer/">Development Support
                                                </a></li>
                                                <li><a data-analytics-level="3" data-analytics-category="Products and Services|Support" data-analytics-text="Product Life Cycles" href="https://access.redhat.com/product-life-cycles/">Product Life Cycles
                                                    </a></li>
                                    </ul>

                                    <h3 id="nav__products__services">
                                        <a data-analytics-level="2" data-analytics-category="Products and Services" data-analytics-text="Services" href="https://www.redhat.com/en/services">Services
                                        </a>
                                    </h3>
                                    <ul aria-labelledby="nav__products__services">
                                        <li><a data-analytics-level="3" data-analytics-category="Products and Services|Services" data-analytics-text="Consulting" href="https://www.redhat.com/en/services/consulting">Consulting
                                            </a></li>
                                            <li><a data-analytics-level="3" data-analytics-category="Products and Services|Services" data-analytics-text="Technical Account Management" href="https://access.redhat.com/support/offerings/tam/">Technical Account Management
                                                </a></li>
                                                <li><a data-analytics-level="3" data-analytics-category="Products and Services|Services" data-analytics-text="Training and Certifications" href="https://www.redhat.com/en/services/training-and-certification">Training &amp; Certifications
                                                    </a></li>
                                    </ul>
                                </div>                                <div>
                                    <h3 id="nav__products__documentation">
                                        <a data-analytics-level="2" data-analytics-category="Products and Services" data-analytics-text="Documentation" href="https://access.redhat.com/documentation">Documentation
                                        </a>
                                    </h3>
                                    <ul aria-labelledby="nav__products__documentation">
                                        <li><a data-analytics-level="3" data-analytics-category="Products and Services|Documentation" data-analytics-text="Red Hat Enterprise Linux" href="https://access.redhat.com/documentation/en/red_hat_enterprise_linux">Red Hat Enterprise Linux
                                            </a></li>
                                            <li><a data-analytics-level="3" data-analytics-category="Products and Services|Documentation" data-analytics-text="Red Hat JBoss Enterprise Application Platform" href="https://access.redhat.com/documentation/en/red_hat_jboss_enterprise_application_platform">Red Hat JBoss Enterprise Application Platform
                                                </a></li>
                                                <li><a data-analytics-level="3" data-analytics-category="Products and Services|Documentation" data-analytics-text="Red Hat OpenStack Platform" href="https://access.redhat.com/documentation/en/red_hat_openstack_platform">Red Hat OpenStack Platform
                                                    </a></li>
                                                    <li><a data-analytics-level="3" data-analytics-category="Products and Services|Documentation" data-analytics-text="Red Hat OpenShift Container Platform" href="https://access.redhat.com/documentation/en/openshift_container_platform">Red Hat OpenShift Container Platform
                                                        </a></li>
                                    </ul>
                                    <pfe-cta pfelement="" class="PFElement" has_link="">
                                        <a data-analytics-level="3" data-analytics-category="Products and Services|Documentation" data-analytics-text="All Documentation" data-analytics-linktype="cta" href="https://access.redhat.com/documentation">All Documentation
                                        </a>
                                    </pfe-cta>

                                    <h3 id="nav__products__catalog"><a data-analytics-level="2" data-analytics-category="Products and Services" data-analytics-text="Ecosystem Catalog" href="https://catalog.redhat.com/">Ecosystem Catalog
                                        </a></h3>
                                        <ul aria-labelledby="nav__products__catalog">
                                            <li><a data-analytics-level="3" data-analytics-category="Products and Services|Ecosystem Catalog" data-analytics-text="Red Hat Partner Ecosystem" href="https://access.redhat.com/ecosystem/">Red Hat Partner Ecosystem
                                                </a></li>
                                                <li><a data-analytics-level="3" data-analytics-category="Products and Services|Ecosystem Catalog" data-analytics-text="Partner Resources" href="https://access.redhat.com/ecosystem/partner-resources">Partner Resources
                                                    </a></li>
                                        </ul>
                                </div>
                            </div>
                        </li>                        <li class="pfe-navigation__menu-item">
                            <a class="pfe-navigation__menu-link" data-analytics-level="1" data-analytics-text="Tools" href="https://access.redhat.com/labs/">Tools
                            </a>
                            <div class="pfe-navigation__dropdown pfe-navigation__dropdown--3-column">                                <div>
                                    <h3 id="nav__tools__tools" data-analytics-level="2" data-analytics-text="Tools" data-analytics-category="Tools">Tools
                                    </h3>
                                    <ul aria-labelledby="nav__tools__tools">
                                        <li><a data-analytics-level="3" data-analytics-category="Tools|Tools" data-analytics-text="Solution Engine" href="https://access.redhat.com/support/cases/#/troubleshoot">Troubleshoot a product issue
                                            </a></li>
                                            <li><a data-analytics-level="3" data-analytics-category="Tools|Tools" data-analytics-text="Packages" href="https://access.redhat.com/downloads/content/package-browser">Packages
                                                </a></li>
                                                <li><a data-analytics-level="3" data-analytics-category="Tools|Tools" data-analytics-text="Errata" href="https://access.redhat.com/errata/">Errata
                                                    </a></li>
                                    </ul>
                                </div>                                <div>
                                    <h3 id="nav__tools__labs">
                                        <a data-analytics-level="2" data-analytics-category="Tools" data-analytics-text="Customer Portal Labs" href="https://access.redhat.com/labs/">Customer Portal Labs
                                        </a>
                                    </h3>
                                    <ul aria-labelledby="nav__tools__labs">
                                        <li><a data-analytics-level="3" data-analytics-category="Tools|Customer Portal Labs" data-analytics-text="Configuration" href="https://access.redhat.com/labs/#!?type=config">Configuration
                                            </a></li>
                                            <li><a data-analytics-level="3" data-analytics-category="Tools|Customer Portal Labs" data-analytics-text="Deployment" href="https://access.redhat.com/labs/#!?type=deploy">Deployment
                                                </a></li>
                                                <li><a data-analytics-level="3" data-analytics-category="Tools|Customer Portal Labs" data-analytics-text="Security" href="https://access.redhat.com/labs/#!?type=security">Security
                                                    </a></li>                                                    <li><a data-analytics-level="3" data-analytics-category="Tools|Customer Portal Labs" data-analytics-text="Troubleshooting" href="https://access.redhat.com/labs/#!?type=troubleshoot">Troubleshoot
                                                        </a></li>
                                    </ul>
                                    <pfe-cta pfelement="" class="PFElement" has_link="">
                                        <a data-analytics-level="3" data-analytics-category="Tools|Customer Portal Labs" data-analytics-text="All Labs" data-analytics-linktype="cta" href="https://access.redhat.com/labs/">All labs
                                        </a>
                                    </pfe-cta>
                                </div>                                <div>
                                    <h4 id="nav__tools__red-hat-insights">
                                        <a data-analytics-level="2" data-analytics-category="Tools" data-analytics-text="Red Hat Insights" href="https://www.redhat.com/en/technologies/management/insights">Red Hat Insights
                                        </a>
                                    </h4>
                                    <p>Increase visibility into IT operations to detect and resolve technical issues before they impact your business.</p>
                                    <a data-analytics-level="3" data-analytics-category="Tools|Red Hat Insights" data-analytics-text="Learn more" href="https://www.redhat.com/en/technologies/management/insights">Learn More
                                    </a>
                                    <br>
                                    <a data-analytics-level="3" data-analytics-category="Tools|Red Hat Insights" data-analytics-text="Go to Insights" href="https://cloud.redhat.com/insights">Go to Insights
                                    </a>
                                </div>
                            </div>
                        </li>                        <li class="pfe-navigation__menu-item">
                            <a class="pfe-navigation__menu-link" data-analytics-level="1" data-analytics-text="Security" href="https://access.redhat.com/security/">Security
                            </a>
                            <div class="pfe-navigation__dropdown pfe-navigation__dropdown--3-column">                                <div>
                                    <h3 id="security__security-center">
                                        <a data-analytics-level="2" data-analytics-category="Security" data-analytics-text="Red Hat Product Security Center" href="https://access.redhat.com/security">Red Hat Product Security Center
                                        </a>
                                    </h3>
                                    <p>Engage with our Red Hat Product 
Security team, access security updates, and ensure your environments are
 not exposed to any known security vulnerabilities.
                                    </p>
                                    <pfe-cta pfe-priority="primary" priority="primary" pfelement="" class="PFElement" has_link="">
                                        <a data-analytics-level="3" data-analytics-category="Security|Red Hat Product Security Center" data-analytics-text="Product Security Center" data-analytics-linktype="cta" href="https://access.redhat.com/security/">Product Security Center
                                        </a>
                                    </pfe-cta>
                                </div>                                <div>
                                    <h3 id="nav__security__updates" data-analytics-level="2" data-analytics-text="Security Updates" data-analytics-category="Security">
                                        <a data-analytics-level="2" data-analytics-category="Security" data-analytics-text="Security Updates" href="https://access.redhat.com/security">Security Updates
                                        </a>
                                    </h3>
                                    <ul aria-labelledby="nav__security__updates">
                                        <li><a data-analytics-level="3" data-analytics-category="Security|Security Updates" data-analytics-text="Security Advisories" href="https://access.redhat.com/security/security-updates/#/security-advisories">Security Advisories
                                            </a></li>
                                            <li><a data-analytics-level="3" data-analytics-category="Security|Security Updates" data-analytics-text="Red Hat CVE Database" href="https://access.redhat.com/security/security-updates/#/cve">Red Hat CVE Database
                                                </a></li>
                                                <li><a data-analytics-level="3" data-analytics-category="Security|Security Updates" data-analytics-text="Security Labs" href="https://access.redhat.com/security/security-updates/#/security-labs">Security Labs
                                                    </a></li>
                                    </ul>
                                    <p class="margin-top-xl">Keep your systems secure with Red Hat's specialized responses to security vulnerabilities.
                                    </p>
                                    <pfe-cta pfelement="" class="PFElement" has_link="">
                                        <a data-analytics-level="3" data-analytics-category="Security|Security Updates" data-analytics-text="View Responses" data-analytics-linktype="cta" href="https://access.redhat.com/security/vulnerability">View Responses
                                        </a>
                                    </pfe-cta>
                                </div>                                <div>
                                    <h3 id="nav__security__resources">
                                        <a data-analytics-level="2" data-analytics-category="Security" data-analytics-text="Resources" href="https://access.redhat.com/security/overview">Resources
                                        </a>
                                    </h3>
                                    <ul aria-labelledby="nav__security__resources">                                            <li><a data-analytics-level="3" data-analytics-category="Security|Resources" data-analytics-text="Security Blog" href="https://redhat.com/en/blog/channel/security">Security Blog
                                                </a></li>
                                                <li><a data-analytics-level="3" data-analytics-category="Security|Resources" data-analytics-text="Security Measurement" href="https://www.redhat.com/security/data/metrics/">Security Measurement
                                                    </a></li>
                                                    <li><a data-analytics-level="3" data-analytics-category="Security|Resources" data-analytics-text="Severity Ratings" href="https://access.redhat.com/security/updates/classification/">Severity Ratings
                                                        </a></li>
                                                        <li><a data-analytics-level="3" data-analytics-category="Security|Resources" data-analytics-text="Backporting Policies" href="https://access.redhat.com/security/updates/backporting/">Backporting Policies
                                                            </a></li>
                                                            <li><a data-analytics-level="3" data-analytics-category="Security|Resources" data-analytics-text="Product Signing (GPG) Keys" href="https://access.redhat.com/security/team/key/">Product Signing (GPG) Keys
                                                                </a></li>
                                    </ul>
                                </div>

                            </div>
                        </li>                        <li class="pfe-navigation__menu-item">
                            <a href="https://access.redhat.com/community/" class="pfe-navigation__menu-link" data-analytics-level="1" data-analytics-text="Community">Community
                            </a>
                            <div class="pfe-navigation__dropdown pfe-navigation__dropdown--3-column">                                <div>
                                    <h3 id="nav__community__cp-community">
                                        <a href="https://access.redhat.com/community" data-analytics-level="2" data-analytics-text="Customer Portal Community" data-analytics-category="Community">Customer Portal Community
                                        </a>
                                    </h3>
                                    <ul aria-labelledby="nav__community__cp-community">
                                        <li><a data-analytics-level="3" data-analytics-category="Community|Customer Portal Community" data-analytics-text="Discussions" href="https://access.redhat.com/discussions">Discussions
                                            </a></li>                                                <li><a data-analytics-level="3" data-analytics-category="Community|Customer Portal Community" data-analytics-text="Private Groups" href="https://access.redhat.com/groups/">Private Groups
                                                    </a></li>
                                    </ul>

                                    <pfe-cta pfe-priority="primary" priority="primary" pfelement="" class="PFElement" has_link="">
                                        <a data-analytics-level="3" data-analytics-category="Community|Customer Portal Community" data-analytics-text="Community Activity" data-analytics-linktype="cta" href="https://access.redhat.com/community/">Community Activity
                                        </a>
                                    </pfe-cta>
                                </div>                                <div>
                                    <h3 id="nav__community__events" data-analytics-level="2" data-analytics-text="Customer Events" data-analytics-category="Community">Customer Events
                                    </h3>
                                    <ul aria-labelledby="nav__community__events">
                                        <li><a data-analytics-level="3" data-analytics-category="Community|Customer Events" data-analytics-text="Red Hat Convergence" href="https://access.redhat.com/convergence/">Red Hat Convergence
                                            </a></li>
                                            <li><a data-analytics-level="3" data-analytics-category="Community|Customer Events" data-analytics-text="Red Hat Summit" href="http://www.redhat.com/summit/">Red Hat Summit
                                                </a></li>
                                    </ul>
                                </div>                                <div>
                                    <h3 id="nav__community__stories" data-analytics-level="2" data-analytics-text="Stories" data-analytics-category="Community">Stories
                                    </h3>
                                    <ul aria-labelledby="nav__community__stories">
                                        <li><a data-analytics-level="3" data-analytics-category="Community|Stories" data-analytics-text="Red Hat Subscription Value" href="https://access.redhat.com/subscription-value/">Red Hat Subscription Value
                                            </a></li>
                                            <li><a data-analytics-level="3" data-analytics-text="You Asked. We Acted." data-analytics-category="Community|Stories" href="https://access.redhat.com/you-asked-we-acted/">You Asked. We Acted.
                                                </a></li>
                                                <li><a data-analytics-level="3" data-analytics-category="Community|Stories" data-analytics-text="Open Source Communities" href="http://www.redhat.com/en/open-source">Open Source Communities
                                                    </a></li>
                                    </ul>
                                </div>
                            </div>
                        </li>
                    </ul>                </nav>                <div id="site-search" slot="search" class="utility-link site-search">
                    <div class="content">
                        <form class="ng-pristine ng-valid topSearchForm" id="topSearchForm" name="topSearchForm" action="/search/browse/search/" method="get" enctype="application/x-www-form-urlencoded">
                            <cp-search-autocomplete class="push-bottom PFElement" path="/webassets/avalon/j/data.json" num-items="5" placeholder="Enter your search term" pfelement="" type="container"></cp-search-autocomplete>                            <div>Or <a href="https://access.redhat.com/support/cases/#/troubleshoot">troubleshoot an issue</a>.
                            </div>
                        </form>
                    </div>
                </div>


                <div slot="secondary-links" id="localesMenu" class="pfe-navigation__custom-dropdown__wrapper--single-column pfe-navigation__custom-dropdown__wrapper">
                    <button class="pfe-navigation__secondary-link" id="pfe-navigation__secondary-link--English" aria-controls="pfe-navigation__custom-dropdown--English" aria-expanded="false">
                        <pfe-icon icon="web-icon-globe" size="sm" aria-hidden="true" pfelement="" class="PFElement" on="light" type="content"></pfe-icon>English
                    </button>

                    
                <div id="pfe-navigation__custom-dropdown--English" class="pfe-navigation__dropdown-wrapper pfe-navigation__custom-dropdown--single-column pfe-navigation__dropdown-wrapper--invisible" aria-hidden="true" tabindex="-1"><pfe-navigation-dropdown dropdown-width="single" pfelement="" class="PFElement pfe-navigation__dropdown" type="container" data-id-suffix="English">
                        <h2 class="utility-header">Select Your Language
                        </h2>
                        <ul class="reset">
                            <li><a href="https://access.redhat.com/changeLanguage?language=en&amp;redirectTo=https%3A//access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html-single/configuring_and_using_database_servers/index" data-lang="en" id="en" data-analytics-text="English" class="selected">English</a></li>
                            <li><a href="https://access.redhat.com/changeLanguage?language=ko&amp;redirectTo=https%3A//access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html-single/configuring_and_using_database_servers/index" data-lang="ko" id="ko" data-analytics-text="Korean">한국어</a></li>
                            <li><a href="https://access.redhat.com/changeLanguage?language=ja&amp;redirectTo=https%3A//access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html-single/configuring_and_using_database_servers/index" data-lang="ja" id="ja" data-analytics-text="Japanese">日本語</a></li>
                            <li><a href="https://access.redhat.com/changeLanguage?language=zh_CN&amp;redirectTo=https%3A//access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html-single/configuring_and_using_database_servers/index" data-lang="zh_CN" id="zh_CN" data-analytics-text="Chinese">中文 (中国)</a></li>
                        </ul>

                    </pfe-navigation-dropdown></div></div>                <rh-account-dropdown slot="account" pfelement="" class="PFElement" type="content" login-link="https://sso.redhat.com/auth/realms/redhat-external/protocol/openid-connect/auth?client_id=customer-portal&amp;redirect_uri=https%3A%2F%2Faccess.redhat.com%2Fwebassets%2Favalon%2Fj%2Fincludes%2Fsession%2Fscribe%2F%3FredirectTo%3Dhttps%253A%252F%252Faccess.redhat.com%252Fdocumentation%252Fen-us%252Fred_hat_enterprise_linux%252F9%252Fhtml-single%252Fconfiguring_and_using_database_servers%252Findex&amp;state=2e419b9d-dcae-44ec-af31-9d8cbe6fa0d8&amp;nonce=ef5581cc-4765-4f19-89aa-7d001a822174&amp;response_mode=fragment&amp;response_type=code&amp;scope=openid" lang="en"></rh-account-dropdown>                <pfe-primary-detail breakpoint-width="600" class="main-menu__dropdown--product__product-listing PFElement" slot="main-menu__dropdown--product__product-listing" consistent-height="" aria-orientation="vertical" role="tablist" pfelement="" on="&quot;light&quot;" type="container" has_details="" breakpoint="compact">
                    <button role="tab" slot="details-nav" data-was-tag="H3" id="pfe-detail-toggle-tc5wimahc" data-index="0" aria-controls="pfe-detail-bap13j73b" aria-expanded="false">Infrastructure and Management                    </button>
                    <div slot="details" data-index="0" id="pfe-detail-bap13j73b" role="tabpanel" tabindex="-1" aria-labelledby="pfe-detail-toggle-tc5wimahc" data-processed="true" aria-hidden="true" hidden="">
                        <ul>
                            <li>
                                <a data-analytics-level="3" data-analytics-category="Products and Services|Products:Infrastructure and Management" data-analytics-text="Red Hat Enterprise Linux" href="https://access.redhat.com/products/red-hat-enterprise-linux/">Red Hat Enterprise Linux
                                </a>
                            </li>
                            <li>
                                <a data-analytics-level="3" data-analytics-category="Products and Services|Products:Infrastructure and Management" data-analytics-text="Red Hat Satellite" href="https://access.redhat.com/products/red-hat-satellite/">Red Hat Satellite
                                </a>
                            </li>
                            <li>
                                <a data-analytics-level="3" data-analytics-category="Products and Services|Products:Infrastructure and Management" data-analytics-text="Red Hat Subscription Management" href="https://access.redhat.com/products/red-hat-subscription-management/">Red Hat Subscription Management
                                </a>
                            </li>
                            <li>
                                <a data-analytics-level="3" data-analytics-category="Products and Services|Products:Infrastructure and Management" data-analytics-text="Red Hat Insights" href="https://access.redhat.com/products/red-hat-insights/">Red Hat Insights
                                </a>
                            </li>
                            <li><a data-analytics-level="3" data-analytics-category="Products and Services|Products:Infrastructure and Management" data-analytics-text="Red Hat Ansible Automation Platform" href="https://access.redhat.com/products/red-hat-ansible-automation-platform/">Red Hat Ansible Automation Platform
                                </a></li>
                        </ul>
                    </div>

                    <button role="tab" slot="details-nav" data-was-tag="H3" id="pfe-detail-toggle-yp55tbqal" data-index="1" aria-controls="pfe-detail-hgvjknkst" aria-expanded="false">Cloud Computing                    </button>
                    <div slot="details" data-index="1" id="pfe-detail-hgvjknkst" role="tabpanel" tabindex="-1" aria-labelledby="pfe-detail-toggle-yp55tbqal" data-processed="true" aria-hidden="true" hidden="">
                        <ul>
                            <li>
                                <a data-analytics-level="3" data-analytics-category="Products and Services|Products:Cloud Computing" data-analytics-text="Red Hat OpenShift" href="https://access.redhat.com/products/openshift">Red Hat OpenShift
                                </a>
                            </li>
                            <li>
                                <a data-analytics-level="3" data-analytics-category="Products and Services|Products:Cloud Computing" data-analytics-text="Red Hat OpenStack Platform" href="https://access.redhat.com/products/red-hat-openstack-platform/">Red Hat OpenStack Platform
                                </a>
                            </li>
                            <li>
                                <a data-analytics-level="3" data-analytics-category="Products and Services|Products:Cloud Computing Platform" data-analytics-text="Red Hat OpenShift Container Platform" href="https://access.redhat.com/products/red-hat-openshift-container-platform/">Red Hat OpenShift Container Platform
                                </a>
                            </li>
                            <li>
                                <a data-analytics-level="3" data-analytics-category="Products and Services|Products:Cloud Computing Platform" data-analytics-text="Red Hat OpenShift Data Science" href="https://access.redhat.com/products/red-hat-openshift-data-science/">Red Hat OpenShift Data Science
                                </a>
                            </li>
                            <li>
                                <a data-analytics-level="3" data-analytics-category="Products and Services|Products:Cloud Computing" data-analytics-text="Red Hat OpenShift Dedicated" href="https://access.redhat.com/products/openshift-dedicated-red-hat/">Red Hat OpenShift Dedicated
                                </a>
                            </li>
                            <li>
                                <a data-analytics-level="3" data-analytics-category="Products and Services|Products:Cloud Computing Platform" data-analytics-text="Red Hat Advanced Cluster Security for Kubernetes" href="https://access.redhat.com/products/red-hat-advanced-cluster-security-for-kubernetes/">Red Hat Advanced Cluster Security for Kubernetes
                                </a>
                            </li>
                            <li>
                                <a data-analytics-level="3" data-analytics-category="Products and Services|Products:Cloud Computing" data-analytics-text="Red Hat Advanced Cluster Management for Kubernetes" href="https://access.redhat.com/products/red-hat-advanced-cluster-management-for-kubernetes/">Red Hat Advanced Cluster Management for Kubernetes
                                </a>
                            </li>
                            <li>
                                <a data-analytics-level="3" data-analytics-category="Products and Services|Products:Cloud Computing" data-analytics-text="Red Hat Quay" href="https://access.redhat.com/products/red-hat-quay/">Red Hat Quay
                                </a>
                            </li>
                            <li>
                                <a data-analytics-level="3" data-analytics-category="Products and Services|Products:Cloud Computing" data-analytics-text="Red Hat CodeReady Workspaces" href="https://access.redhat.com/products/red-hat-codeready-workspaces/">OpenShift Dev Spaces
                                </a>
                            </li>
                            <li>
                                <a data-analytics-level="3" data-analytics-category="Products and Services|Products:Cloud Computing" data-analytics-text="Red Hat OpenShift Service on AWS" href="https://access.redhat.com/products/red-hat-openshift-service-aws">Red Hat OpenShift Service on AWS
                                </a>
                            </li>
                        </ul>
                    </div>

                    <button role="tab" slot="details-nav" data-was-tag="H3" id="pfe-detail-toggle-71135ntnk" data-index="2" aria-controls="pfe-detail-3ccmltbwk" aria-expanded="false">Storage                    </button>
                    <div slot="details" data-index="2" id="pfe-detail-3ccmltbwk" role="tabpanel" tabindex="-1" aria-labelledby="pfe-detail-toggle-71135ntnk" data-processed="true" aria-hidden="true" hidden="">
                        <ul>
                            <li>
                                <a data-analytics-level="3" data-analytics-category="Products and Services|Products:Storage" data-analytics-text="Red Hat Gluster Storage" href="https://access.redhat.com/products/red-hat-storage/">Red Hat Gluster Storage
                                </a>
                            </li>
                            <li>
                                <a data-analytics-level="3" data-analytics-category="Products and Services|Products:Storage" data-analytics-text="Red Hat Hyperconverged Infrastructure" href="https://access.redhat.com/products/red-hat-hyperconverged-infrastructure/">Red Hat Hyperconverged Infrastructure
                                </a>
                            </li>
                            <li>
                                <a data-analytics-level="3" data-analytics-category="Products and Services|Products:Storage" data-analytics-text="Red Hat Ceph Storage" href="https://access.redhat.com/products/red-hat-ceph-storage/">Red Hat Ceph Storage
                                </a>
                            </li>
                            <li>
                                <a data-analytics-level="3" data-analytics-category="Products and Services|Products:Storage" data-analytics-text="Red Hat Openshift Container Storage" href="https://access.redhat.com/products/red-hat-openshift-data-foundation">Red Hat OpenShift Data Foundation
                                </a>
                            </li>
                        </ul>
                    </div>

                    <button role="tab" slot="details-nav" data-was-tag="H3" id="pfe-detail-toggle-oax4abgc4" data-index="3" aria-controls="pfe-detail-87ehspcej" aria-expanded="false">Runtimes                    </button>
                    <div slot="details" data-index="3" id="pfe-detail-87ehspcej" role="tabpanel" tabindex="-1" aria-labelledby="pfe-detail-toggle-oax4abgc4" data-processed="true" aria-hidden="true" hidden="">
                        <ul>
                            <li>
                                <a data-analytics-level="3" data-analytics-category="Products and Services|Products:Runtimes" data-analytics-text="Red Hat Runtimes" href="https://access.redhat.com/products/red-hat-runtimes/">Red Hat Runtimes
                                </a>
                            </li>
                            <li>
                                <a data-analytics-level="3" data-analytics-category="Products and Services|Products:Runtimes" data-analytics-text="Red Hat JBoss Enterprise Application Platform" href="https://access.redhat.com/products/red-hat-jboss-enterprise-application-platform/">Red Hat JBoss Enterprise Application Platform
                                </a>
                            </li>
                            <li>
                                <a data-analytics-level="3" data-analytics-category="Products and Services|Products:Runtimes" data-analytics-text="Red Hat Data Grid" href="https://access.redhat.com/products/red-hat-data-grid/">Red Hat Data Grid
                                </a>
                            </li>
                            <li>
                                <a data-analytics-level="3" data-analytics-category="Products and Services|Products:Runtimes" data-analytics-text="Red Hat JBoss Web Server" href="https://access.redhat.com/products/red-hat-jboss-web-server/">Red Hat JBoss Web Server
                                </a>
                            </li>
                            <li>
                                <a data-analytics-level="3" data-analytics-category="Products and Services|Products:Runtimes" data-analytics-text="Red Hat Single Sign On" href="https://access.redhat.com/products/red-hat-single-sign-on/">Red Hat Single Sign On
                                </a>
                            </li>
                            <li>
                                <a data-analytics-level="3" data-analytics-category="Products and Services|Products:Runtimes" data-analytics-text="Red Hat support for Spring Boot" href="https://access.redhat.com/products/spring-boot/">Red Hat support for Spring Boot
                                </a>
                            </li>
                            <li>
                                <a data-analytics-level="3" data-analytics-category="Products and Services|Products:Runtimes" data-analytics-text="Red Hat build of Node.js" href="https://access.redhat.com/products/nodejs/">Red Hat build of Node.js
                                </a>
                            </li>                            <li>
                                <a data-analytics-level="3" data-analytics-category="Products and Services|Products:Runtimes" data-analytics-text="Red Hat build of Quarkus" href="https://access.redhat.com/products/quarkus/">Red Hat build of Quarkus
                                </a>
                            </li>
                        </ul>
                    </div>

                    <button role="tab" slot="details-nav" data-was-tag="H3" id="pfe-detail-toggle-spionsxlz" data-index="4" aria-controls="pfe-detail-56rxwfnyf" aria-expanded="false">Integration and Automation                    </button>
                    <div slot="details" data-index="4" id="pfe-detail-56rxwfnyf" role="tabpanel" tabindex="-1" aria-labelledby="pfe-detail-toggle-spionsxlz" data-processed="true" aria-hidden="true" hidden="">
                        <ul class="border-bottom" id="portal-menu-border-bottom">
                            <li>
                                <a data-analytics-level="3" data-analytics-category="Products and Services|Products:Integration and Automation" data-analytics-text="Red Hat Application Foundations" href="https://access.redhat.com/products/red-hat-application-foundations/">Red Hat Application Foundations
                                </a>
                            </li>
                            <li>
                                <a data-analytics-level="3" data-analytics-category="Products and Services|Products:Integration and Automation" data-analytics-text="Red Hat Fuse" href="https://access.redhat.com/products/red-hat-fuse/">Red Hat Fuse
                                </a>
                            </li>
                            <li>
                                <a data-analytics-level="3" data-analytics-category="Products and Services|Products:Integration and Automation" data-analytics-text="Red Hat AMQ" href="https://access.redhat.com/products/red-hat-amq/">Red Hat AMQ
                                </a>
                            </li>
                            <li>
                                <a data-analytics-level="3" data-analytics-category="Products and Services|Products:Integration and Automation" data-analytics-text="Red Hat 3scale API Management" href="https://access.redhat.com/products/red-hat-3scale/">Red Hat 3scale API Management
                                </a>
                            </li>
                        </ul>
                    </div>
                    <div slot="details-nav--footer">
                        <pfe-cta pfe-priority="primary" priority="primary" pfelement="" class="PFElement" on="&quot;light&quot;" has_link="">
                            <a href="https://access.redhat.com/products/" class="pfe-navigation__menu-link" data-analytics-level="2" data-analytics-text="All Products" data-analytics-category="Products and Services|Products:" data-analytics-linktype="cta">All Products
                            </a>
                        </pfe-cta>
                    </div>
                </pfe-primary-detail>

            <div slot="secondary-links" class="pfe-navigation__site-switcher pfe-navigation__custom-dropdown__wrapper--full pfe-navigation__custom-dropdown__wrapper" mobile-slider=""><button class="pfe-navigation__secondary-link" id="pfe-navigation__secondary-link--All-Red-Hat" aria-controls="pfe-navigation__custom-dropdown--All-Red-Hat" aria-expanded="false"><pfe-icon icon="web-icon-grid-3x3" size="sm" aria-hidden="true" pfelement="" class="PFElement" on="light" type="content"></pfe-icon>All Red Hat</button> <div id="pfe-navigation__custom-dropdown--All-Red-Hat" class="pfe-navigation__dropdown-wrapper pfe-navigation__custom-dropdown--full pfe-navigation__dropdown-wrapper--invisible" aria-hidden="true" tabindex="-1"><pfe-navigation-dropdown dropdown-width="full" pfelement="" class="PFElement pfe-navigation__dropdown" type="container" data-id-suffix="All-Red-Hat"><div class="pfe-navigation__site-switcher__back-wrapper"><button class="pfe-navigation__site-switcher__back-button" aria-label="Close undefined and return to menu">Back to menu</button></div><site-switcher pfelement="" class="PFElement" type="content" lang="en"><article class="node-355871 node node-page clearfix">


    <div class="field field-name-body field-type-text-with-summary field-label-hidden">
        <div class="field-items">
            <div class="field-item even">
                <!--linking to stylesheets so /cms/ajax/site-switcher will load with styles -->
  <link type="text/css" rel="stylesheet" href="Configuring%20and%20using%20database%20servers%20Red%20Hat%20Enterprise%20Linux%209%20Red%20Hat%20Customer%20Portal_files/site-switcher.css" media="all">
  
  <!-- overriding css variables to get the redhat.com logo box and text to change style indicating you are on this site-->

                <style>
                    :root {
                        --rhdc--logo: var(--rhdc--logo--you-are-here);
                        --rhdc--backgroundColor: var(--background--you-are-here);
                        --rhdc--label: var(--label--you-are-here);
                        --rhdc--margin-top: 0px;
                    }
                </style>

                <section class="site-switcher-tray" data-analytics-region="site-switcher">
                    <div class="content">
                        <div class="container">
                            <section class="site-switcher-container">
                                <ul class="site-switcher-primary-list">
                                    <li class="rhdc">
                                        <a href="https://www.redhat.com/?intcmp=701f20000012k69AAA" data-analytics-category="Websites" data-analytics-text="redhat">
                                            <p class="location-label">You are here</p>
                                            <div class="tntLogo">
                                                <div class="image"></div>
                                            </div>
                                            <h3>Red Hat</h3>
                                            <p>Learn about our open source products, services, and company.</p>
                                        </a>
                                    </li>
                                    <li class="customer-portal">
                                        <a href="https://access.redhat.com/?intcmp=701f20000012k6EAAQ" data-analytics-category="Websites" data-analytics-text="access_redhat">
                                            <p class="location-label">You are here</p>
                                            <div class="tntLogo">
                                                <!-- Customer portal -->
                                                <div class="image"></div>
                                            </div>
                                            <h3>Red Hat Customer Portal</h3>
                                            <p>Get product support and knowledge from the open source experts.</p>
                                        </a>
                                    </li>
                                    <li class="developers">
                                        <a href="https://developers.redhat.com/?intcmp=701f20000012k6JAAQ" data-analytics-category="Websites" data-analytics-text="developers_redhat">
                                            <p class="location-label">You are here</p>
                                            <div class="tntLogo">
                                                <!-- Red Hat Developer -->
                                                <div class="image"></div>
                                            </div>
                                            <h3>Red Hat Developer</h3>
                                            <p>Read developer tutorials and download Red Hat software for cloud
                                                application development.</p>
                                        </a>
                                    </li>
                                    <li class="connect">
                                        <a href="https://connect.redhat.com/" data-analytics-category="Websites" data-analytics-text="connect_redhat">
                                            <p class="location-label">You are here</p>
                                            <div class="tntLogo">
                                                <!-- Red Hat Partner Connect -->
                                                <div class="image"></div>
                                            </div>
                                            <h3>Red Hat Partner Connect</h3>
                                            <p>Become a Red Hat partner and get support in building customer solutions.
                                            </p>
                                        </a>
                                    </li>
                                </ul>
                                <hr>

                                <ul class="site-switcher-secondary-list">
                                    <li>
                                        <h2>Products</h2>
                                        <ul>
                                            <li><a href="https://www.ansible.com/?intcmp=701f20000012k6TAAQ" data-analytics-category="Websites" data-analytics-text="ansible">
                                                    <h3>Ansible.com</h3>
                                                </a>Learn about and try our IT automation product.</li>

                                        </ul>
                                    </li>
                                    <li>
                                        <h2>Try, Buy, Sell</h2>
                                        <ul>
                                            <li><a href="https://cloud.redhat.com/" data-analytics-category="Websites" data-analytics-text="hybrid-cloud">
                                                    <h3>Red Hat Hybrid Cloud</h3>
                                                </a>Access technical how-tos, tutorials, and learning paths focused on
                                                Red Hat’s hybrid cloud managed services.</li>

                                            <li><a href="https://www.redhat.com/store?intcmp=701f20000012k6nAAA" data-analytics-category="Websites" data-analytics-text="store">
                                                    <h3>Red Hat Store</h3>
                                                </a>Buy select Red Hat products and services online.</li>

                                            <li><a href="https://marketplace.redhat.com/" data-analytics-category="Websites" data-analytics-text="marketplace">
                                                    <h3>Red Hat Marketplace</h3>
                                                </a>Try, buy, sell, and manage certified enterprise software for
                                                container-based environments.</li>

                                        </ul>
                                    </li>
                                    <li>
                                        <h2>Community &amp; Open Source</h2>
                                        <ul>
                                            <li><a href="https://enterprisersproject.com/?intcmp=701f20000012k6sAAA" data-analytics-category="Websites" data-analytics-text="enterprisersproject">
                                                    <h3>The Enterprisers Project</h3>
                                                </a>Read analysis and advice articles written by CIOs, for CIOs.</li>
                                            <li><a href="https://opensource.com/?intcmp=701f20000012k6OAAQ" data-analytics-category="Websites" data-analytics-text="opensource">
                                                    <h3>Opensource.com</h3>
                                                </a>Read articles on a range of topics about open source.</li>
                                        </ul>
                                    </li>
                                    <li>
                                        <h2>&nbsp;</h2>
                                        <ul>
                                            <li><a href="https://www.redhat.com/summit?intcmp=701f20000012k6xAAA" data-analytics-category="Websites" data-analytics-text="summit">
                                                    <h3>Red Hat Summit</h3>
                                                </a>Register for and learn about our annual open source IT industry
                                                event.</li>
                                            <li><a href="https://catalog.redhat.com/" data-analytics-category="Websites" data-analytics-text="catalog">
                                                    <h3>Red Hat Ecosystem Catalog</h3>
                                                </a>Find hardware, software, and cloud providers―and download container
                                                images―certified to perform with Red Hat technologies.</li>
                                        </ul>
                                    </li>
                                </ul>
                            </section>
                        </div>
                    </div>
                </section>
            </div>
        </div>
    </div>



</article></site-switcher></pfe-navigation-dropdown></div></div></pfe-navigation>

            <div id="scroll-anchor"></div>

            <!--[if IE 8]>
                <div class="portal-messages">
                <div class="alert alert-warning alert-portal alert-w-icon">
                <span class="icon-warning alert-icon" aria-hidden="true"></span>
                You are using an unsupported web browser. Update to a supported browser for the best experience. <a href="/announcements/2120951">Read the announcement</a>.
                </div>
                </div>
            <![endif]-->
            <!--[if IE 9]>
                <div class="portal-messages">
                <div class="alert alert-warning alert-portal alert-w-icon">
                <span class="icon-warning alert-icon" aria-hidden="true"></span>As of March 1, 2016, the Red Hat Customer Portal will no longer support Internet Explorer 9. See our new <a href="/help/browsers">browser support policy</a> for more information.
                </div>
                </div>
            <![endif]-->
            <div id="site-section"></div>
        <div class="breadcrumbs"><div id="breadcrumbs" class="container"><ul><li><a href="https://access.redhat.com/products/">Products &amp; Services</a></li><li><a href="https://access.redhat.com/documentation">Product Documentation</a></li><li><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux">Red&nbsp;Hat Enterprise Linux</a></li><li><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9">9</a></li><li><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/configuring_and_using_database_servers">Configuring and using database servers</a></li><li>Configuring and using database servers</li></ul></div></div></header>
        <!--googleon: all-->

        <main id="cp-main" class="portal-content-area">
            <div id="cp-content" class="main-content">                            <!-- /CP_PRIMER_HEADER -->

      <div class="container">
        

                                                                                                        <script>breadcrumbs = [["Products & Services","\/products\/"],["Product Documentation","\/documentation"],["Red Hat Enterprise Linux","\/documentation\/en-us\/red_hat_enterprise_linux"],["9","\/documentation\/en-us\/red_hat_enterprise_linux\/9"],["Configuring and using database servers","\/documentation\/en-us\/red_hat_enterprise_linux\/9\/html\/configuring_and_using_database_servers"],["Configuring and using database servers","\/documentation\/en-us\/red_hat_enterprise_linux\/9\/html\/configuring_and_using_database_servers\/--single-page-document--"]]</script>

<div data-drupal-messages-fallback="" class="hidden"></div>


    </div>
        <div class="j-chrome-content-container">
        

  

  


  <article class="pvof-doc__content-wrapper__outer">
    <script>
      'use strict';

            var $outerWrapper = document.querySelector('.pvof-doc__content-wrapper__outer');
      if ($outerWrapper && $outerWrapper.closest) {
        var $containerWrapper = $outerWrapper.closest('.container');
        if ($containerWrapper) {
          $containerWrapper.classList.remove('container');
          $containerWrapper.classList.add('j-chrome-content-container');
        }
      }

            var cssRemoved = false;
      try {
        var $crapCss = document.querySelectorAll(
          'link[href*="/chrome_themes/nimbus/css/pages.css"], link[href*="/chrome_themes/nimbus/css/components.css"]'
        );
        if ($crapCss.length) {
          for (let index = 0; index < $crapCss.length; index++) {
            const $stylesheet = $crapCss[index];
            $stylesheet.remove();
          }
        }
        cssRemoved = true;
      }
      catch (error) {
        console.error('Ran into an issue while trying to retheme page', error);
        cssRemoved = false;
      }

            if (cssRemoved) {
        var $pvofOuterWrapper = document.querySelector('.pvof-doc__content-wrapper__outer--css-not-removed');
        if ($pvofOuterWrapper) {
          $pvofOuterWrapper.classList.remove('pvof-doc__content-wrapper__outer--css-not-removed');
        }
      }
    </script>
    <div itemscope="" itemtype="https://schema.org/TechArticle" itemref="techArticle-md1 techArticle-md2 techArticle-md3"></div>
    <div itemscope="" itemtype="https://schema.org/SoftwareApplication" itemref="softwareApplication-md1 softwareApplication-md2 softwareApplication-md3 softwareApplication-md4"></div>
    <div class="pvof-doc__content-wrapper pvof-doc__content-wrapper--has-sidebar">
                                <div class="pvof-doc__content-wrapper__inner j-superdoc j-superdoc--has-nav j-reading-mode-initialized">
                            <div class="pvof-sidebar__wrapper j-doc-nav j-superdoc__nav">
            <div class="j-sidebar__menu-container j-sidebar__menu-container--processed">
              <button class="j-sidebar__menu-trigger content-expander__trigger content-expander__trigger--processed" aria-expanded="true" aria-controls="content-expander-mcjeza3">
                <span class="j-sidebar__menu-trigger__open-text">Jump To</span>
                <span class="j-sidebar__menu-trigger__close-text">Close</span>
              </button>

              <div class="pvof-sidebar__inner-wrapper j-doc-nav__wrapper content-expander content-expander--processed" id="content-expander-mcjeza3" open="">
                <div class="j-sidebar__menu-details-container">
                  <button class="j-sidebar__menu-details-button j-sidebar__menu-details-button--expand">
                    Expand all
                  </button>
                  <button class="j-sidebar__menu-details-button j-sidebar__menu-details-button--collapse">
                    Collapse all
                  </button>
                </div>
                

  <nav id="pvof-doc__toc" class="pvof-doc__toc">
  <h2 class="j-doc-nav__title" id="j-doc-nav__title">
    Table of contents
  </h2>
  <div class="pvof-doc__toc-inner">
              <ol class="j-doc-nav__list" aria-labelledby="j-doc-nav__title">
                  <li class="j-doc-nav__list-item">
                                    

    <a href="#doc-wrapper" class="j-doc-nav__link is-active">
    Configuring and using database servers
  </a>
  
          </li>
                  <li class="j-doc-nav__list-item">
                                    

    <a href="#making-open-source-more-inclusive" class="j-doc-nav__link ">
    Making open source more inclusive
  </a>
  
          </li>
                  <li class="j-doc-nav__list-item">
                                    

    <a href="#proc_providing-feedback-on-red-hat-documentation_configuring-and-using-database-servers" class="j-doc-nav__link ">
    Providing feedback on Red Hat documentation
  </a>
  
          </li>
                  <li class="j-doc-nav__list-item">
                                    

    <a href="#introduction-to-databases_configuring-and-using-database-servers" class="j-doc-nav__link ">
    1. Introduction to database servers
  </a>
  
          </li>
                  <li class="j-doc-nav__list-item">
                                      

    <a href="#using-mariadb_configuring-and-using-database-servers" class="j-doc-nav__link j-doc-nav__link--has-children">
    2. Using MariaDB
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger content-expander__trigger--processed" aria-expanded="false" aria-controls="content-expander-nzf0n4l">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "2. Using MariaDB"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "2. Using MariaDB"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander content-expander--processed" id="content-expander-nzf0n4l" aria-hidden="true">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="#introduction-to-mariadb_using-mariadb" class="j-doc-nav__link ">
    2.1. Getting started with MariaDB
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="#installing-mariadb_using-mariadb" class="j-doc-nav__link ">
    2.2. Installing MariaDB
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="#configuring-mariadb_using-mariadb" class="j-doc-nav__link ">
    2.3. Configuring MariaDB
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="#assembly_setting-up-tls-encryption-on-a-mariadb-server_using-mariadb" class="j-doc-nav__link j-doc-nav__link--has-children">
    2.4. Setting up TLS encryption on a MariaDB server
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger content-expander__trigger--processed" aria-expanded="false" aria-controls="content-expander-8pp1qv4">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "2.4. Setting up TLS encryption on a MariaDB server"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "2.4. Setting up TLS encryption on a MariaDB server"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander content-expander--processed" id="content-expander-8pp1qv4" aria-hidden="true">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="#proc_placing-the-ca-certificate-server-certificate-and-private-key-on-the-mariadb-server_assembly_setting-up-tls-encryption-on-a-mariadb-server" class="j-doc-nav__link ">
    2.4.1. Placing the CA certificate, server certificate, and private key on the MariaDB server
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="#proc_configuring-tls-on-a-mariadb-server_assembly_setting-up-tls-encryption-on-a-mariadb-server" class="j-doc-nav__link ">
    2.4.2. Configuring TLS on a MariaDB server
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="#proc_requiring-tls-encrypted-connections-for-specific-user-accounts_assembly_setting-up-tls-encryption-on-a-mariadb-server" class="j-doc-nav__link ">
    2.4.3. Requiring TLS encrypted connections for specific user accounts
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="#assembly_globally-enabling-tls-encryption-in-mariadb-clients_using-mariadb" class="j-doc-nav__link j-doc-nav__link--has-children">
    2.5. Globally enabling TLS encryption in MariaDB clients
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger content-expander__trigger--processed" aria-expanded="false" aria-controls="content-expander-dnsrjgt">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "2.5. Globally enabling TLS encryption in MariaDB clients"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "2.5. Globally enabling TLS encryption in MariaDB clients"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander content-expander--processed" id="content-expander-dnsrjgt" aria-hidden="true">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="#proc_configuring-the-mariadb-client-to-use-tls-encryption-by-default_assembly_globally-enabling-tls-encryption-in-mariadb-clients" class="j-doc-nav__link ">
    2.5.1. Configuring the MariaDB client to use TLS encryption by default
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="#backing-up-mariadb-data_using-mariadb" class="j-doc-nav__link j-doc-nav__link--has-children">
    2.6. Backing up MariaDB data
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger content-expander__trigger--processed" aria-expanded="false" aria-controls="content-expander-474j7qv">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "2.6. Backing up MariaDB data"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "2.6. Backing up MariaDB data"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander content-expander--processed" id="content-expander-474j7qv" aria-hidden="true">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="#performing-logical-backup-with-mariadb-dump_backing-up-mariadb-data" class="j-doc-nav__link ">
    2.6.1. Performing logical backup with mariadb-dump
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="#performing-physical-online-backup_backing-up-mariadb-data" class="j-doc-nav__link ">
    2.6.2. Performing physical online backup using the Mariabackup utility
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="#restoring-data-using-the-mariabackup-tool_backing-up-mariadb-data" class="j-doc-nav__link ">
    2.6.3. Restoring data using the Mariabackup utility
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="#performing-file-system-backup_backing-up-mariadb-data" class="j-doc-nav__link ">
    2.6.4. Performing file system backup
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="#introduction-to-replication-as-a-backup-solution_backing-up-mariadb-data" class="j-doc-nav__link ">
    2.6.5. Replication as a backup solution
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="#proc_migrating-to-mariadb-10-5_using-mariadb" class="j-doc-nav__link j-doc-nav__link--has-children">
    2.7. Migrating to MariaDB 10.5
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger content-expander__trigger--processed" aria-expanded="false" aria-controls="content-expander-x2jwbgs">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "2.7. Migrating to MariaDB 10.5"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "2.7. Migrating to MariaDB 10.5"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander content-expander--processed" id="content-expander-x2jwbgs" aria-hidden="true">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="#notable-differences-between_mariadb_10_3_and_mariadb_10_5" class="j-doc-nav__link ">
    2.7.1. Notable differences between MariaDB 10.3 and MariaDB 10.5
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="#migrating_from_a_rhel_8_version_of_mariadb_10_3_to_a_rhel_9_version_of_mariadb_10_5" class="j-doc-nav__link ">
    2.7.2. Migrating from a RHEL 8 version of MariaDB 10.3 to a RHEL 9 version of MariaDB 10.5
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="#replicating-mariadb-with-galera_using-mariadb" class="j-doc-nav__link j-doc-nav__link--has-children">
    2.8. Replicating MariaDB with Galera
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger content-expander__trigger--processed" aria-expanded="false" aria-controls="content-expander-cvozlrf">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "2.8. Replicating MariaDB with Galera"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "2.8. Replicating MariaDB with Galera"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander content-expander--processed" id="content-expander-cvozlrf" aria-hidden="true">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="#introduction-to-galera-replication_replicating-mariadb-with-galera" class="j-doc-nav__link ">
    2.8.1. Introduction to MariaDB Galera Cluster
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="#components-to-build-mariadb-galera-cluster_replicating-mariadb-with-galera" class="j-doc-nav__link ">
    2.8.2. Components to build MariaDB Galera Cluster
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="#configuring-mariadb-galera-cluster_replicating-mariadb-with-galera" class="j-doc-nav__link ">
    2.8.3. Deploying MariaDB Galera Cluster
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="#adding-a-new-node-to-mariadb-galera-cluster_replicating-mariadb-with-galera" class="j-doc-nav__link ">
    2.8.4. Adding a new node to MariaDB Galera Cluster
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="#restarting-mariadb-galera-cluster_replicating-mariadb-with-galera" class="j-doc-nav__link ">
    2.8.5. Restarting MariaDB Galera Cluster
  </a>
  
          </li>
              </ol>

  
          </li>
              </ol>

  
          </li>
                  <li class="j-doc-nav__list-item">
                                      

    <a href="#assembly_using-mysql_configuring-and-using-database-servers" class="j-doc-nav__link j-doc-nav__link--has-children">
    3. Using MySQL
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger content-expander__trigger--processed" aria-expanded="false" aria-controls="content-expander-ndjou0f">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "3. Using MySQL"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "3. Using MySQL"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander content-expander--processed" id="content-expander-ndjou0f" aria-hidden="true">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="#introduction-to-mysql_assembly_using-mysql" class="j-doc-nav__link ">
    3.1. Getting started with MySQL
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="#installing-mysql_assembly_using-mysql" class="j-doc-nav__link ">
    3.2. Installing MySQL
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="#configuring-mysql_assembly_using-mysql" class="j-doc-nav__link ">
    3.3. Configuring MySQL
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="#backing-up-mysql-data_assembly_using-mysql" class="j-doc-nav__link j-doc-nav__link--has-children">
    3.4. Backing up MySQL data
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger content-expander__trigger--processed" aria-expanded="false" aria-controls="content-expander-78seubb">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "3.4. Backing up MySQL data"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "3.4. Backing up MySQL data"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander content-expander--processed" id="content-expander-78seubb" aria-hidden="true">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="#performing-logical-backup-with-mysqldump-mysql_backing-up-mysql-data" class="j-doc-nav__link ">
    3.4.1. Performing logical backup with mysqldump
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="#performing-file-system-backup-mysql_backing-up-mysql-data" class="j-doc-nav__link ">
    3.4.2. Performing file system backup
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="#introduction-to-replication-as-a-backup-solution-mysql_backing-up-mysql-data" class="j-doc-nav__link ">
    3.4.3. Replication as a backup solution
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="#proc_proc_migrating-to-a-rhel-9-version-of-mysql-8-0_assembly_using-mysql" class="j-doc-nav__link ">
    3.5. Migrating to a RHEL 9 version of MySQL 8.0
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="#replicating-mysql_assembly_using-mysql" class="j-doc-nav__link j-doc-nav__link--has-children">
    3.6. Replicating MySQL
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger content-expander__trigger--processed" aria-expanded="false" aria-controls="content-expander-ezr1ef3">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "3.6. Replicating MySQL"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "3.6. Replicating MySQL"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander content-expander--processed" id="content-expander-ezr1ef3" aria-hidden="true">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="#proc_configuring-a-mysql-source-server_replicating-mysql" class="j-doc-nav__link ">
    3.6.1. Configuring a MySQL source server
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="#proc_configuring-a-mysql-replica-server_replicating-mysql" class="j-doc-nav__link ">
    3.6.2. Configuring a MySQL replica server
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="#proc_creating-a-replication-user-on-the-mysql-source-server_replicating-mysql" class="j-doc-nav__link ">
    3.6.3. Creating a replication user on the MySQL source server
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="#proc_connecting-the-replica-server-to-the-source-server_replicating-mysql" class="j-doc-nav__link ">
    3.6.4. Connecting the replica server to the source server
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="#verification_steps" class="j-doc-nav__link ">
    3.6.5. Verification steps
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="#additional_resources" class="j-doc-nav__link ">
    3.6.6. Additional resources
  </a>
  
          </li>
              </ol>

  
          </li>
              </ol>

  
          </li>
                  <li class="j-doc-nav__list-item">
                                      

    <a href="#using-postgresql_configuring-and-using-database-servers" class="j-doc-nav__link j-doc-nav__link--has-children">
    4. Using PostgreSQL
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger content-expander__trigger--processed" aria-expanded="false" aria-controls="content-expander-zb1vudx">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "4. Using PostgreSQL"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "4. Using PostgreSQL"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander content-expander--processed" id="content-expander-zb1vudx" aria-hidden="true">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="#introduction-to-postgresql_using-postgresql" class="j-doc-nav__link ">
    4.1. Getting started with PostgreSQL
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="#installing-postgresql_using-postgresql" class="j-doc-nav__link ">
    4.2. Installing PostgreSQL
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="#con_postgresql-users_using-postgresql" class="j-doc-nav__link ">
    4.3. Creating PostgreSQL users
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="#configuring-postgresql_using-postgresql" class="j-doc-nav__link ">
    4.4. Configuring PostgreSQL
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="#proc_configuring-tls-encryption-on-a-postgresql-server_using-postgresql" class="j-doc-nav__link ">
    4.5. Configuring TLS encryption on a PostgreSQL server
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="#backing-up-postgresql-data_using-postgresql" class="j-doc-nav__link j-doc-nav__link--has-children">
    4.6. Backing up PostgreSQL data
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger content-expander__trigger--processed" aria-expanded="false" aria-controls="content-expander-ebpyynn">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "4.6. Backing up PostgreSQL data"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "4.6. Backing up PostgreSQL data"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander content-expander--processed" id="content-expander-ebpyynn" aria-hidden="true">
                  <li class="j-superdoc-subnav__item">
                          

    <a href="#backuping-postgresql-sql-dump_backing-up-postgresql-data" class="j-doc-nav__link j-doc-nav__link--has-children">
    4.6.1. Backing up PostgreSQL data with an SQL dump
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger content-expander__trigger--processed" aria-expanded="false" aria-controls="content-expander-t6wfzw2">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "4.6.1. Backing up PostgreSQL data with an SQL dump"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "4.6.1. Backing up PostgreSQL data with an SQL dump"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander content-expander--processed" id="content-expander-t6wfzw2" aria-hidden="true">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="#advantages-sql-dump_backing-up-postgresql-data" class="j-doc-nav__link ">
    4.6.1.1. Advantages and disadvantages of an SQL dump
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="#perforing-sql-dump_backing-up-postgresql-data" class="j-doc-nav__link ">
    4.6.1.2. Performing an SQL dump using pg_dump
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="#perforing-sql-dump_pg_dumpall_backing-up-postgresql-data" class="j-doc-nav__link ">
    4.6.1.3. Performing an SQL dump using pg_dumpall
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="#restoring-from-sql-dump_backing-up-postgresql-data" class="j-doc-nav__link ">
    4.6.1.4. Restoring a database dumped using pg_dump
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="#restoring-from-sql-dump-pg_dumpall_backing-up-postgresql-data" class="j-doc-nav__link ">
    4.6.1.5. Restoring databases dumped using pg_dumpall
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="#dumping-a-database-on-another-server_backing-up-postgresql-data" class="j-doc-nav__link ">
    4.6.1.6. Performing an SQL dump of a database on another server
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="#handling-sql-errors-during-restore_backing-up-postgresql-data" class="j-doc-nav__link ">
    4.6.1.7. Handling SQL errors during restore
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="#additional_resources_2" class="j-doc-nav__link ">
    4.6.1.8. Additional resources
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="#backuping-postgresql-system-level-backup_backing-up-postgresql-data" class="j-doc-nav__link j-doc-nav__link--has-children">
    4.6.2. Backing up PostgreSQL data with a file system level backup
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger content-expander__trigger--processed" aria-expanded="false" aria-controls="content-expander-yebklbh">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "4.6.2. Backing up PostgreSQL data with a file system level backup"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "4.6.2. Backing up PostgreSQL data with a file system level backup"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander content-expander--processed" id="content-expander-yebklbh" aria-hidden="true">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="#advantages_and_limitations_of_file_system_backing_up" class="j-doc-nav__link ">
    4.6.2.1. Advantages and limitations of file system backing up
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="#performing_file_system_level_backing_up" class="j-doc-nav__link ">
    4.6.2.2. Performing file system level backing up
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="#backuping-postgresql-continuous-archiving_backing-up-postgresql-data" class="j-doc-nav__link j-doc-nav__link--has-children">
    4.6.3. Backing up PostgreSQL data by continuous archiving
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger content-expander__trigger--processed" aria-expanded="false" aria-controls="content-expander-til0kdk">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "4.6.3. Backing up PostgreSQL data by continuous archiving"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "4.6.3. Backing up PostgreSQL data by continuous archiving"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander content-expander--processed" id="content-expander-til0kdk" aria-hidden="true">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="#intro-continuous-archiving" class="j-doc-nav__link ">
    4.6.3.1. Introduction to continuous archiving
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="#advantages-continuous-archiving" class="j-doc-nav__link ">
    4.6.3.2. Advantages and disadvantages of continuous archiving
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="#setting-wal-archiving" class="j-doc-nav__link ">
    4.6.3.3. Setting up WAL archiving
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="#making-base-backup" class="j-doc-nav__link ">
    4.6.3.4. Making a base backup
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="#restoring-database-with-continuous-archiving" class="j-doc-nav__link ">
    4.6.3.5. Restoring the database using a continuous archive backup
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="#additional_resources_3" class="j-doc-nav__link ">
    4.6.3.6. Additional resources
  </a>
  
          </li>
              </ol>

  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="#migrating-to-a-rhel-9-version-of-postgresql_using-postgresql" class="j-doc-nav__link j-doc-nav__link--has-children">
    4.7. Migrating to a RHEL 9 version of PostgreSQL
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger content-expander__trigger--processed" aria-expanded="false" aria-controls="content-expander-d15i3gz">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "4.7. Migrating to a RHEL 9 version of PostgreSQL"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "4.7. Migrating to a RHEL 9 version of PostgreSQL"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander content-expander--processed" id="content-expander-d15i3gz" aria-hidden="true">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="#notable-differences-between-postgresql-13-and-postgresql-15_migrating-to-a-rhel-9-version-of-postgresql" class="j-doc-nav__link ">
    4.7.1. Notable differences between PostgreSQL 13 and PostgreSQL 15
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="#fast-upgrade-using-the-pg_upgrade-tool_migrating-to-a-rhel-9-version-of-postgresql" class="j-doc-nav__link ">
    4.7.2. Fast upgrade using the pg_upgrade utility
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="#dump-and-restore-upgrade_migrating-to-a-rhel-9-version-of-postgresql" class="j-doc-nav__link ">
    4.7.3. Dump and restore upgrade
  </a>
  
          </li>
              </ol>

  
          </li>
              </ol>

  
          </li>
                  <li class="j-doc-nav__list-item">
                                    

    <a href="#idm140509576071024" class="j-doc-nav__link ">
    Legal Notice
  </a>
  
          </li>
              </ol>
    
  </div>
</nav>


              </div>
            </div>
            <div class="j-options-container j-options-container--mobile">
              <button class="j-sidebar__menu-trigger j-sidebar__menu-trigger--options content-expander__trigger content-expander__trigger--processed" aria-expanded="false" aria-controls="content-expander-9dkrw48">
                <span class="j-sidebar__menu-trigger__open-headline">
                  Settings
                </span>
                <span class="j-sidebar__menu-trigger__close-text">Close</span>
              </button>
              

  <ul class="j-doc-options__list content-expander content-expander--processed" id="content-expander-9dkrw48" aria-hidden="true">
    <li class="j-doc-options__item">
          <label class="j-doc-option__label j-doc-option__label--language" for="j-doc-language">
        Language:
      </label>
      <select id="j-doc-language" class="j-doc-option__select" data-ddg-inputtype="unknown">
                  <option value="/documentation/ko-kr/red_hat_enterprise_linux/9/html-single/configuring_and_using_database_servers">
            한국어
          </option>
                  <option value="/documentation/zh-cn/red_hat_enterprise_linux/9/html-single/configuring_and_using_database_servers">
            简体中文
          </option>
                  <option value="/documentation/ja-jp/red_hat_enterprise_linux/9/html-single/configuring_and_using_database_servers">
            日本語
          </option>
                  <option value="/documentation/en-us/red_hat_enterprise_linux/9/html-single/configuring_and_using_database_servers" selected="selected">
            English
          </option>
                  <option value="/documentation/fr-fr/red_hat_enterprise_linux/9/html-single/configuring_and_using_database_servers">
            Français
          </option>
              </select>

            <noscript>
        <div class="j-doc-option__label j-doc-option__label--language" id="j-doc-option__label--language--nojs">
          Language:
        </div>
        <ul aria-labelledby="j-doc-option__label--language--nojs" class="j-doc-option__languages-list">
                      <li>
              <a href="/documentation/ko-kr/red_hat_enterprise_linux/9/html-single/configuring_and_using_database_servers">한국어</a>
            </li>
                      <li>
              <a href="/documentation/zh-cn/red_hat_enterprise_linux/9/html-single/configuring_and_using_database_servers">简体中文</a>
            </li>
                      <li>
              <a href="/documentation/ja-jp/red_hat_enterprise_linux/9/html-single/configuring_and_using_database_servers">日本語</a>
            </li>
                      <li>
              <a href="/documentation/en-us/red_hat_enterprise_linux/9/html-single/configuring_and_using_database_servers">English</a>
            </li>
                      <li>
              <a href="/documentation/fr-fr/red_hat_enterprise_linux/9/html-single/configuring_and_using_database_servers">Français</a>
            </li>
                  </ul>
      </noscript>

      </li>

    <li class="j-doc-options__item">
    <label for="j-doc-mode" class="j-doc-option__label j-doc-option__label--format">
      Format:
    </label>
    <select id="j-doc-mode" class="j-doc-option__select" data-ddg-inputtype="unknown">
              <option value="/documentation/en-us/red_hat_enterprise_linux/9/html/configuring_and_using_database_servers" class="j-doc-options__option j-doc-options__option--multi-page">
          Multi-page
        </option>
              <option value="/documentation/en-us/red_hat_enterprise_linux/9/html-single/configuring_and_using_database_servers" selected="selected" class="j-doc-options__option j-doc-options__option--single-page">
          Single-page
        </option>
              <option value="/documentation/en-us/red_hat_enterprise_linux/9/pdf/configuring_and_using_database_servers/Red_Hat_Enterprise_Linux-9-Configuring_and_using_database_servers-en-US.pdf" class="j-doc-options__option j-doc-options__option--pdf">
          PDF
        </option>
          </select>

        <noscript>
      <div class="j-doc-option__label j-doc-option__label--format" id="j-doc-option__label--format--nojs">
        Format:
      </div>
      <ul class="j-doc-option__format-list" aria-labelledby="j-doc-option__label--format--nojs">
                  <li class="j-doc-mode-no-js__link j-doc-mode-no-js__link--multi-page"><a href="/documentation/en-us/red_hat_enterprise_linux/9/html/configuring_and_using_database_servers">Multi-page</a></li>
                  <li class="j-doc-mode-no-js__link j-doc-mode-no-js__link--single-page"><a href="/documentation/en-us/red_hat_enterprise_linux/9/html-single/configuring_and_using_database_servers">Single-page</a></li>
                  <li class="j-doc-mode-no-js__link j-doc-mode-no-js__link--pdf"><a href="/documentation/en-us/red_hat_enterprise_linux/9/pdf/configuring_and_using_database_servers/Red_Hat_Enterprise_Linux-9-Configuring_and_using_database_servers-en-US.pdf">PDF</a></li>
              </ul>
    </noscript>
  </li>
</ul>


              </div>
          </div>
                <div class="pvof-doc__tertiary-sidebar j-doc__tertiary-sidebar j-doc__tertiary-sidebar--sticky">
          <div class="pvof-doc__tertiary-sidebar__inner j-doc__tertiary-sidebar__inner"><div id="j-reading-mode-toggle" class="j-switch__wrapper j-reading-mode__toggle"><input type="checkbox" name="reading-mode" value="false" id="reading-mode-checkbox" class="j-reading-mode j-switch__input visually-hidden"><label for="reading-mode-checkbox" class="j-switch__label">Focus mode<span class="j-reading-mode__shortcut-hint" hidden=""><kbd>F</kbd></span><div class="j-switch"></div></label></div>
            <div class="j-doc__doc-options">
              <div class="j-options-container j-options-container--desktop j-options-container--desktop--processed">
                <button class="j-sidebar__menu-trigger j-sidebar__menu-trigger--tablet content-expander__trigger content-expander__trigger--processed" aria-expanded="true" aria-controls="content-expander-qvb7noh">
                  <span class="j-sidebar__menu-trigger-icon"></span>
                  <h2 class="visually-hidden">Language and Page Formatting Options</h2>
                </button>
                  

  <ul class="j-doc-options__list content-expander content-expander--processed" id="content-expander-qvb7noh" open="">
    <li class="j-doc-options__item">
          <label class="j-doc-option__label j-doc-option__label--language" for="j-doc-language--2">
        Language:
      </label>
      <select id="j-doc-language--2" class="j-doc-option__select" data-ddg-inputtype="unknown">
                  <option value="/documentation/ko-kr/red_hat_enterprise_linux/9/html-single/configuring_and_using_database_servers">
            한국어
          </option>
                  <option value="/documentation/zh-cn/red_hat_enterprise_linux/9/html-single/configuring_and_using_database_servers">
            简体中文
          </option>
                  <option value="/documentation/ja-jp/red_hat_enterprise_linux/9/html-single/configuring_and_using_database_servers">
            日本語
          </option>
                  <option value="/documentation/en-us/red_hat_enterprise_linux/9/html-single/configuring_and_using_database_servers" selected="selected">
            English
          </option>
                  <option value="/documentation/fr-fr/red_hat_enterprise_linux/9/html-single/configuring_and_using_database_servers">
            Français
          </option>
              </select>

            <noscript>
        <div class="j-doc-option__label j-doc-option__label--language" id="j-doc-option__label--language--nojs">
          Language:
        </div>
        <ul aria-labelledby="j-doc-option__label--language--nojs" class="j-doc-option__languages-list">
                      <li>
              <a href="/documentation/ko-kr/red_hat_enterprise_linux/9/html-single/configuring_and_using_database_servers">한국어</a>
            </li>
                      <li>
              <a href="/documentation/zh-cn/red_hat_enterprise_linux/9/html-single/configuring_and_using_database_servers">简体中文</a>
            </li>
                      <li>
              <a href="/documentation/ja-jp/red_hat_enterprise_linux/9/html-single/configuring_and_using_database_servers">日本語</a>
            </li>
                      <li>
              <a href="/documentation/en-us/red_hat_enterprise_linux/9/html-single/configuring_and_using_database_servers">English</a>
            </li>
                      <li>
              <a href="/documentation/fr-fr/red_hat_enterprise_linux/9/html-single/configuring_and_using_database_servers">Français</a>
            </li>
                  </ul>
      </noscript>

      </li>

    <li class="j-doc-options__item">
    <label for="j-doc-mode--2" class="j-doc-option__label j-doc-option__label--format">
      Format:
    </label>
    <select id="j-doc-mode--2" class="j-doc-option__select" data-ddg-inputtype="unknown">
              <option value="/documentation/en-us/red_hat_enterprise_linux/9/html/configuring_and_using_database_servers" class="j-doc-options__option j-doc-options__option--multi-page">
          Multi-page
        </option>
              <option value="/documentation/en-us/red_hat_enterprise_linux/9/html-single/configuring_and_using_database_servers" selected="selected" class="j-doc-options__option j-doc-options__option--single-page">
          Single-page
        </option>
              <option value="/documentation/en-us/red_hat_enterprise_linux/9/pdf/configuring_and_using_database_servers/Red_Hat_Enterprise_Linux-9-Configuring_and_using_database_servers-en-US.pdf" class="j-doc-options__option j-doc-options__option--pdf">
          PDF
        </option>
          </select>

        <noscript>
      <div class="j-doc-option__label j-doc-option__label--format" id="j-doc-option__label--format--nojs">
        Format:
      </div>
      <ul class="j-doc-option__format-list" aria-labelledby="j-doc-option__label--format--nojs">
                  <li class="j-doc-mode-no-js__link j-doc-mode-no-js__link--multi-page"><a href="/documentation/en-us/red_hat_enterprise_linux/9/html/configuring_and_using_database_servers">Multi-page</a></li>
                  <li class="j-doc-mode-no-js__link j-doc-mode-no-js__link--single-page"><a href="/documentation/en-us/red_hat_enterprise_linux/9/html-single/configuring_and_using_database_servers">Single-page</a></li>
                  <li class="j-doc-mode-no-js__link j-doc-mode-no-js__link--pdf"><a href="/documentation/en-us/red_hat_enterprise_linux/9/pdf/configuring_and_using_database_servers/Red_Hat_Enterprise_Linux-9-Configuring_and_using_database_servers-en-US.pdf">PDF</a></li>
              </ul>
    </noscript>
  </li>
</ul>


                </div>
              </div>
          </div>
        </div>

                  <div class="doc-wrapper pvof-doc__wrapper j-superdoc__content-wrapper" id="doc-wrapper">
            

  <div class="pane-page-title">
    <h1 class="title" itemprop="name">Configuring and using database servers</h1>
  </div>


  <div xml:lang="en-US" class="book" id="idm140509571506256"><div class="titlepage"><div><div class="producttitle"><span class="productname">Red&nbsp;Hat Enterprise&nbsp;Linux</span> <span class="productnumber">9</span></div><div><h2 class="subtitle">Installing, configuring, backing up and migrating data on database servers</h2></div><div><div xml:lang="en-US" class="authorgroup"><span class="orgname">Red&nbsp;Hat</span> <span class="orgdiv">Customer Content Services</span></div></div><div><a href="#idm140509576071024">Legal Notice</a></div><div><div class="abstract"><p class="title"><strong>Abstract</strong></p><div class="para">
				Install the MariaDB, MySQL, or PostgreSQL database server on 
Red&nbsp;Hat Enterprise&nbsp;Linux&nbsp;9. Configure the chosen database
 server, back up your data, and migrate your data to a later version of 
the database server.
			</div></div></div></div><hr></div><section class="preface" id="making-open-source-more-inclusive"><div class="titlepage"><div><div><h1 class="title">Making open source more inclusive</h1></div></div></div><p class="_abstract _abstract">
			Red Hat is committed to replacing problematic language in our code, 
documentation, and web properties. We are beginning with these four 
terms: master, slave, blacklist, and whitelist. Because of the enormity 
of this endeavor, these changes will be implemented gradually over 
several upcoming releases. For more details, see <a class="link" href="https://www.redhat.com/en/blog/making-open-source-more-inclusive-eradicating-problematic-language">our CTO Chris Wright’s message</a>.
		</p></section><section class="preface" id="proc_providing-feedback-on-red-hat-documentation_configuring-and-using-database-servers"><div class="titlepage"><div><div><h1 class="title">Providing feedback on Red Hat documentation</h1></div></div></div><p class="_abstract _abstract">
			We appreciate your feedback on our documentation. Let us know how we can improve it.
		</p><div class="orderedlist"><p class="title"><strong>Submitting comments on specific passages</strong></p><ol class="orderedlist" type="1"><li class="listitem">
					View the documentation in the <span class="strong strong"><strong>Multi-page HTML</strong></span> format and ensure that you see the <span class="strong strong"><strong>Feedback</strong></span> button in the upper right corner after the page fully loads.
				</li><li class="listitem">
					Use your cursor to highlight the part of the text that you want to comment on.
				</li><li class="listitem">
					Click the <span class="strong strong"><strong>Add Feedback</strong></span> button that appears near the highlighted text.
				</li><li class="listitem">
					Add your feedback and click <span class="strong strong"><strong>Submit</strong></span>.
				</li></ol></div><div class="orderedlist"><p class="title"><strong>Submitting feedback through Bugzilla (account required)</strong></p><ol class="orderedlist" type="1"><li class="listitem">
					Log in to the <a class="link" href="https://bugzilla.redhat.com/enter_bug.cgi?product=Red%20Hat%20Enterprise%20Linux%209&amp;component=Documentation">Bugzilla</a> website.
				</li><li class="listitem">
					Select the correct version from the <span class="strong strong"><strong>Version</strong></span> menu.
				</li><li class="listitem">
					Enter a descriptive title in the <span class="strong strong"><strong>Summary</strong></span> field.
				</li><li class="listitem">
					Enter your suggestion for improvement in the <span class="strong strong"><strong>Description</strong></span> field. Include links to the relevant parts of the documentation.
				</li><li class="listitem">
					Click <span class="strong strong"><strong>Submit Bug</strong></span>.
				</li></ol></div></section><section class="chapter" id="introduction-to-databases_configuring-and-using-database-servers"><div class="titlepage"><div><div><h1 class="title">Chapter 1. Introduction to database servers</h1></div></div></div><p class="_abstract _abstract">
			A database server is a service that provides features of a database 
management system (DBMS). DBMS provides utilities for database 
administration and interacts with end users, applications, and 
databases.
		</p><p>
			Red&nbsp;Hat Enterprise&nbsp;Linux 9 provides the following database management systems:
		</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
					<span class="strong strong"><strong>MariaDB 10.5</strong></span>
				</li><li class="listitem">
					<span class="strong strong"><strong>MySQL 8.0</strong></span>
				</li><li class="listitem">
					<span class="strong strong"><strong>PostgreSQL 13</strong></span>
				</li><li class="listitem">
					<span class="strong strong"><strong>Redis 6</strong></span>
				</li></ul></div></section><section class="chapter" id="using-mariadb_configuring-and-using-database-servers"><div class="titlepage"><div><div><h1 class="title">Chapter 2. Using MariaDB</h1></div></div></div><p>
			The <span class="strong strong"><strong>MariaDB</strong></span> server is an open source fast and robust database server that is based on the <span class="strong strong"><strong>MySQL</strong></span> technology. This part describes how to install and configure <span class="strong strong"><strong>MariaDB</strong></span> on a RHEL system, how to back up <span class="strong strong"><strong>MariaDB</strong></span> data, how to migrate from an earlier <span class="strong strong"><strong>MariaDB</strong></span> version, and how to replicate a database using the <span class="strong strong"><strong>MariaDB Galera Cluster</strong></span>.
		</p><section class="section" id="introduction-to-mariadb_using-mariadb"><div class="titlepage"><div><div><h2 class="title">2.1. Getting started with MariaDB</h2></div></div></div><p>
				<span class="strong strong"><strong>MariaDB</strong></span> is a 
relational database that converts data into structured information and 
provides an SQL interface for accessing data. It includes multiple 
storage engines and plug-ins, as well as geographic information system 
(GIS) and JavaScript Object Notation (JSON) features.
			</p><p>
				For Red&nbsp;Hat Enterprise&nbsp;Linux 9 this part describes:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						How to install the <span class="strong strong"><strong>MariaDB</strong></span> server in <a class="link" href="#installing-mariadb_using-mariadb" title="2.2.&nbsp;Installing MariaDB">Installing MariaDB</a>.
					</li><li class="listitem">
						How to adjust <span class="strong strong"><strong>MariaDB</strong></span> configuration in <a class="link" href="#configuring-mariadb_using-mariadb" title="2.3.&nbsp;Configuring MariaDB">Configuring MariaDB</a>.
					</li><li class="listitem">
						How to set up TLS encryption on <span class="strong strong"><strong>MariaDB</strong></span> in <a class="link" href="#assembly_setting-up-tls-encryption-on-a-mariadb-server_using-mariadb" title="2.4.&nbsp;Setting up TLS encryption on a MariaDB server">Setting up TLS encryption on MariaDB</a>.
					</li><li class="listitem">
						How to enable TLS encryption in <span class="strong strong"><strong>MariaDB</strong></span> clients globally in <a class="link" href="#assembly_globally-enabling-tls-encryption-in-mariadb-clients_using-mariadb" title="2.5.&nbsp;Globally enabling TLS encryption in MariaDB clients">Globally enabling TLS encryption in MariaDB clients</a>.
					</li><li class="listitem">
						How to back up <span class="strong strong"><strong>MariaDB</strong></span> data in <a class="link" href="#backing-up-mariadb-data_using-mariadb" title="2.6.&nbsp;Backing up MariaDB data">Backing up MariaDB data</a>.
					</li><li class="listitem">
						How to migrate from a RHEL 8 version of <span class="strong strong"><strong>MariaDB 10.3</strong></span> to RHEL 9 version of <span class="strong strong"><strong>MariaDB 10.5</strong></span>, in <a class="link" href="#proc_migrating-to-mariadb-10-5_using-mariadb" title="2.7.&nbsp;Migrating to MariaDB 10.5">Migrating to MariaDB 10.5</a>.
					</li><li class="listitem">
						How to replicate a database using the <span class="strong strong"><strong>MariaDB Galera Cluster</strong></span> in <a class="link" href="#replicating-mariadb-with-galera_using-mariadb" title="2.8.&nbsp;Replicating MariaDB with Galera">Replicating MariaDB with Galera</a>.
					</li></ul></div></section><section class="section" id="installing-mariadb_using-mariadb"><div class="titlepage"><div><div><h2 class="title">2.2. Installing MariaDB</h2></div></div></div><p class="_abstract _abstract">
				RHEL 9.0 provides <span class="strong strong"><strong>MariaDB 10.5</strong></span> as the initial version of this Application Stream, which can be installed easily as an RPM package. Additional <span class="strong strong"><strong>MariaDB</strong></span> versions will be provided as modules with a shorter life cycle in future minor releases of RHEL 9.
			</p><p>
				To install <span class="strong strong"><strong>MariaDB</strong></span>, use the following procedure.
			</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Install <span class="strong strong"><strong>MariaDB</strong></span> server packages:
					</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--ncv25yc"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed"># <span class="strong strong"><strong>dnf install mariadb-server</strong></span></pre></div></div></li><li class="listitem"><p class="simpara">
						Start the <code class="literal">mariadb</code> service:
					</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--tqqju3u"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed"># <span class="strong strong"><strong>systemctl start mariadb.service</strong></span></pre></div></div></li><li class="listitem"><p class="simpara">
						Enable the <code class="literal">mariadb</code> service to start at boot:
					</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--lot4ks1"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed"># <span class="strong strong"><strong>systemctl enable mariadb.service</strong></span></pre></div></div></li></ol></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
					The <span class="strong strong"><strong>MariaDB</strong></span> and <span class="strong strong"><strong>MySQL</strong></span>
 database servers cannot be installed in parallel in RHEL 9 due to 
conflicting RPM packages. In RHEL 9, different versions of database 
servers can be used in containers.
				</p></div></div></section><section class="section" id="configuring-mariadb_using-mariadb"><div class="titlepage"><div><div><h2 class="title">2.3. Configuring MariaDB</h2></div></div></div><p class="_abstract _abstract">
				To configure the <span class="strong strong"><strong>MariaDB</strong></span> server for networking, use the following procedure.
			</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Edit the <code class="literal">[mysqld]</code> section of the <code class="literal filename">/etc/my.cnf.d/mariadb-server.cnf</code> file. You can set the following configuration directives:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								<code class="literal">bind-address</code> - is the address on which the server listens. Possible options are:
							</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
										a host name
									</li><li class="listitem">
										an IPv4 address
									</li><li class="listitem">
										an IPv6 address
									</li></ul></div></li><li class="listitem"><p class="simpara">
								<code class="literal">skip-networking</code> - controls whether the server listens for TCP/IP connections. Possible values are:
							</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
										0 - to listen for all clients
									</li><li class="listitem">
										1 - to listen for local clients only
									</li></ul></div></li><li class="listitem">
								<code class="literal">port</code> - the port on which <span class="strong strong"><strong>MariaDB</strong></span> listens for TCP/IP connections.
							</li></ul></div></li><li class="listitem"><p class="simpara">
						Restart the <code class="literal">mariadb</code> service:
					</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--5rllwsb"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="literallayout language-none codeblock codeblock--processed"># <span class="strong strong"><strong>systemctl restart mariadb.service</strong></span></pre></div></div></li></ol></div></section><section class="section" id="assembly_setting-up-tls-encryption-on-a-mariadb-server_using-mariadb"><div class="titlepage"><div><div><h2 class="title">2.4. Setting up TLS encryption on a MariaDB server</h2></div></div></div><p class="_abstract _abstract">
				By default, <span class="strong strong"><strong>MariaDB</strong></span> uses unencrypted connections. For secure connections, enable TLS support on the <span class="strong strong"><strong>MariaDB</strong></span> server and configure your clients to establish encrypted connections.
			</p><section class="section" id="proc_placing-the-ca-certificate-server-certificate-and-private-key-on-the-mariadb-server_assembly_setting-up-tls-encryption-on-a-mariadb-server"><div class="titlepage"><div><div><h3 class="title">2.4.1. Placing the CA certificate, server certificate, and private key on the MariaDB server</h3></div></div></div><p class="_abstract _abstract">
					Before you can enable TLS encryption in the <span class="strong strong"><strong>MariaDB</strong></span> server, store the certificate authority (CA) certificate, the server certificate, and the private key on the <span class="strong strong"><strong>MariaDB</strong></span> server.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							The following files in Privacy Enhanced Mail (PEM) format have been copied to the server:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
									The private key of the server: <code class="literal filename">server.example.com.key.pem</code>
								</li><li class="listitem">
									The server certificate: <code class="literal filename">server.example.com.crt.pem</code>
								</li><li class="listitem">
									The Certificate Authority (CA) certificate: <code class="literal filename">ca.crt.pem</code>
								</li></ul></div><p class="simpara">
							For details about creating a private key and certificate signing 
request (CSR), as well as about requesting a certificate from a CA, see 
your CA’s documentation.
						</p></li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Store the CA and server certificates in the <code class="literal filename">/etc/pki/tls/certs/</code> directory:
						</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--cojhie4"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="literallayout white-space-pre language-none codeblock codeblock--processed"># <span class="strong strong"><strong>mv <span class="emphasis"><em>&lt;path&gt;</em></span>/server.example.com.crt.pem /etc/pki/tls/certs/</strong></span>
# <span class="strong strong"><strong>mv <span class="emphasis"><em>&lt;path&gt;</em></span>/ca.crt.pem /etc/pki/tls/certs/</strong></span></pre></div></div></li><li class="listitem"><p class="simpara">
							Set permissions on the CA and server certificate that enable the <span class="strong strong"><strong>MariaDB</strong></span> server to read the files:
						</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--vn3g4zc"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="literallayout white-space-pre language-none codeblock codeblock--processed"># <span class="strong strong"><strong>chmod 644 /etc/pki/tls/certs/server.example.com.crt.pem /etc/pki/tls/certs/ca.crt.pem</strong></span></pre></div></div><p class="simpara">
							Because certificates are part of the communication before a 
secure connection is established, any client can retrieve them without 
authentication. Therefore, you do not need to set strict permissions on 
the CA and server certificate files.
						</p></li><li class="listitem"><p class="simpara">
							Store the server’s private key in the <code class="literal filename">/etc/pki/tls/private/</code> directory:
						</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--exjir0q"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="literallayout white-space-pre language-none codeblock codeblock--processed"># <span class="strong strong"><strong>mv <span class="emphasis"><em>&lt;path&gt;</em></span>/server.example.com.key.pem /etc/pki/tls/private/</strong></span></pre></div></div></li><li class="listitem"><p class="simpara">
							Set secure permissions on the server’s private key:
						</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--esapmdl"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="literallayout white-space-pre language-none codeblock codeblock--processed"># <span class="strong strong"><strong>chmod 640 /etc/pki/tls/private/server.example.com.key.pem</strong></span>
# <span class="strong strong"><strong>chgrp mysql /etc/pki/tls/private/server.example.com.key.pem</strong></span></pre></div></div><p class="simpara">
							If unauthorized users have access to the private key, connections to the <span class="strong strong"><strong>MariaDB</strong></span> server are no longer secure.
						</p></li><li class="listitem"><p class="simpara">
							Restore the SELinux context:
						</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--7qz69ms"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="literallayout white-space-pre language-none codeblock codeblock--processed"># <span class="strong strong"><strong> restorecon -Rv /etc/pki/tls/</strong></span></pre></div></div></li></ol></div></section><section class="section" id="proc_configuring-tls-on-a-mariadb-server_assembly_setting-up-tls-encryption-on-a-mariadb-server"><div class="titlepage"><div><div><h3 class="title">2.4.2. Configuring TLS on a MariaDB server</h3></div></div></div><p class="_abstract _abstract">
					To improve security, enable TLS support on the <span class="strong strong"><strong>MariaDB</strong></span> server. As a result, clients can transmit data with the server using TLS encryption.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							You installed the <span class="strong strong"><strong>MariaDB</strong></span> server.
						</li><li class="listitem">
							The <code class="literal systemitem">mariadb</code> service is running.
						</li><li class="listitem"><p class="simpara">
							The following files in Privacy Enhanced Mail (PEM) format exist on the server and are readable by the <code class="literal systemitem">mysql</code> user:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
									The private key of the server: <code class="literal filename">/etc/pki/tls/private/server.example.com.key.pem</code>
								</li><li class="listitem">
									The server certificate: <code class="literal filename">/etc/pki/tls/certs/server.example.com.crt.pem</code>
								</li><li class="listitem">
									The Certificate Authority (CA) certificate <code class="literal filename">/etc/pki/tls/certs/ca.crt.pem</code>
								</li></ul></div></li><li class="listitem">
							The subject distinguished name (DN) or the subject alternative 
name (SAN) field in the server certificate matches the server’s host 
name.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Create the <code class="literal filename">/etc/my.cnf.d/mariadb-server-tls.cnf</code> file:
						</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
									Add the following content to configure the paths to the private key, server and CA certificate:
								</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--pkion9i"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="literallayout white-space-pre language-none codeblock codeblock--processed">[mariadb]
ssl_key = <span class="emphasis"><em>/etc/pki/tls/private/server.example.com.key.pem</em></span>
ssl_cert = <span class="emphasis"><em>/etc/pki/tls/certs/server.example.com.crt.pem</em></span>
ssl_ca = <span class="emphasis"><em>/etc/pki/tls/certs/ca.crt.pem</em></span></pre></div></div></li><li class="listitem"><p class="simpara">
									If you have a Certificate Revocation List (CRL), configure the <span class="strong strong"><strong>MariaDB</strong></span> server to use it:
								</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--1okv90g"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="literallayout white-space-pre language-none codeblock codeblock--processed"><span class="strong strong"><strong>ssl_crl = <span class="emphasis"><em>/etc/pki/tls/certs/example.crl.pem</em></span></strong></span></pre></div></div></li><li class="listitem"><p class="simpara">
									Optional: Reject connection attempts without encryption. To enable this feature, append:
								</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--fa97ykt"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="literallayout white-space-pre language-none codeblock codeblock--processed"><span class="strong strong"><strong>require_secure_transport = on</strong></span></pre></div></div></li><li class="listitem"><p class="simpara">
									Optional: Set the TLS versions the server should support. For example, to support TLS 1.2 and TLS 1.3, append:
								</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--xqljin7"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="literallayout white-space-pre language-none codeblock codeblock--processed"><span class="strong strong"><strong>tls_version = <span class="emphasis"><em>TLSv1.2</em></span>,<span class="emphasis"><em>TLSv1.3</em></span></strong></span></pre></div></div><p class="simpara">
									By default, the server supports TLS 1.1, TLS 1.2, and TLS 1.3.
								</p></li></ol></div></li><li class="listitem"><p class="simpara">
							Restart the <code class="literal systemitem">mariadb</code> service:
						</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--j516j53"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="literallayout white-space-pre language-none codeblock codeblock--processed"># <span class="strong strong"><strong>systemctl restart mariadb</strong></span></pre></div></div></li></ol></div><div class="formalpara"><p class="title"><strong>Verification</strong></p><p>
						To simplify troubleshooting, perform the following steps on the <span class="strong strong"><strong>MariaDB</strong></span> server before you configure the local client to use TLS encryption:
					</p></div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Verify that <span class="strong strong"><strong>MariaDB</strong></span> now has TLS encryption enabled:
						</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--9rjbng0"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="literallayout white-space-pre language-none codeblock codeblock--processed"># <span class="strong strong"><strong>mysql -u <span class="emphasis"><em>root</em></span> -p -e "SHOW GLOBAL VARIABLES LIKE 'have_ssl';"</strong></span>
+---------------+-----------------+
| Variable_name | Value           |
+---------------+-----------------+
| have_ssl      | YES             |
+---------------+-----------------+</pre></div></div><p class="simpara">
							If the <code class="literal parameter">have_ssl</code> variable is set to <code class="literal command">yes</code>, TLS encryption is enabled.
						</p></li><li class="listitem"><p class="simpara">
							If you configured the <span class="strong strong"><strong>MariaDB</strong></span> service to only support specific TLS versions, display the <code class="literal parameter">tls_version</code> variable:
						</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--rvsap6j"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="literallayout white-space-pre language-none codeblock codeblock--processed"># <span class="strong strong"><strong>mysql -u <span class="emphasis"><em>root</em></span> -p -e "SHOW GLOBAL VARIABLES LIKE 'tls_version';"</strong></span>
+---------------+-----------------+
| Variable_name | Value           |
+---------------+-----------------+
| tls_version   | <span class="emphasis"><em>TLSv1.2,TLSv1.3</em></span> |
+---------------+-----------------+</pre></div></div></li></ol></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
							<a class="link" href="#proc_placing-the-ca-certificate-server-certificate-and-private-key-on-the-mariadb-server_assembly_setting-up-tls-encryption-on-a-mariadb-server" title="2.4.1.&nbsp;Placing the CA certificate, server certificate, and private key on the MariaDB server">Placing the CA certificate, server certificate, and private key on the MariaDB server</a>
						</li></ul></div></section><section class="section" id="proc_requiring-tls-encrypted-connections-for-specific-user-accounts_assembly_setting-up-tls-encryption-on-a-mariadb-server"><div class="titlepage"><div><div><h3 class="title">2.4.3. Requiring TLS encrypted connections for specific user accounts</h3></div></div></div><p class="_abstract _abstract">
					Users that have access to sensitive data should always use a 
TLS-encrypted connection to avoid sending data unencrypted over the 
network.
				</p><p>
					If you cannot configure on the server that a secure transport is required for all connections (<code class="literal command">require_secure_transport = on</code>), configure individual user accounts to require TLS encryption.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							The <span class="strong strong"><strong>MariaDB</strong></span> server has TLS support enabled.
						</li><li class="listitem">
							The user you configure to require secure transport exists.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Connect as an administrative user to the <span class="strong strong"><strong>MariaDB</strong></span> server:
						</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--4p4tn7y"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="literallayout white-space-pre language-none codeblock codeblock--processed"># <span class="strong strong"><strong>mysql -u <span class="emphasis"><em>root</em></span> -p -h <span class="emphasis"><em>server.example.com</em></span></strong></span></pre></div></div><p class="simpara">
							If your administrative user has no permissions to access the server remotely, perform the command on the <span class="strong strong"><strong>MariaDB</strong></span> server and connect to <code class="literal">localhost</code>.
						</p></li><li class="listitem"><p class="simpara">
							Use the <code class="literal command">REQUIRE SSL</code> clause to enforce that a user must connect using a TLS-encrypted connection:
						</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--8tfyss7"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="literallayout white-space-pre language-none codeblock codeblock--processed">MariaDB [(none)]&gt; <span class="strong strong"><strong>ALTER USER <span class="emphasis"><em>'example</em></span>'@<span class="emphasis"><em>'%'</em></span> REQUIRE SSL;</strong></span></pre></div></div></li></ol></div><div class="orderedlist"><p class="title"><strong>Verification</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Connect to the server as the <code class="literal systemitem">example</code> user using TLS encryption:
						</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--y78u9ts"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="literallayout white-space-pre language-none codeblock codeblock--processed"># <span class="strong strong"><strong>mysql -u <span class="emphasis"><em>example</em></span> -p -h server.example.com --ssl</strong></span>
...
MariaDB [(none)]&gt;</pre></div></div><p class="simpara">
							If no error is shown and you have access to the interactive <span class="strong strong"><strong>MariaDB</strong></span> console, the connection with TLS succeeds.
						</p></li><li class="listitem"><p class="simpara">
							Attempt to connect as the <code class="literal systemitem">example</code> user with TLS disabled:
						</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--095j5ej"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="literallayout white-space-pre language-none codeblock codeblock--processed"># <span class="strong strong"><strong>mysql -u <span class="emphasis"><em>example</em></span> -p -h server.example.com --skip-ssl</strong></span>
ERROR 1045 (28000): Access denied for user 'example'@'server.example.com' (using password: YES)</pre></div></div><p class="simpara">
							The server rejected the login attempt, because TLS is required for this user, but disabled (<code class="literal option">--skip-ssl</code>).
						</p></li></ol></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
							<a class="link" href="#assembly_setting-up-tls-encryption-on-a-mariadb-server_using-mariadb" title="2.4.&nbsp;Setting up TLS encryption on a MariaDB server">Configuring TLS on a MariaDB server</a>
						</li></ul></div></section></section><section class="section" id="assembly_globally-enabling-tls-encryption-in-mariadb-clients_using-mariadb"><div class="titlepage"><div><div><h2 class="title">2.5. Globally enabling TLS encryption in MariaDB clients</h2></div></div></div><p class="_abstract _abstract">
				If your <span class="strong strong"><strong>MariaDB</strong></span> 
server supports TLS encryption, configure your clients to establish only
 secure connections and to verify the server certificate. This procedure
 describes how to enable TLS support for all users on the server.
			</p><section class="section" id="proc_configuring-the-mariadb-client-to-use-tls-encryption-by-default_assembly_globally-enabling-tls-encryption-in-mariadb-clients"><div class="titlepage"><div><div><h3 class="title">2.5.1. Configuring the MariaDB client to use TLS encryption by default</h3></div></div></div><p class="_abstract _abstract">
					On RHEL, you can globally configure that the <span class="strong strong"><strong>MariaDB</strong></span>
 client uses TLS encryption and verifies that the Common Name (CN) in 
the server certificate matches the hostname the user connects to. This 
prevents man-in-the-middle attacks.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							The <span class="strong strong"><strong>MariaDB</strong></span> server has TLS support enabled.
						</li><li class="listitem">
							If the certificate authority (CA) that issued the server’s 
certificate is not trusted by RHEL, the CA certificate has been copied 
to the client.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							If RHEL does not trust the CA that issued the server’s certificate:
						</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
									Copy the CA certificate to the <code class="literal filename">/etc/pki/ca-trust/source/anchors/</code> directory:
								</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--6rbzj90"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="literallayout white-space-pre language-none codeblock codeblock--processed"># <span class="strong strong"><strong>cp <span class="emphasis"><em>&lt;path&gt;</em></span>/ca.crt.pem /etc/pki/ca-trust/source/anchors/</strong></span></pre></div></div></li><li class="listitem"><p class="simpara">
									Set permissions that enable all users to read the CA certificate file:
								</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--mkem1w7"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="literallayout white-space-pre language-none codeblock codeblock--processed"># <span class="strong strong"><strong>chmod 644 /etc/pki/ca-trust/source/anchors/ca.crt.pem</strong></span></pre></div></div></li><li class="listitem"><p class="simpara">
									Rebuild the CA trust database:
								</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--ui5ig9u"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="literallayout white-space-pre language-none codeblock codeblock--processed"># <span class="strong strong"><strong>update-ca-trust</strong></span></pre></div></div></li></ol></div></li><li class="listitem"><p class="simpara">
							Create the <code class="literal filename">/etc/my.cnf.d/mariadb-client-tls.cnf</code> file with the following content:
						</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--bhoyx0b"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="literallayout white-space-pre language-none codeblock codeblock--processed">[client-mariadb]
ssl
ssl-verify-server-cert</pre></div></div><p class="simpara">
							These settings define that the <span class="strong strong"><strong>MariaDB</strong></span> client uses TLS encryption (<code class="literal parameter">ssl</code>) and that the client compares the hostname with the CN in the server certificate (<code class="literal parameter">ssl-verify-server-cert</code>).
						</p></li></ol></div><div class="itemizedlist"><p class="title"><strong>Verification</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							Connect to the server using the hostname, and display the server status:
						</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--zxk23rd"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="literallayout white-space-pre language-none codeblock codeblock--processed"># <span class="strong strong"><strong>mysql -u <span class="emphasis"><em>root</em></span> -p -h <span class="emphasis"><em>server.example.com</em></span> -e status</strong></span>
...
SSL:        Cipher in use is TLS_AES_256_GCM_SHA384</pre></div></div><p class="simpara">
							If the <code class="literal parameter">SSL</code> entry contains <code class="literal command">Cipher in use is…​</code>, the connection is encrypted.
						</p><p class="simpara">
							Note that the user you use in this command has permissions to authenticate remotely.
						</p><p class="simpara">
							If the hostname you connect to does not match the hostname in the TLS certificate of the server, the <code class="literal parameter">ssl-verify-server-cert</code> parameter causes the connection to fail. For example, if you connect to <code class="literal systemitem">localhost</code>:
						</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--l0s1y5o"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="literallayout white-space-pre language-none codeblock codeblock--processed"># <span class="strong strong"><strong>mysql -u <span class="emphasis"><em>root</em></span> -p -h <span class="emphasis"><em>localhost</em></span> -e status</strong></span>
ERROR 2026 (HY000): SSL connection error: Validation of SSL server certificate failed</pre></div></div></li></ul></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
							The <code class="literal parameter">--ssl*</code> parameter descriptions in the <code class="literal citetitle">mysql(1)</code> man page.
						</li></ul></div></section></section><section class="section" id="backing-up-mariadb-data_using-mariadb"><div class="titlepage"><div><div><h2 class="title">2.6. Backing up MariaDB data</h2></div></div></div><p>
				There are two main ways to back up data from a <span class="strong strong"><strong>MariaDB</strong></span> database in Red&nbsp;Hat Enterprise&nbsp;Linux 9:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						Logical backup
					</li><li class="listitem">
						Physical backup
					</li></ul></div><p>
				<span class="strong strong"><strong>Logical backup</strong></span> 
consists of the SQL statements necessary to restore the data. This type 
of backup exports information and records in plain text files.
			</p><p>
				The main advantage of logical backup over physical backup is 
portability and flexibility. The data can be restored on other hardware 
configurations, <span class="strong strong"><strong>MariaDB</strong></span> versions or Database Management System (DBMS), which is not possible with physical backups.
			</p><p>
				Note that logical backup can be performed if the <code class="literal">mariadb.service</code> is running. Logical backup does not include log and configuration files.
			</p><p>
				<span class="strong strong"><strong>Physical backup</strong></span> consists of copies of files and directories that store the content.
			</p><p>
				Physical backup has the following advantages compared to logical backup:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						Output is more compact.
					</li><li class="listitem">
						Backup is smaller in size.
					</li><li class="listitem">
						Backup and restore are faster.
					</li><li class="listitem">
						Backup includes log and configuration files.
					</li></ul></div><p>
				Note that physical backup must be performed when the <code class="literal">mariadb.service</code> is not running or all tables in the database are locked to prevent changes during the backup.
			</p><p>
				You can use one of the following <span class="strong strong"><strong>MariaDB</strong></span> backup approaches to back up data from a <span class="strong strong"><strong>MariaDB</strong></span> database:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						Logical backup with <code class="literal">mariadb-dump</code>
					</li><li class="listitem">
						Physical online backup using the <code class="literal">Mariabackup</code> utility
					</li><li class="listitem">
						File system backup
					</li><li class="listitem">
						Replication as a backup solution
					</li></ul></div><section class="section" id="performing-logical-backup-with-mariadb-dump_backing-up-mariadb-data"><div class="titlepage"><div><div><h3 class="title">2.6.1. Performing logical backup with mariadb-dump</h3></div></div></div><p class="_abstract _abstract">
					The <span class="strong strong"><strong><span class="application application">mariadb-dump</span></strong></span>
 client is a backup utility, which can be used to dump a database or a 
collection of databases for the purpose of a backup or transfer to 
another database server. The output of <span class="strong strong"><strong><span class="application application">mariadb-dump</span></strong></span> typically consists of SQL statements to re-create the server table structure, populate it with data, or both. <span class="strong strong"><strong><span class="application application">mariadb-dump</span></strong></span> can also generate files in other formats, including XML and delimited text formats, such as CSV.
				</p><p>
					To perform the <span class="strong strong"><strong><span class="application application">mariadb-dump</span></strong></span> backup, you can use one of the following options:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							Back up one or more selected databases
						</li><li class="listitem">
							Back up all databases
						</li><li class="listitem">
							Back up a subset of tables from one database
						</li></ul></div><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							To dump a single database, run:
						</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--c4jurny"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed"># <span class="strong strong"><strong>mariadb-dump [<span class="emphasis"><em>options</em></span>] --databases <span class="emphasis"><em>db_name</em></span> &gt; <span class="emphasis"><em>backup-file.sql</em></span></strong></span></pre></div></div></li><li class="listitem"><p class="simpara">
							To dump multiple databases at once, run:
						</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--ff6xzol"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed"># <span class="strong strong"><strong>mariadb-dump [<span class="emphasis"><em>options</em></span>] --databases <span class="emphasis"><em>db_name1</em></span> [<span class="emphasis"><em>db_name2</em></span> ...] &gt; <span class="emphasis"><em>backup-file.sql</em></span></strong></span></pre></div></div></li><li class="listitem"><p class="simpara">
							To dump all databases, run:
						</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--jhtxgng"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed"># <span class="strong strong"><strong>mariadb-dump [<span class="emphasis"><em>options</em></span>] --all-databases &gt; <span class="emphasis"><em>backup-file.sql</em></span></strong></span></pre></div></div></li><li class="listitem"><p class="simpara">
							To load one or more dumped full databases back into a server, run:
						</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--p7qjcvx"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed"># <span class="strong strong"><strong>mariadb &lt; <span class="emphasis"><em>backup-file.sql</em></span></strong></span></pre></div></div></li><li class="listitem"><p class="simpara">
							To load a database to a remote <span class="strong strong"><strong>MariaDB</strong></span> server, run:
						</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--ecyx4cs"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed"># <span class="strong strong"><strong>mariadb --host=<span class="emphasis"><em>remote_host</em></span> &lt; <span class="emphasis"><em>backup-file.sql</em></span></strong></span></pre></div></div></li><li class="listitem"><p class="simpara">
							To dump a subset of tables from one database, add a list of the chosen tables at the end of the <code class="literal command">mariadb-dump</code> command:
						</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--8i8pi9e"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed"># <span class="strong strong"><strong>mariadb-dump [<span class="emphasis"><em>options</em></span>] <span class="emphasis"><em>db_name</em></span> [<span class="emphasis"><em>tbl_name</em></span> ...​] &gt; <span class="emphasis"><em>backup-file.sql</em></span></strong></span></pre></div></div></li><li class="listitem"><p class="simpara">
							To load a subset of tables dumped from one database, run:
						</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--hntdqv7"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed"># <span class="strong strong"><strong>mariadb <span class="emphasis"><em>db_name</em></span> &lt; <span class="emphasis"><em>backup-file.sql</em></span></strong></span></pre></div></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
								The <span class="emphasis"><em>db_name</em></span> database must exist at this point.
							</p></div></div></li><li class="listitem"><p class="simpara">
							To see a list of the options that <span class="strong strong"><strong><span class="application application">mariadb-dump</span></strong></span> supports, run:
						</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--p7xvmpz"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed">$ <span class="strong strong"><strong>mariadb-dump --help</strong></span></pre></div></div></li></ul></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
							<a class="link" href="https://mariadb.com/kb/en/library/mysqldump/">MariaDB Documentation - mariadb-dump</a>
						</li></ul></div></section><section class="section" id="performing-physical-online-backup_backing-up-mariadb-data"><div class="titlepage"><div><div><h3 class="title">2.6.2. Performing physical online backup using the Mariabackup utility</h3></div></div></div><p class="_abstract _abstract">
					<span class="strong strong"><strong><span class="application application">Mariabackup</span></strong></span>
 is a utility based on the Percona XtraBackup technology, which enables 
performing physical online backups of InnoDB, Aria, and MyISAM tables. 
This utility is provided by the <code class="literal package">mariadb-backup</code> package from the AppStream repository.
				</p><p>
					<span class="strong strong"><strong><span class="application application">Mariabackup</span></strong></span> supports full backup capability for <span class="strong strong"><strong>MariaDB</strong></span> server, which includes encrypted and compressed data.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							The <code class="literal package">mariadb-backup</code> package is installed on the system:
						</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--3h1dgze"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="literallayout language-none codeblock codeblock--processed"># <span class="strong strong"><strong>dnf install mariadb-backup</strong></span></pre></div></div></li></ul></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							You must provide <span class="strong strong"><strong><span class="application application">Mariabackup</span></strong></span>
 with credentials for the user under which the backup will be run. You 
can provide the credentials either on the command line or by a 
configuration file.
						</li><li class="listitem">
							Users of <span class="strong strong"><strong><span class="application application">Mariabackup</span></strong></span> must have the <code class="literal">RELOAD</code>, <code class="literal">LOCK TABLES</code>, and <code class="literal">REPLICATION CLIENT</code> privileges.
						</li></ul></div><p>
					To create a backup of a database using <span class="strong strong"><strong><span class="application application">Mariabackup</span></strong></span>, use the following procedure.
				</p><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							To create a backup while providing credentials on the command line, run:
						</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--51q8syc"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="literallayout language-none codeblock codeblock--processed">$ <span class="strong strong"><strong>mariabackup --backup --target-dir &lt;backup_directory&gt; --user &lt;backup_user&gt; --password &lt;backup_passwd&gt;</strong></span></pre></div></div><p class="simpara">
							The <code class="literal option">target-dir</code> option defines
 the directory where the backup files are stored. If you want to perform
 a full backup, the target directory must be empty or not exist.
						</p><p class="simpara">
							The <code class="literal option">user</code> and <code class="literal option">password</code> options allow you to configure the user name and the password.
						</p></li><li class="listitem"><p class="simpara">
							To create a backup with credentials set in a configuration file:
						</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
									Create a configuration file in the <code class="literal">/etc/my.cnf.d/</code> directory, for example, <code class="literal filename">/etc/my.cnf.d/mariabackup.cnf</code>.
								</li><li class="listitem"><p class="simpara">
									Add the following lines into the <code class="literal">[xtrabackup]</code> or <code class="literal">[mysqld]</code> section of the new file:
								</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--ieh5z2a"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="literallayout language-none codeblock codeblock--processed">[xtrabackup]
user=myuser
password=mypassword</pre></div></div></li><li class="listitem"><p class="simpara">
									Perform the backup:
								</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--gnwe4mv"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="literallayout language-none codeblock codeblock--processed">$ <span class="strong strong"><strong>mariabackup --backup --target-dir &lt;backup_directory&gt;</strong></span></pre></div></div></li></ol></div></li></ul></div><div class="admonition important"><div class="admonition_header">Important</div><div><p>
						<span class="strong strong"><strong><span class="application application">Mariabackup</span></strong></span> does not read options in the <code class="literal">[mariadb]</code> section of configuration files. If a non-default data directory is specified on a <span class="strong strong"><strong>MariaDB</strong></span> server, you must specify this directory in the <code class="literal">[xtrabackup]</code> or <code class="literal">[mysqld]</code> sections of configuration files so that <span class="strong strong"><strong><span class="application application">Mariabackup</span></strong></span> is able to find the data directory.
					</p><p>
						To specify a non-default data directory, include the following line in the <code class="literal">[xtrabackup]</code> or <code class="literal">[mysqld]</code> sections of <span class="strong strong"><strong>MariaDB</strong></span> configuration files:
					</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--hvgtisa"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="literallayout language-none codeblock codeblock--processed">datadir=/var/mycustomdatadir</pre></div></div></div></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
							<a class="link" href="https://mariadb.com/kb/en/library/full-backup-and-restore-with-mariadb-backup/">Full Backup and Restore with Mariabackup</a>
						</li></ul></div></section><section class="section" id="restoring-data-using-the-mariabackup-tool_backing-up-mariadb-data"><div class="titlepage"><div><div><h3 class="title">2.6.3. Restoring data using the Mariabackup utility</h3></div></div></div><p class="_abstract _abstract">
					When the backup is complete, you can restore the data from the backup by using the <code class="literal command">mariabackup</code> command with one of the following options:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							<code class="literal option">--copy-back</code> allows you to keep the original backup files.
						</li><li class="listitem">
							<code class="literal option">--move-back</code> moves the backup files to the data directory and removes the original backup files.
						</li></ul></div><p>
					To restore data using the <span class="strong strong"><strong><span class="application application">Mariabackup</span></strong></span> utility, use the following procedure.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							Verify that the <code class="literal">mariadb</code> service is not running:
						</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--9uh4i0n"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed"># <span class="strong strong"><strong>systemctl stop mariadb.service</strong></span></pre></div></div></li><li class="listitem">
							Verify that the data directory is empty.
						</li><li class="listitem">
							Users of <span class="strong strong"><strong><span class="application application">Mariabackup</span></strong></span> must have the <code class="literal">RELOAD</code>, <code class="literal">LOCK TABLES</code>, and <code class="literal">REPLICATION CLIENT</code> privileges.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Run the <code class="literal command">mariabackup</code> command:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
									To restore data and keep the original backup files, use the <code class="literal option">--copy-back</code> option:
								</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--kuhi5p7"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed">$ <span class="strong strong"><strong>mariabackup --copy-back --target-dir=/var/mariadb/backup/</strong></span></pre></div></div></li><li class="listitem"><p class="simpara">
									To restore data and remove the original backup files, use the <code class="literal option">--move-back</code> option:
								</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--o6d3nfc"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed">$ <span class="strong strong"><strong>mariabackup --move-back --target-dir=/var/mariadb/backup/</strong></span></pre></div></div></li></ul></div></li><li class="listitem"><p class="simpara">
							Fix the file permissions.
						</p><p class="simpara">
							When restoring a database, <span class="strong strong"><strong><span class="application application">Mariabackup</span></strong></span> preserves the file and directory privileges of the backup. However, <span class="strong strong"><strong><span class="application application">Mariabackup</span></strong></span>
 writes the files to disk as the user and group restoring the database. 
After restoring a backup, you may need to adjust the owner of the data 
directory to match the user and group for the <span class="strong strong"><strong>MariaDB</strong></span> server, typically <code class="literal">mysql</code> for both.
						</p><p class="simpara">
							For example, to recursively change ownership of the files to the <code class="literal">mysql</code> user and group:
						</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--fy9m5zc"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed"># <span class="strong strong"><strong>chown -R mysql:mysql /var/lib/mysql/</strong></span></pre></div></div></li><li class="listitem"><p class="simpara">
							Start the <code class="literal">mariadb</code> service:
						</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--83sxlzr"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed"># <span class="strong strong"><strong>systemctl start mariadb.service</strong></span></pre></div></div></li></ol></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
							<a class="link" href="https://mariadb.com/kb/en/library/full-backup-and-restore-with-mariabackup/">Full Backup and Restore with Mariabackup</a>
						</li></ul></div></section><section class="section" id="performing-file-system-backup_backing-up-mariadb-data"><div class="titlepage"><div><div><h3 class="title">2.6.4. Performing file system backup</h3></div></div></div><p>
					To create a file system backup of <span class="strong strong"><strong>MariaDB</strong></span> data files, copy the content of the <span class="strong strong"><strong>MariaDB</strong></span> data directory to your backup location.
				</p><p>
					To back up also your current configuration or the log files, use the optional steps of the following procedure.
				</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Stop the <code class="literal">mariadb</code> service:
						</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--tmokcby"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="literallayout language-none codeblock codeblock--processed"># <span class="strong strong"><strong>systemctl stop mariadb.service</strong></span></pre></div></div></li><li class="listitem"><p class="simpara">
							Copy the data files to the required location:
						</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--q1v0ffq"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="literallayout language-none codeblock codeblock--processed"># <span class="strong strong"><strong>cp -r /var/lib/mysql /<span class="emphasis"><em>backup-location</em></span></strong></span></pre></div></div></li><li class="listitem"><p class="simpara">
							Optionally, copy the configuration files to the required location:
						</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--tmqlw4g"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="literallayout language-none codeblock codeblock--processed"># <span class="strong strong"><strong>cp -r /etc/my.cnf /etc/my.cnf.d /<span class="emphasis"><em>backup-location</em></span>/configuration</strong></span></pre></div></div></li><li class="listitem"><p class="simpara">
							Optionally, copy the log files to the required location:
						</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--ephxgwj"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="literallayout language-none codeblock codeblock--processed"># <span class="strong strong"><strong>cp /var/log/mariadb/</strong></span> /<span class="emphasis"><em>backup-location</em></span>/logs*</pre></div></div></li><li class="listitem"><p class="simpara">
							Start the <code class="literal">mariadb</code> service:
						</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--y4a2nwr"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="literallayout language-none codeblock codeblock--processed"># <span class="strong strong"><strong>systemctl start mariadb.service</strong></span></pre></div></div></li><li class="listitem"><p class="simpara">
							When loading the backed up data from the backup location to the <code class="literal">/var/lib/mysql</code> directory, ensure that <code class="literal">mysql:mysql</code> is an owner of all data in <code class="literal">/var/lib/mysql</code>:
						</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--dwoknw0"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="literallayout language-none codeblock codeblock--processed"># <span class="strong strong"><strong>chown -R mysql:mysql /var/lib/mysql</strong></span></pre></div></div></li></ol></div></section><section class="section" id="introduction-to-replication-as-a-backup-solution_backing-up-mariadb-data"><div class="titlepage"><div><div><h3 class="title">2.6.5. Replication as a backup solution</h3></div></div></div><p>
					Replication is an alternative backup solution for source servers. 
If a source server replicates to a replica server, backups can be run on
 the replica without any impact on the source. The source can still run 
while you shut down the replica and back the data up from the replica.
				</p><div class="admonition warning"><div class="admonition_header">Warning</div><div><p>
						Replication itself is not a sufficient backup solution. 
Replication protects source servers against hardware failures, but it 
does not ensure protection against data loss. It is recommended that you
 use any other backup solution on the replica together with this method.
					</p></div></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
							<a class="link" href="#replicating-mariadb-with-galera_using-mariadb" title="2.8.&nbsp;Replicating MariaDB with Galera">Replicating MariaDB with Galera</a>
						</li><li class="listitem">
							<a class="link" href="https://mariadb.com/kb/en/library/replication-as-a-backup-solution/">Replication as a backup solution</a>
						</li></ul></div></section></section><section class="section" id="proc_migrating-to-mariadb-10-5_using-mariadb"><div class="titlepage"><div><div><h2 class="title">2.7. Migrating to MariaDB 10.5</h2></div></div></div><p class="_abstract _abstract">
				In RHEL 8, the <span class="strong strong"><strong>MariaDB</strong></span> server is available in versions 10.3 and 10.5, each provided by a separate module stream. RHEL 9 provides <span class="strong strong"><strong>MariaDB 10.5</strong></span> and <span class="strong strong"><strong>MySQL 8.0.</strong></span> This part describes migration from a RHEL 8 version of <span class="strong strong"><strong>MariaDB 10.3</strong></span> to RHEL 9 version of <span class="strong strong"><strong>MariaDB 10.5.</strong></span>
			</p><section class="section" id="notable-differences-between_mariadb_10_3_and_mariadb_10_5"><div class="titlepage"><div><div><h3 class="title">2.7.1. Notable differences between MariaDB 10.3 and MariaDB 10.5</h3></div></div></div><p>
					Significant changes between <span class="strong strong"><strong>MariaDB 10.3</strong></span> and <span class="strong strong"><strong>MariaDB 10.5</strong></span> include:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							<span class="strong strong"><strong>MariaDB</strong></span> now uses the <code class="literal">unix_socket</code> authentication plug-in by default. The plug-in enables users to use operating system credentials when connecting to <span class="strong strong"><strong>MariaDB</strong></span> through the local UNIX socket file.
						</li><li class="listitem">
							<code class="literal">MariaDB</code> adds <code class="literal">mariadb-*</code> named binaries and <code class="literal">mysql*</code> symbolic links pointing to the <code class="literal">mariadb-*</code> binaires. For example, the <code class="literal">mysqladmin</code>, <code class="literal">mysqlaccess</code>, and <code class="literal">mysqlshow</code> symlinks point to the <code class="literal">mariadb-admin</code>, <code class="literal">mariadb-access</code>, and <code class="literal">mariadb-show</code> binaries, respectively.
						</li><li class="listitem">
							The <code class="literal">SUPER</code> privilege has been split 
into several privileges to better align with each user role. As a 
result, certain statements have changed required privileges.
						</li><li class="listitem">
							In parallel replication, the <code class="literal">slave_parallel_mode</code> now defaults to <code class="literal">optimistic</code>.
						</li><li class="listitem">
							In the <span class="strong strong"><strong>InnoDB</strong></span> storage engine, defaults of the following variables have been changed: <code class="literal">innodb_adaptive_hash_index</code> to <code class="literal">OFF</code> and <code class="literal">innodb_checksum_algorithm</code> to <code class="literal">full_crc32</code>.
						</li><li class="listitem"><p class="simpara">
							<span class="strong strong"><strong>MariaDB</strong></span> now uses the <code class="literal">libedit</code> implementation of the underlying software managing the <span class="strong strong"><strong>MariaDB</strong></span> command history (the <code class="literal">.mysql_history</code> file) instead of the previously used <code class="literal">readline</code> library. This change impacts users working directly with the <code class="literal">.mysql_history</code> file. Note that <code class="literal">.mysql_history</code> is a file managed by the <span class="strong strong"><strong>MariaDB</strong></span> or <span class="strong strong"><strong>MySQL</strong></span> applications, and users should not work with the file directly. The human-readable appearance is coincidental.
						</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
								To increase security, you can consider not maintaining a history file. To disable the command history recording:
							</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
										Remove the <code class="literal">.mysql_history</code> file if it exists.
									</li><li class="listitem"><p class="simpara">
										Use either of the following approaches:
									</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
												Set the <code class="literal">MYSQL_HISTFILE</code> variable to <code class="literal">/dev/null</code> and include this setting in any of your shell’s startup files.
											</li><li class="listitem"><p class="simpara">
												Change the <code class="literal">.mysql_history</code> file to a symbolic link to <code class="literal">/dev/null</code>:
											</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--362qyx2"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed">$ <span class="strong strong"><strong>ln -s /dev/null $HOME/.mysql_history</strong></span></pre></div></div></li></ul></div></li></ol></div></div></div></li></ul></div><p>
					<span class="strong strong"><strong>MariaDB Galera Cluster</strong></span> has been upgraded to version 4 with the following notable changes:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							<span class="strong strong"><strong>Galera</strong></span> adds a
 new streaming replication feature, which supports replicating 
transactions of unlimited size. During an execution of streaming 
replication, a cluster replicates a transaction in small fragments.
						</li><li class="listitem">
							<span class="strong strong"><strong>Galera</strong></span> now fully supports Global Transaction ID (GTID).
						</li><li class="listitem">
							The default value for the <code class="literal">wsrep_on</code> option in the <code class="literal">/etc/my.cnf.d/galera.cnf</code> file has changed from <code class="literal">1</code> to <code class="literal">0</code> to prevent end users from starting <code class="literal">wsrep</code> replication without configuring required additional options.
						</li></ul></div><p>
					Changes to the PAM plug-in in <span class="strong strong"><strong>MariaDB 10.5</strong></span> include:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							<span class="strong strong"><strong>MariaDB 10.5</strong></span> 
adds a new version of the Pluggable Authentication Modules (PAM) 
plug-in. The PAM plug-in version 2.0 performs PAM authentication using a
 separate <code class="literal">setuid root</code> helper binary, which enables <span class="strong strong"><strong>MariaDB</strong></span> to use additional PAM modules.
						</li><li class="listitem">
							The helper binary can be executed only by users in the <code class="literal">mysql</code> group. By default, the group contains only the <code class="literal">mysql</code> user. Red Hat recommends that administrators do not add more users to the <code class="literal">mysql</code> group to prevent password-guessing attacks without throttling or logging through this helper utility.
						</li><li class="listitem">
							In <span class="strong strong"><strong>MariaDB 10.5</strong></span>, the Pluggable Authentication Modules (PAM) plug-in and its related files have been moved to a new package, <code class="literal">mariadb-pam</code>. As a result, no new <code class="literal">setuid root</code> binary is introduced on systems that do not use PAM authentication for <code class="literal">MariaDB</code>.
						</li><li class="listitem">
							The <code class="literal">mariadb-pam</code> package contains both PAM plug-in versions: version 2.0 is the default, and version 1.0 is available as the <code class="literal">auth_pam_v1</code> shared object library.
						</li><li class="listitem">
							The <code class="literal">mariadb-pam</code> package is not installed by default with the <span class="strong strong"><strong>MariaDB</strong></span> server. To make the PAM authentication plug-in available in <span class="strong strong"><strong>MariaDB 10.5</strong></span>, install the <code class="literal">mariadb-pam</code> package manually.
						</li></ul></div></section><section class="section" id="migrating_from_a_rhel_8_version_of_mariadb_10_3_to_a_rhel_9_version_of_mariadb_10_5"><div class="titlepage"><div><div><h3 class="title">2.7.2. Migrating from a RHEL 8 version of MariaDB 10.3 to a RHEL 9 version of MariaDB 10.5</h3></div></div></div><p class="_abstract _abstract">
					This procedure describes migrating from the <span class="strong strong"><strong>MariaDB 10.3</strong></span> to the <span class="strong strong"><strong>MariaDB 10.5</strong></span> using the <code class="literal">mariadb-upgrade</code> utility.
				</p><p>
					The <code class="literal">mariadb-upgrade</code> utility is provided by the <code class="literal">mariadb-server-utils</code> subpackage, which is installed as a dependency of the <code class="literal">mariadb-server</code> package.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							Before performing the upgrade, back up all your data stored in the <span class="strong strong"><strong>MariaDB</strong></span> databases.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Ensure that the <code class="literal">mariadb-server</code> package is installed on the RHEL 9 system:
						</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--bx4bixy"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed"># <span class="strong strong"><strong>dnf install mariadb-server</strong></span></pre></div></div></li><li class="listitem"><p class="simpara">
							Ensure that the <code class="literal">mariadb</code> service is not running on either of the source and target systems at the time of copying data:
						</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--0j87rnh"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed"># <span class="strong strong"><strong>systemctl stop mariadb.service</strong></span></pre></div></div></li><li class="listitem">
							Copy the data from the source location to the <code class="literal">/var/lib/mysql/</code> directory on the RHEL 9 target system.
						</li><li class="listitem"><p class="simpara">
							Set the appropriate permissions and SELinux context for copied files on the target system:
						</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--vn77jrn"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed"># <span class="strong strong"><strong>restorecon -vr /var/lib/mysql</strong></span></pre></div></div></li><li class="listitem"><p class="simpara">
							Ensure that <code class="literal">mysql:mysql</code> is owner of all data in the <code class="literal">/var/lib/mysql</code> directory:
						</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--3wy4vsj"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed"># <span class="strong strong"><strong>chown -R mysql:mysql /var/lib/mysql</strong></span></pre></div></div></li><li class="listitem">
							Adjust configuration so that option files located in <code class="literal">/etc/my.cnf.d/</code> include only options valid for <span class="strong strong"><strong>MariaDB 10.5</strong></span>. For details, see upstream documentation for <a class="link" href="https://mariadb.com/kb/en/upgrading-from-mariadb-103-to-mariadb-104/#options-that-have-changed-default-values">MariaDB 10.4</a> and <a class="link" href="https://mariadb.com/kb/en/upgrading-from-mariadb-104-to-mariadb-105/#options-that-have-been-removed-or-renamed">MariaDB 10.5</a>.
						</li><li class="listitem"><p class="simpara">
							Start the <span class="strong strong"><strong>MariaDB</strong></span> server on the target system.
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
									When upgrading a database running standalone:
								</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--ksi7avn"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed"># <span class="strong strong"><strong>systemctl start mariadb.service</strong></span></pre></div></div></li><li class="listitem"><p class="simpara">
									When upgrading a <span class="strong strong"><strong>Galera</strong></span> cluster node:
								</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--3fdprgj"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed"># <span class="strong strong"><strong>galera_new_cluster</strong></span></pre></div></div><p class="simpara">
									The <code class="literal">mariadb</code> service will be started automatically.
								</p></li></ul></div></li><li class="listitem"><p class="simpara">
							Execute the <span class="strong strong"><strong>mariadb-upgrade</strong></span> utility to check and repair internal tables.
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
									When upgrading a database running standalone:
								</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--oh9o2ce"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed">$ <span class="strong strong"><strong>mariadb-upgrade</strong></span></pre></div></div></li><li class="listitem"><p class="simpara">
									When upgrading a <span class="strong strong"><strong>Galera</strong></span> cluster node:
								</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--qpea4ni"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed">$ <span class="strong strong"><strong>mariadb-upgrade --skip-write-binlog</strong></span></pre></div></div></li></ul></div></li></ol></div><div class="admonition important"><div class="admonition_header">Important</div><div><p>
						There are certain risks and known problems related to an in-place 
upgrade. For example, some queries might not work or they will be run in
 different order than before the upgrade. For more information about 
these risks and problems, and for general information about an in-place 
upgrade, see <a class="link" href="https://mariadb.com/kb/en/release-notes-mariadb-105-series/">MariaDB 10.5 Release Notes</a>.
					</p></div></div></section></section><section class="section" id="replicating-mariadb-with-galera_using-mariadb"><div class="titlepage"><div><div><h2 class="title">2.8. Replicating MariaDB with Galera</h2></div></div></div><p class="_abstract _abstract">
				This section describes how to replicate a MariaDB database using the
 Galera solution on Red&nbsp;Hat Enterprise&nbsp;Linux 9.
			</p><section class="section" id="introduction-to-galera-replication_replicating-mariadb-with-galera"><div class="titlepage"><div><div><h3 class="title">2.8.1. Introduction to MariaDB Galera Cluster</h3></div></div></div><p class="_abstract _abstract">
					Galera replication is based on the creation of a synchronous multi-source <span class="strong strong"><strong>MariaDB Galera Cluster</strong></span>
 consisting of multiple MariaDB servers. Unlike the traditional 
primary/replica setup where replicas are usually read-only, nodes in the
 MariaDB Galera Cluster can be all writable.
				</p><p>
					The interface between Galera replication and a <span class="strong strong"><strong>MariaDB</strong></span> database is defined by the write set replication API (<span class="strong strong"><strong>wsrep API</strong></span>).
				</p><p>
					The main features of <span class="strong strong"><strong>MariaDB Galera Cluster</strong></span> are:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							Synchronous replication
						</li><li class="listitem">
							Active-active multi-source topology
						</li><li class="listitem">
							Read and write to any cluster node
						</li><li class="listitem">
							Automatic membership control, failed nodes drop from the cluster
						</li><li class="listitem">
							Automatic node joining
						</li><li class="listitem">
							Parallel replication on row level
						</li><li class="listitem">
							Direct client connections: users can log on to the cluster nodes,
 and work with the nodes directly while the replication runs
						</li></ul></div><p>
					Synchronous replication means that a server replicates a 
transaction at commit time by broadcasting the write set associated with
 the transaction to every node in the cluster. The client (user 
application) connects directly to the Database Management System (DBMS),
 and experiences behavior that is similar to native <span class="strong strong"><strong>MariaDB</strong></span>.
				</p><p>
					Synchronous replication guarantees that a change that happened on 
one node in the cluster happens on other nodes in the cluster at the 
same time.
				</p><p>
					Therefore, synchronous replication has the following advantages over asynchronous replication:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							No delay in propagation of the changes between particular cluster nodes
						</li><li class="listitem">
							All cluster nodes are always consistent
						</li><li class="listitem">
							The latest changes are not lost if one of the cluster nodes crashes
						</li><li class="listitem">
							Transactions on all cluster nodes are executed in parallel
						</li><li class="listitem">
							Causality across the whole cluster
						</li></ul></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
							<a class="link" href="https://mariadb.com/kb/en/library/about-galera-replication/">About Galera replication</a>
						</li><li class="listitem">
							<a class="link" href="https://mariadb.com/kb/en/library/what-is-mariadb-galera-cluster/">What is MariaDB Galera Cluster</a>
						</li><li class="listitem">
							<a class="link" href="https://mariadb.com/kb/en/library/getting-started-with-mariadb-galera-cluster/">Getting started with MariaDB Galera Cluster</a>
						</li></ul></div></section><section class="section" id="components-to-build-mariadb-galera-cluster_replicating-mariadb-with-galera"><div class="titlepage"><div><div><h3 class="title">2.8.2. Components to build MariaDB Galera Cluster</h3></div></div></div><p class="_abstract _abstract">
					To build <span class="strong strong"><strong>MariaDB Galera Cluster</strong></span>, you must install the following packages on your system:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							<code class="literal package">mariadb-server-galera</code> - contains support files and scripts for <span class="strong strong"><strong>MariaDB Galera Cluster</strong></span>.
						</li><li class="listitem">
							<code class="literal package">mariadb-server</code> - is patched by <span class="strong strong"><strong>MariaDB</strong></span> upstream to include the write set replication API (<span class="strong strong"><strong>wsrep API</strong></span>). This API provides the interface between <span class="strong strong"><strong>Galera</strong></span> replication and <span class="strong strong"><strong>MariaDB</strong></span>.
						</li><li class="listitem"><p class="simpara">
							<code class="literal package">galera</code> - is patched by <span class="strong strong"><strong>MariaDB</strong></span> upstream to add full support for <span class="strong strong"><strong><span class="application application">MariaDB</span></strong></span>. The <code class="literal package">galera</code> package contains the following:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
									<span class="strong strong"><strong>Galera Replication Library</strong></span> provides the whole replication functionality.
								</li><li class="listitem">
									The <span class="strong strong"><strong>Galera Arbitrator</strong></span> utility can be used as a cluster member that participates in voting in split-brain scenarios. However, <span class="strong strong"><strong>Galera Arbitrator</strong></span> cannot participate in the actual replication.
								</li><li class="listitem">
									<span class="strong strong"><strong>Galera Systemd service</strong></span> and <span class="strong strong"><strong>Galera wrapper script</strong></span> which are used for deploying the Galera Arbitrator utility. RHEL 9 provides the upstream version of these files, located at <code class="literal">/usr/lib/systemd/system/garbd.service</code> and <code class="literal">/usr/sbin/garb-systemd</code>.
								</li></ul></div></li></ul></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
							<a class="link" href="https://mariadb.com/kb/en/library/about-galera-replication/#generic-replication-library">Galera Replication Library</a>
						</li><li class="listitem">
							<a class="link" href="https://galeracluster.com/library/documentation/arbitrator.html">Galera Arbitrator</a>
						</li><li class="listitem">
							<a class="link" href="https://github.com/codership/mysql-wsrep">mysql-wsrep project</a>
						</li></ul></div></section><section class="section" id="configuring-mariadb-galera-cluster_replicating-mariadb-with-galera"><div class="titlepage"><div><div><h3 class="title">2.8.3. Deploying MariaDB Galera Cluster</h3></div></div></div><p class="_abstract _abstract">
					You can deploy the <span class="strong strong"><strong>MariaDB Galera Cluster</strong></span> packages and update the configuration. To form a new cluster, you must bootstrap the first node of the cluster.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							Install the <span class="strong strong"><strong>MariaDB Galera Cluster</strong></span> packages:
						</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--wqv60wy"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed"># <span class="strong strong"><strong>dnf install mariadb-server-galera</strong></span></pre></div></div><p class="simpara">
							As a result, the following packages are installed together with their dependencies:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
									<code class="literal package">mariadb-server-galera</code>
								</li><li class="listitem">
									<code class="literal package">mariadb-server</code>
								</li><li class="listitem"><p class="simpara">
									<code class="literal package">galera</code>
								</p><p class="simpara">
									For more information about these packages reqired to build <span class="strong strong"><strong>MariaDB Galera Cluster</strong></span>, see <a class="link" href="#components-to-build-mariadb-galera-cluster_replicating-mariadb-with-galera" title="2.8.2.&nbsp;Components to build MariaDB Galera Cluster">Components to build MariaDB Cluster</a>.
								</p></li></ul></div></li><li class="listitem"><p class="simpara">
							The <span class="strong strong"><strong>MariaDB</strong></span> server replication configuration must be updated before the system is added to a cluster for the first time.
						</p><p class="simpara">
							The default configuration is distributed in the <code class="literal filename">/etc/my.cnf.d/galera.cnf</code> file.
						</p><p class="simpara">
							Before deploying <span class="strong strong"><strong>MariaDB Galera Cluster</strong></span>, set the <code class="literal option">wsrep_cluster_address</code> option in the <code class="literal filename">/etc/my.cnf.d/galera.cnf</code> file on all nodes to start with the following string:
						</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--efxfagc"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed">gcomm://</pre></div></div><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem"><p class="simpara">
									For the initial node, it is possible to set <code class="literal option">wsrep_cluster_address</code> as an empty list:
								</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--31rkhaq"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed">wsrep_cluster_address="gcomm://"</pre></div></div></li><li class="listitem"><p class="simpara">
									For all other nodes, set <code class="literal option">wsrep_cluster_address</code> to include an address to any node which is already a part of the running cluster. For example:
								</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--gdzdih4"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed">wsrep_cluster_address="gcomm://10.0.0.10"</pre></div></div><p class="simpara">
									For more information about how to set Galera Cluster address, see <a class="link" href="https://mariadb.com/kb/en/library/galera-cluster-address/">Galera Cluster Address</a>.
								</p></li></ul></div></li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Bootstrap a first node of a new cluster by running the following wrapper on that node:
						</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--p8lno9m"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed"># <span class="strong strong"><strong>galera_new_cluster</strong></span></pre></div></div><p class="simpara">
							This wrapper ensures that the <span class="strong strong"><strong>MariaDB</strong></span> server daemon (<code class="literal">mariadbd</code>) runs with the <code class="literal option">--wsrep-new-cluster</code>
 option. This option provides the information that there is no existing 
cluster to connect to. Therefore, the node creates a new UUID to 
identify the new cluster.
						</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
								The <code class="literal">mariadb</code> service supports a systemd method for interacting with multiple <span class="strong strong"><strong>MariaDB</strong></span> server processes. Therefore, in cases with multiple running <span class="strong strong"><strong>MariaDB</strong></span> servers, you can bootstrap a specific instance by specifying the instance name as a suffix:
							</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--np6x6tr"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed"># <span class="strong strong"><strong>galera_new_cluster <span class="emphasis"><em>mariadb@node1</em></span></strong></span></pre></div></div></div></div></li><li class="listitem"><p class="simpara">
							Connect other nodes to the cluster by running the following command on each of the nodes:
						</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--elp9whv"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed"># <span class="strong strong"><strong>systemctl start mariadb</strong></span></pre></div></div><p class="simpara">
							As a result, the node connects to the cluster, and synchronizes itself with the state of the cluster.
						</p></li></ol></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
							<a class="link" href="https://mariadb.com/kb/en/library/getting-started-with-mariadb-galera-cluster/">Getting started with MariaDB Galera Cluster</a>
						</li></ul></div></section><section class="section" id="adding-a-new-node-to-mariadb-galera-cluster_replicating-mariadb-with-galera"><div class="titlepage"><div><div><h3 class="title">2.8.4. Adding a new node to MariaDB Galera Cluster</h3></div></div></div><p class="_abstract _abstract">
					To add a new node to <span class="strong strong"><strong>MariaDB Galera Cluster</strong></span>, use the following procedure.
				</p><p>
					Note that you can also use this procedure to reconnect an already existing node.
				</p><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							On the particular node, provide an address to one or more existing cluster members in the <code class="literal option">wsrep_cluster_address</code> option within the <code class="literal">[mariadb]</code> section of the <code class="literal filename">/etc/my.cnf.d/galera.cnf</code> configuration file :
						</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--jwi5o6b"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="literallayout language-none codeblock codeblock--processed">[mariadb]
wsrep_cluster_address="<span class="emphasis"><em>gcomm://192.168.0.1</em></span>"</pre></div></div><p class="simpara">
							When a new node connects to one of the existing cluster nodes, it is able to see all nodes in the cluster.
						</p><p class="simpara">
							However, preferably list all nodes of the cluster in <code class="literal option">wsrep_cluster_address</code>.
						</p><p class="simpara">
							As a result, any node can join a cluster by connecting to any 
other cluster node, even if one or more cluster nodes are down. When all
 members agree on the membership, the cluster’s state is changed. If the
 new node’s state is different from the state of the cluster, the new 
node requests either an Incremental State Transfer (IST) or a State 
Snapshot Transfer (SST) to ensure consistency with the other nodes.
						</p></li></ul></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
							<a class="link" href="https://mariadb.com/kb/en/library/getting-started-with-mariadb-galera-cluster/">Getting started with MariaDB Galera Cluster</a>
						</li><li class="listitem">
							<a class="link" href="https://mariadb.com/kb/en/library/documentation/replication/galera-cluster/state-snapshot-transfers-ssts-in-galera-cluster/introduction-to-state-snapshot-transfers-ssts/">Introduction to State Snapshot Transfers</a>
						</li></ul></div></section><section class="section" id="restarting-mariadb-galera-cluster_replicating-mariadb-with-galera"><div class="titlepage"><div><div><h3 class="title">2.8.5. Restarting MariaDB Galera Cluster</h3></div></div></div><p class="_abstract _abstract">
					If you shut down all nodes at the same time, you stop the cluster, 
and the running cluster no longer exists. However, the cluster’s data 
still exist.
				</p><p>
					To restart the cluster, bootstrap a first node as described in <a class="link" href="#configuring-mariadb-galera-cluster_replicating-mariadb-with-galera" title="2.8.3.&nbsp;Deploying MariaDB Galera Cluster">Configuring MariaDB Galera cluster</a>.
				</p><div class="admonition warning"><div class="admonition_header">Warning</div><div><p>
						If the cluster is not bootstrapped, and <code class="literal">mariadbd</code> on the first node is started with only the <code class="literal command">systemctl start mariadb</code> command, the node tries to connect to at least one of the nodes listed in the <code class="literal option">wsrep_cluster_address</code> option in the <code class="literal filename">/etc/my.cnf.d/galera.cnf</code> file. If no nodes are currently running, the restart fails.
					</p></div></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
							<a class="link" href="https://mariadb.com/kb/en/library/getting-started-with-mariadb-galera-cluster/">Getting started with MariaDB Galera Cluster</a>.
						</li></ul></div></section></section></section><section class="chapter" id="assembly_using-mysql_configuring-and-using-database-servers"><div class="titlepage"><div><div><h1 class="title">Chapter 3. Using MySQL</h1></div></div></div><p>
			The <span class="strong strong"><strong>MySQL</strong></span> server is an open source fast and robust database server. This part describes how to install and configure <span class="strong strong"><strong>MySQL</strong></span> on a RHEL system, how to back up <span class="strong strong"><strong>MySQL</strong></span> data, how to migrate from an earlier <span class="strong strong"><strong>MySQL</strong></span> version, and how to replicate a <span class="strong strong"><strong>MySQL</strong></span>.
		</p><section class="section" id="introduction-to-mysql_assembly_using-mysql"><div class="titlepage"><div><div><h2 class="title">3.1. Getting started with MySQL</h2></div></div></div><p>
				<span class="strong strong"><strong>MySQL</strong></span> is a 
relational database that converts data into structured information and 
provides an SQL interface for accessing data. It includes multiple 
storage engines and plug-ins, as well as geographic information system 
(GIS) and JavaScript Object Notation (JSON) features.
			</p><p>
				This part describes:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						How to install the <span class="strong strong"><strong>MySQL</strong></span> server in <a class="link" href="#installing-mysql_assembly_using-mysql" title="3.2.&nbsp;Installing MySQL">Installing MySQL</a>.
					</li><li class="listitem">
						How to adjust <span class="strong strong"><strong>MySQL</strong></span> configuration in <a class="link" href="#configuring-mysql_assembly_using-mysql" title="3.3.&nbsp;Configuring MySQL">Configuring MySQL</a>.
					</li><li class="listitem">
						How to back up <span class="strong strong"><strong>MySQL</strong></span> data in <a class="link" href="#backing-up-mysql-data_assembly_using-mysql" title="3.4.&nbsp;Backing up MySQL data">Backing up MySQL data</a>.
					</li><li class="listitem">
						How to migrate from a RHEL 8 version of <span class="strong strong"><strong>MySQL 8.0</strong></span> to a RHEL 9 version of <span class="strong strong"><strong>MySQL 8.0</strong></span> in <a class="link" href="#proc_proc_migrating-to-a-rhel-9-version-of-mysql-8-0_assembly_using-mysql" title="3.5.&nbsp;Migrating to a RHEL 9 version of MySQL 8.0">Migrating to a RHEL 9 version of MySQL 8.0</a>.
					</li><li class="listitem">
						How to replicate a <span class="strong strong"><strong>MySQL</strong></span> database in <a class="link" href="#replicating-mysql_assembly_using-mysql" title="3.6.&nbsp;Replicating MySQL">Replicating MySQL</a>.
					</li></ul></div></section><section class="section" id="installing-mysql_assembly_using-mysql"><div class="titlepage"><div><div><h2 class="title">3.2. Installing MySQL</h2></div></div></div><p>
				RHEL 9.0 provides <span class="strong strong"><strong>MySQL 8.0</strong></span> as the initial version of this Application Stream, which you can install easily as an RPM package.
			</p><p>
				To install <span class="strong strong"><strong>MySQL</strong></span>, use the following procedure.
			</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Install <span class="strong strong"><strong>MySQL</strong></span> server packages:
					</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--xqv5n3f"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed"># <span class="strong strong"><strong>dnf install mysql-server</strong></span></pre></div></div></li><li class="listitem"><p class="simpara">
						Start the <code class="literal">mysqld</code> service:
					</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--el8w7fy"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed"># <span class="strong strong"><strong>systemctl start mysqld.service</strong></span></pre></div></div></li><li class="listitem"><p class="simpara">
						Enable the <code class="literal">mysqld</code> service to start at boot:
					</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--gi1xixe"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed"># <span class="strong strong"><strong>systemctl enable mysqld.service</strong></span></pre></div></div></li><li class="listitem"><p class="simpara">
						<span class="emphasis"><em>Recommended:</em></span> To improve security when installing <span class="strong strong"><strong>MySQL</strong></span>, run the following command:
					</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--cqji22a"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed">$ <span class="strong strong"><strong>mysql_secure_installation</strong></span></pre></div></div><p class="simpara">
						The command launches a fully interactive script, which prompts for
 each step in the process. The script enables you to improve security in
 the following ways:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								Setting a password for root accounts
							</li><li class="listitem">
								Removing anonymous users
							</li><li class="listitem">
								Disallowing remote root logins (outside the local host)
							</li></ul></div></li></ol></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
					The <span class="strong strong"><strong>MySQL</strong></span> and <span class="strong strong"><strong>MariaDB</strong></span>
 database servers cannot be installed in parallel in RHEL 9 due to 
conflicting RPM packages. In RHEL 9, different versions of database 
servers can be used in containers.
				</p></div></div></section><section class="section" id="configuring-mysql_assembly_using-mysql"><div class="titlepage"><div><div><h2 class="title">3.3. Configuring MySQL</h2></div></div></div><p class="_abstract _abstract">
				To configure the <span class="strong strong"><strong>MySQL</strong></span> server for networking, use the following procedure.
			</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Edit the <code class="literal">[mysqld]</code> section of the <code class="literal filename">/etc/my.cnf.d/mysql-server.cnf</code> file. You can set the following configuration directives:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								<code class="literal">bind-address</code> - is the address on which the server listens. Possible options are:
							</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
										a host name
									</li><li class="listitem">
										an IPv4 address
									</li><li class="listitem">
										an IPv6 address
									</li></ul></div></li><li class="listitem"><p class="simpara">
								<code class="literal">skip-networking</code> - controls whether the server listens for TCP/IP connections. Possible values are:
							</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
										0 - to listen for all clients
									</li><li class="listitem">
										1 - to listen for local clients only
									</li></ul></div></li><li class="listitem">
								<code class="literal">port</code> - the port on which <span class="strong strong"><strong>MySQL</strong></span> listens for TCP/IP connections.
							</li></ul></div></li><li class="listitem"><p class="simpara">
						Restart the <code class="literal">mysqld</code> service:
					</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--bsr3hlx"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed"># <span class="strong strong"><strong>systemctl restart mysqld.service</strong></span></pre></div></div></li></ol></div></section><section class="section" id="backing-up-mysql-data_assembly_using-mysql"><div class="titlepage"><div><div><h2 class="title">3.4. Backing up MySQL data</h2></div></div></div><p>
				There are two main ways to back up data from a <span class="strong strong"><strong>MySQL</strong></span> database in Red&nbsp;Hat Enterprise&nbsp;Linux 9:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						Logical backup
					</li><li class="listitem">
						Physical backup
					</li></ul></div><p>
				<span class="strong strong"><strong>Logical backup</strong></span> 
consists of the SQL statements necessary to restore the data. This type 
of backup exports information and records in plain text files.
			</p><p>
				The main advantage of logical backup over physical backup is 
portability and flexibility. The data can be restored on other hardware 
configurations, <span class="strong strong"><strong>MySQL</strong></span> versions or Database Management System (DBMS), which is not possible with physical backups.
			</p><p>
				Note that logical backup can be performed if the <code class="literal">mysqld.service</code> is running. Logical backup does not include log and configuration files.
			</p><p>
				<span class="strong strong"><strong>Physical backup</strong></span> consists of copies of files and directories that store the content.
			</p><p>
				Physical backup has the following advantages compared to logical backup:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						Output is more compact.
					</li><li class="listitem">
						Backup is smaller in size.
					</li><li class="listitem">
						Backup and restore are faster.
					</li><li class="listitem">
						Backup includes log and configuration files.
					</li></ul></div><p>
				Note that physical backup must be performed when the <code class="literal">mysqld.service</code> is not running or all tables in the database are locked to prevent changes during the backup.
			</p><p>
				You can use one of the following <span class="strong strong"><strong>MySQL</strong></span> backup approaches to back up data from a <span class="strong strong"><strong>MySQL</strong></span> database:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						Logical backup with <code class="literal">mysqldump</code>
					</li><li class="listitem">
						File system backup
					</li><li class="listitem">
						Replication as a backup solution
					</li></ul></div><section class="section" id="performing-logical-backup-with-mysqldump-mysql_backing-up-mysql-data"><div class="titlepage"><div><div><h3 class="title">3.4.1. Performing logical backup with mysqldump</h3></div></div></div><p>
					The <span class="strong strong"><strong><span class="application application">mysqldump</span></strong></span>
 client is a backup utility, which can be used to dump a database or a 
collection of databases for the purpose of a backup or transfer to 
another database server. The output of <span class="strong strong"><strong><span class="application application">mysqldump</span></strong></span> typically consists of SQL statements to re-create the server table structure, populate it with data, or both. <span class="strong strong"><strong><span class="application application">mysqldump</span></strong></span> can also generate files in other formats, including XML and delimited text formats, such as CSV.
				</p><p>
					To perform the <span class="strong strong"><strong><span class="application application">mysqldump</span></strong></span> backup, you can use one of the following options:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							Back up one or more selected databases
						</li><li class="listitem">
							Back up all databases
						</li><li class="listitem">
							Back up a subset of tables from one database
						</li></ul></div><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							To dump a single database, run:
						</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--rvc05n6"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed"># <span class="strong strong"><strong>mysqldump [<span class="emphasis"><em>options</em></span>] --databases <span class="emphasis"><em>db_name</em></span> &gt; <span class="emphasis"><em>backup-file.sql</em></span></strong></span></pre></div></div></li><li class="listitem"><p class="simpara">
							To dump multiple databases at once, run:
						</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--2wsdqps"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed"># <span class="strong strong"><strong>mysqldump [<span class="emphasis"><em>options</em></span>] --databases <span class="emphasis"><em>db_name1</em></span> [<span class="emphasis"><em>db_name2</em></span> ...] &gt; <span class="emphasis"><em>backup-file.sql</em></span></strong></span></pre></div></div></li><li class="listitem"><p class="simpara">
							To dump all databases, run:
						</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--6k539fw"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed"># <span class="strong strong"><strong>mysqldump [<span class="emphasis"><em>options</em></span>] --all-databases &gt; <span class="emphasis"><em>backup-file.sql</em></span></strong></span></pre></div></div></li><li class="listitem"><p class="simpara">
							To load one or more dumped full databases back into a server, run:
						</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--vsjs65f"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed"># <span class="strong strong"><strong>mysql &lt; <span class="emphasis"><em>backup-file.sql</em></span></strong></span></pre></div></div></li><li class="listitem"><p class="simpara">
							To load a database to a remote <span class="strong strong"><strong>MySQL</strong></span> server, run:
						</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--2chx2qx"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed"># <span class="strong strong"><strong>mysql --host=<span class="emphasis"><em>remote_host</em></span> &lt; <span class="emphasis"><em>backup-file.sql</em></span></strong></span></pre></div></div></li><li class="listitem"><p class="simpara">
							To dump a subset of tables from one database, add a list of the chosen tables at the end of the <code class="literal command">mysqldump</code> command:
						</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--mzhbb4q"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed"># <span class="strong strong"><strong>mysqldump [<span class="emphasis"><em>options</em></span>] <span class="emphasis"><em>db_name</em></span> [<span class="emphasis"><em>tbl_name</em></span> ...​] &gt; <span class="emphasis"><em>backup-file.sql</em></span></strong></span></pre></div></div></li><li class="listitem"><p class="simpara">
							To load a subset of tables dumped from one database, run:
						</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--obp9zc3"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed"># <span class="strong strong"><strong>mysql <span class="emphasis"><em>db_name</em></span> &lt; <span class="emphasis"><em>backup-file.sql</em></span></strong></span></pre></div></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
								The <span class="emphasis"><em>db_name</em></span> database must exist at this point.
							</p></div></div></li><li class="listitem"><p class="simpara">
							To see a list of the options that <span class="strong strong"><strong><span class="application application">mysqldump</span></strong></span> supports, run:
						</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--mlkf9n8"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed">$ <span class="strong strong"><strong>mysqldump --help</strong></span></pre></div></div></li></ul></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
							<a class="link" href="https://dev.mysql.com/doc/refman/8.0/en/mysqldump.html">Logical backup with mysqldump</a>
						</li></ul></div></section><section class="section" id="performing-file-system-backup-mysql_backing-up-mysql-data"><div class="titlepage"><div><div><h3 class="title">3.4.2. Performing file system backup</h3></div></div></div><p>
					To create a file system backup of <span class="strong strong"><strong>MySQL</strong></span> data files, copy the content of the <span class="strong strong"><strong>MySQL</strong></span> data directory to your backup location.
				</p><p>
					To back up also your current configuration or the log files, use the optional steps of the following procedure.
				</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Stop the <code class="literal">mysqld</code> service:
						</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--88crbx6"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed"># <span class="strong strong"><strong>systemctl stop mysqld.service</strong></span></pre></div></div></li><li class="listitem"><p class="simpara">
							Copy the data files to the required location:
						</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--rxwvfst"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed"># <span class="strong strong"><strong>cp -r /var/lib/mysql /<span class="emphasis"><em>backup-location</em></span></strong></span></pre></div></div></li><li class="listitem"><p class="simpara">
							Optionally, copy the configuration files to the required location:
						</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--yvn03t9"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed"># <span class="strong strong"><strong>cp -r /etc/my.cnf /etc/my.cnf.d /<span class="emphasis"><em>backup-location</em></span>/configuration</strong></span></pre></div></div></li><li class="listitem"><p class="simpara">
							Optionally, copy the log files to the required location:
						</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--36bp753"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed"># <span class="strong strong"><strong>cp /var/log/mysql/* /<span class="emphasis"><em>backup-location</em></span>/logs</strong></span></pre></div></div></li><li class="listitem"><p class="simpara">
							Start the <code class="literal">mysqld</code> service:
						</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--9b5tf5c"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed"># <span class="strong strong"><strong>systemctl start mysqld.service</strong></span></pre></div></div></li><li class="listitem"><p class="simpara">
							When loading the backed up data from the backup location to the <code class="literal">/var/lib/mysql</code> directory, ensure that <code class="literal">mysql:mysql</code> is an owner of all data in <code class="literal">/var/lib/mysql</code>:
						</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--rczfk6o"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed"># <span class="strong strong"><strong>chown -R mysql:mysql /var/lib/mysql</strong></span></pre></div></div></li></ol></div></section><section class="section" id="introduction-to-replication-as-a-backup-solution-mysql_backing-up-mysql-data"><div class="titlepage"><div><div><h3 class="title">3.4.3. Replication as a backup solution</h3></div></div></div><p class="_abstract _abstract">
					Replication is an alternative backup solution for source servers. 
If a source server replicates to a replica server, backups can be run on
 the replica without any impact on the source. The source can still run 
while you shut down the replica and back the data up from the replica.
				</p><p>
					For instructions on how to replicate a <span class="strong strong"><strong>MySQL</strong></span> database, see <a class="link" href="#replicating-mysql_assembly_using-mysql" title="3.6.&nbsp;Replicating MySQL">Replicating MySQL</a>.
				</p><div class="admonition warning"><div class="admonition_header">Warning</div><div><p>
						Replication itself is not a sufficient backup solution. 
Replication protects source servers against hardware failures, but it 
does not ensure protection against data loss. It is recommended that you
 use any other backup solution on the replica together with this method.
					</p></div></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
							<a class="link" href="https://dev.mysql.com/doc/refman/8.0/en/replication.html">MySQL replication documentation</a>
						</li></ul></div></section></section><section class="section" id="proc_proc_migrating-to-a-rhel-9-version-of-mysql-8-0_assembly_using-mysql"><div class="titlepage"><div><div><h2 class="title">3.5. Migrating to a RHEL 9 version of MySQL 8.0</h2></div></div></div><p class="_abstract _abstract">
				RHEL 8 contains the <span class="strong strong"><strong>MySQL 8.0</strong></span>, <span class="strong strong"><strong>MariaDB 10.3</strong></span>, and <span class="strong strong"><strong>MariaDB 10.5</strong></span> implementations of a server from the MySQL databases family. RHEL 9 provides <span class="strong strong"><strong>MySQL 8.0</strong></span> and <span class="strong strong"><strong>MariaDB 10.5</strong></span>.
			</p><p>
				This procedure describes migration from a RHEL 8 version of <span class="strong strong"><strong>MySQL 8.0</strong></span> to a RHEL 9 version of <span class="strong strong"><strong>MySQL 8.0</strong></span> using the <code class="literal">mysql_upgrade</code> utility. The <code class="literal">mysql_upgrade</code> utility is provided by the <code class="literal">mysql-server</code> package.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						Before performing the upgrade, back up all your data stored in the <span class="strong strong"><strong>MySQL</strong></span> databases. See <a class="link" href="#backing-up-mysql-data_assembly_using-mysql" title="3.4.&nbsp;Backing up MySQL data">Backing up MySQL data</a>.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Ensure that the <code class="literal">mysql-server</code> package is installed on the RHEL 9 system:
					</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--iuofari"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed"># <span class="strong strong"><strong>dnf install mysql-server</strong></span></pre></div></div></li><li class="listitem"><p class="simpara">
						Ensure that the <code class="literal">mysqld</code> service is not running on either of the source and target systems at the time of copying data:
					</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--vy4qthw"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed"># <span class="strong strong"><strong>systemctl stop mysqld.service</strong></span></pre></div></div></li><li class="listitem">
						Copy the data from the source location to the <code class="literal">/var/lib/mysql/</code> directory on the RHEL 9 target system.
					</li><li class="listitem"><p class="simpara">
						Set the appropriate permissions and SELinux context for copied files on the target system:
					</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--uqygako"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed"># <span class="strong strong"><strong>restorecon -vr /var/lib/mysql</strong></span></pre></div></div></li><li class="listitem"><p class="simpara">
						Ensure that <code class="literal">mysql:mysql</code> is an owner of all data in the <code class="literal">/var/lib/mysql</code> directory:
					</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--zya45wl"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed"># <span class="strong strong"><strong>chown -R mysql:mysql /var/lib/mysql</strong></span></pre></div></div></li><li class="listitem"><p class="simpara">
						Start the <span class="strong strong"><strong>MySQL</strong></span> server on the target system:
					</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--b8e7vs1"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed"># <span class="strong strong"><strong>systemctl start mysqld.service</strong></span></pre></div></div><p class="simpara">
						Note: In earlier versions of <span class="strong strong"><strong>MySQL</strong></span>, the <code class="literal">mysql_upgrade</code> command was needed to check and repair internal tables. This is now done automatically when you start the server.
					</p></li></ol></div></section><section class="section" id="replicating-mysql_assembly_using-mysql"><div class="titlepage"><div><div><h2 class="title">3.6. Replicating MySQL</h2></div></div></div><p class="_abstract _abstract">
				<span class="strong strong"><strong>MySQL</strong></span> provides 
various configuration options for replication, ranging from basic to 
advanced. This section describes a transaction-based way to replicate in
 <span class="strong strong"><strong>MySQL</strong></span> on freshly 
installed MySQL servers using global transaction identifiers (GTIDs). 
Using GTIDs simplifies transaction identification and consistency 
verification.
			</p><p>
				To set up replication in <span class="strong strong"><strong>MySQL</strong></span>, you must:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						<a class="link" href="#proc_configuring-a-mysql-source-server_replicating-mysql" title="3.6.1.&nbsp;Configuring a MySQL source server">Configure a source server</a>
					</li><li class="listitem">
						<a class="link" href="#proc_configuring-a-mysql-replica-server_replicating-mysql" title="3.6.2.&nbsp;Configuring a MySQL replica server">Configure a replica server</a>
					</li><li class="listitem">
						<a class="link" href="#proc_creating-a-replication-user-on-the-mysql-source-server_replicating-mysql" title="3.6.3.&nbsp;Creating a replication user on the MySQL source server">Create a replication user on the source server</a>
					</li><li class="listitem">
						<a class="link" href="#proc_connecting-the-replica-server-to-the-source-server_replicating-mysql" title="3.6.4.&nbsp;Connecting the replica server to the source server">Connect the replica server to the source server</a>
					</li></ul></div><div class="admonition important"><div class="admonition_header">Important</div><div><p>
					If you want to use existing <span class="strong strong"><strong>MySQL</strong></span> servers for replication, you must first synchronize data. See the <a class="link" href="https://dev.mysql.com/doc/mysql-replication-excerpt/8.0/en/replication-howto.html">upstream documentation</a> for more information.
				</p></div></div><section class="section" id="proc_configuring-a-mysql-source-server_replicating-mysql"><div class="titlepage"><div><div><h3 class="title">3.6.1. Configuring a MySQL source server</h3></div></div></div><p class="_abstract _abstract">
					This section describes configuration options required for a <span class="strong strong"><strong>MySQL</strong></span> source server to properly run and replicate all changes made on the database server.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							The source server is installed.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Include the following options in the <code class="literal">/etc/my.cnf.d/mysql-server.cnf</code> file under the <code class="literal">[mysqld]</code> section:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
									<code class="literal">bind-address=<span class="emphasis"><em>source_ip_adress</em></span></code>
								</p><p class="simpara">
									This option is required for connections made from replicas to the source.
								</p></li><li class="listitem"><p class="simpara">
									<code class="literal">server-id=<span class="emphasis"><em>id</em></span></code>
								</p><p class="simpara">
									The <span class="emphasis"><em>id</em></span> must be unique.
								</p></li><li class="listitem"><p class="simpara">
									<code class="literal">log_bin=<span class="emphasis"><em>path_to_source_server_log</em></span></code>
								</p><p class="simpara">
									This option defines a path to the binary log file of the <span class="strong strong"><strong>MySQL</strong></span> source server. For example: <code class="literal">log_bin=/var/log/mysql/mysql-bin.log</code>.
								</p></li><li class="listitem"><p class="simpara">
									<code class="literal">gtid_mode=ON</code>
								</p><p class="simpara">
									This option enables global transaction identifiers (GTIDs) on the server.
								</p></li><li class="listitem"><p class="simpara">
									<code class="literal">enforce-gtid-consistency=ON</code>
								</p><p class="simpara">
									The server enforces GTID consistency by allowing execution of only statements that can be safely logged using a GTID.
								</p></li><li class="listitem"><p class="simpara">
									<span class="emphasis"><em>Optional:</em></span> <code class="literal">binlog_do_db=<span class="emphasis"><em>db_name</em></span></code>
								</p><p class="simpara">
									Use this option if you want to replicate only selected 
databases. To replicate more than one selected database, specify each of
 the databases separately:
								</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--7kyvrjk"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed">binlog_do_db=<span class="emphasis"><em>db_name1</em></span>
binlog_do_db=<span class="emphasis"><em>db_name2</em></span>
binlog_do_db=<span class="emphasis"><em>db_name3</em></span></pre></div></div></li><li class="listitem"><p class="simpara">
									<span class="emphasis"><em>Optional:</em></span> <code class="literal">binlog_ignore_db=<span class="emphasis"><em>db_name</em></span></code>
								</p><p class="simpara">
									Use this option to exclude a specific database from replication.
								</p></li></ul></div></li><li class="listitem"><p class="simpara">
							Restart the <code class="literal">mysqld</code> service:
						</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--691y9eb"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed"># <span class="strong strong"><strong>systemctl restart mysqld.service</strong></span></pre></div></div></li></ol></div></section><section class="section" id="proc_configuring-a-mysql-replica-server_replicating-mysql"><div class="titlepage"><div><div><h3 class="title">3.6.2. Configuring a MySQL replica server</h3></div></div></div><p class="_abstract _abstract">
					This section describes configuration options required for a <span class="strong strong"><strong>MySQL</strong></span> replica server to ensure a successful replication.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							The replica server is installed.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Include the following options in the <code class="literal">/etc/my.cnf.d/mysql-server.cnf</code> file under the <code class="literal">[mysqld]</code> section:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
									<code class="literal">server-id=<span class="emphasis"><em>id</em></span></code>
								</p><p class="simpara">
									The <span class="emphasis"><em>id</em></span> must be unique.
								</p></li><li class="listitem"><p class="simpara">
									<code class="literal">relay-log=<span class="emphasis"><em>path_to_replica_server_log</em></span></code>
								</p><p class="simpara">
									The relay log is a set of log files created by the <span class="strong strong"><strong>MySQL</strong></span> replica server during replication.
								</p></li><li class="listitem"><p class="simpara">
									<code class="literal">log_bin=<span class="emphasis"><em>path_to_replica_sever_log</em></span></code>
								</p><p class="simpara">
									This option defines a path to the binary log file of the <span class="strong strong"><strong>MySQL</strong></span> replica server. For example: <code class="literal">log_bin=/var/log/mysql/mysql-bin.log</code>.
								</p><p class="simpara">
									This option is not required in a replica but strongly recommended.
								</p></li><li class="listitem"><p class="simpara">
									<code class="literal">gtid_mode=ON</code>
								</p><p class="simpara">
									This option enables global transaction identifiers (GTIDs) on the server.
								</p></li><li class="listitem"><p class="simpara">
									<code class="literal">enforce-gtid-consistency=ON</code>
								</p><p class="simpara">
									The server enforces GTID consistency by allowing execution of only statements that can be safely logged using a GTID.
								</p></li><li class="listitem"><p class="simpara">
									<code class="literal">log-replica-updates=ON</code>
								</p><p class="simpara">
									This option ensures that updates received from the source server are logged in the replica’s binary log.
								</p></li><li class="listitem"><p class="simpara">
									<code class="literal">skip-replica-start=ON</code>
								</p><p class="simpara">
									This option ensures that the replica server does not start the replication threads when the replica server starts.
								</p></li><li class="listitem"><p class="simpara">
									<span class="emphasis"><em>Optional:</em></span> <code class="literal">binlog_do_db=<span class="emphasis"><em>db_name</em></span></code>
								</p><p class="simpara">
									Use this option if you want to replicate only certain 
databases. To replicate more than one database, specify each of the 
databases separately:
								</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--qiwtsvt"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed">binlog_do_db=<span class="emphasis"><em>db_name1</em></span>
binlog_do_db=<span class="emphasis"><em>db_name2</em></span>
binlog_do_db=<span class="emphasis"><em>db_name3</em></span></pre></div></div></li><li class="listitem"><p class="simpara">
									<span class="emphasis"><em>Optional:</em></span> <code class="literal">binlog_ignore_db=<span class="emphasis"><em>db_name</em></span></code>
								</p><p class="simpara">
									Use this option to exclude a specific database from replication.
								</p></li></ul></div></li><li class="listitem"><p class="simpara">
							Restart the <code class="literal">mysqld</code> service:
						</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--kq208p7"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed"># <span class="strong strong"><strong>systemctl restart mysqld.service</strong></span></pre></div></div></li></ol></div></section><section class="section" id="proc_creating-a-replication-user-on-the-mysql-source-server_replicating-mysql"><div class="titlepage"><div><div><h3 class="title">3.6.3. Creating a replication user on the MySQL source server</h3></div></div></div><p class="_abstract _abstract">
					You must create a replication user and grant this user permissions 
required for replication traffic. This procedure shows how to create a 
replication user with appropriate permissions. Execute these steps only 
on the source server.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							The source server is installed and configured as described in <a class="link" href="#proc_configuring-a-mysql-source-server_replicating-mysql" title="3.6.1.&nbsp;Configuring a MySQL source server">Configuring a MySQL source server</a>.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Create a replication user:
						</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--x1554pf"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed"><span class="strong strong"><strong>mysql&gt; CREATE USER '<span class="emphasis"><em>replication_user'@'replica_server_ip</em></span>' IDENTIFIED WITH mysql_native_password BY '<span class="emphasis"><em>password</em></span>';</strong></span></pre></div></div></li><li class="listitem"><p class="simpara">
							Grant the user replication permissions:
						</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--xlsnze7"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed"><span class="strong strong"><strong>mysql&gt; GRANT REPLICATION SLAVE ON *.* TO '<span class="emphasis"><em>replication_user</em></span>'@'<span class="emphasis"><em>replica_server_ip</em></span>';</strong></span></pre></div></div></li><li class="listitem"><p class="simpara">
							Reload the grant tables in the <span class="strong strong"><strong>MySQL</strong></span> database:
						</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--6jt5xl6"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed"><span class="strong strong"><strong>mysql&gt; FLUSH PRIVILEGES;</strong></span></pre></div></div></li><li class="listitem"><p class="simpara">
							Set the source server to read-only state:
						</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--szaneow"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed"><span class="strong strong"><strong>mysql&gt; SET @@GLOBAL.read_only = ON;</strong></span></pre></div></div></li></ol></div></section><section class="section" id="proc_connecting-the-replica-server-to-the-source-server_replicating-mysql"><div class="titlepage"><div><div><h3 class="title">3.6.4. Connecting the replica server to the source server</h3></div></div></div><p class="_abstract _abstract">
					On the <span class="strong strong"><strong>MySQL</strong></span> 
replica server, you must configure credentials and the address of the 
source server. Use the following procedure to implement the replica 
server.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							The source server is installed and configured as described in <a class="link" href="#proc_configuring-a-mysql-source-server_replicating-mysql" title="3.6.1.&nbsp;Configuring a MySQL source server">Configuring a MySQL source server</a>.
						</li><li class="listitem">
							The replica server is installed and configured as described in <a class="link" href="#proc_configuring-a-mysql-replica-server_replicating-mysql" title="3.6.2.&nbsp;Configuring a MySQL replica server">Configuring a MySQL replica server</a>.
						</li><li class="listitem">
							You have created a replication user. See <a class="link" href="#proc_creating-a-replication-user-on-the-mysql-source-server_replicating-mysql" title="3.6.3.&nbsp;Creating a replication user on the MySQL source server">Creating a replication user on the MySQL source server</a>.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Set the replica server to read-only state:
						</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--jdlqc5u"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed"><span class="strong strong"><strong>mysql&gt; SET @@GLOBAL.read_only = ON;</strong></span></pre></div></div></li><li class="listitem"><p class="simpara">
							Configure the replication source:
						</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--3uhdpxo"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed"><span class="strong strong"><strong>mysql&gt; CHANGE REPLICATION SOURCE TO</strong></span>
    <span class="strong strong"><strong>-&gt; SOURCE_HOST='<span class="emphasis"><em>source_ip_address</em></span>',</strong></span>
    <span class="strong strong"><strong>-&gt; SOURCE_USER='<span class="emphasis"><em>replication_user</em></span>',</strong></span>
    <span class="strong strong"><strong>-&gt; SOURCE_PASSWORD='<span class="emphasis"><em>password</em></span>',</strong></span>
    <span class="strong strong"><strong>-&gt; SOURCE_AUTO_POSITION=1;</strong></span></pre></div></div></li><li class="listitem"><p class="simpara">
							Start the replica thread in the <span class="strong strong"><strong>MySQL</strong></span> replica server:
						</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--a08z541"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed"><span class="strong strong"><strong>mysql&gt; START REPLICA;</strong></span></pre></div></div></li><li class="listitem"><p class="simpara">
							Unset the read-only state on both the source and replica servers:
						</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--mccfu5v"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed"><span class="strong strong"><strong>mysql&gt; SET @@GLOBAL.read_only = OFF;</strong></span></pre></div></div></li><li class="listitem"><p class="simpara">
							<span class="emphasis"><em>Optional:</em></span> Inspect the status of the replica server for debugging purposes:
						</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--230ap5j"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed"><span class="strong strong"><strong>mysql&gt; SHOW REPLICA STATUS\G;</strong></span></pre></div></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
								If the replica server fails to start or connect, you can skip a 
certain number of events following the binary log file position 
displayed in the output of the <code class="literal">SHOW MASTER STATUS</code> command. For example, skip the first event from the defined position:
							</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--l4ajbu9"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="literallayout language-none codeblock codeblock--processed"><span class="strong strong"><strong>mysql&gt; SET GLOBAL SQL_SLAVE_SKIP_COUNTER=1;</strong></span></pre></div></div><p>
								and try to start the replica server again.
							</p></div></div></li><li class="listitem"><p class="simpara">
							<span class="emphasis"><em>Optional:</em></span> Stop the replica thread in the replica server:
						</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--1vej38b"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed"><span class="strong strong"><strong>mysql&gt; STOP REPLICA;</strong></span></pre></div></div></li></ol></div></section><section class="section" id="verification_steps"><div class="titlepage"><div><div><h3 class="title">3.6.5. Verification steps</h3></div></div></div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Create an example database on the source server:
						</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--mv3e4u0"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed"><span class="strong strong"><strong>mysql&gt; CREATE DATABASE <span class="emphasis"><em>test_db_name</em></span>;</strong></span></pre></div></div></li><li class="listitem">
							Verify that the <code class="literal"><span class="emphasis"><em>test_db_name</em></span></code> database replicates on the replica server.
						</li><li class="listitem"><p class="simpara">
							Display status information about the binary log files of the <span class="strong strong"><strong>MySQL</strong></span> server by executing the following command on either of the source or replica servers:
						</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--ktz0cj3"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed"><span class="strong strong"><strong>mysql&gt; SHOW MASTER STATUS;</strong></span></pre></div></div><p class="simpara">
							The <code class="literal">Executed_Gtid_Set</code> column, which shows a set of GTIDs for transactions executed on the source, must not be empty.
						</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
								The same set of GTIDs is displayed in the <code class="literal">Executed_Gtid_Set</code> row when you use the <code class="literal">SHOW SLAVE STATUS</code> on the replica server.
							</p></div></div></li></ol></div></section><section class="section _additional-resources" id="additional_resources"><div class="titlepage"><div><div><h3 class="title">3.6.6. ADDITIONAL RESOURCES</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							<a class="link" href="https://dev.mysql.com/doc/refman/8.0/en/replication.html">MySQL Replication documentation</a>
						</li><li class="listitem">
							<a class="link" href="https://www.digitalocean.com/community/tutorials/how-to-set-up-replication-in-mysql">How To Set Up Replication in MySQL</a>
						</li><li class="listitem">
							<a class="link" href="https://dev.mysql.com/doc/refman/8.0/en/replication-gtids.html">Replication with Global Transaction Identifiers</a>
						</li></ul></div></section></section></section><section class="chapter" id="using-postgresql_configuring-and-using-database-servers"><div class="titlepage"><div><div><h1 class="title">Chapter 4. Using PostgreSQL</h1></div></div></div><p>
			The <span class="strong strong"><strong>PostgreSQL</strong></span> 
server is an open source robust and highly-extensible database server 
based on the SQL language. This part describes how to install and 
configure <span class="strong strong"><strong>PostgreSQL</strong></span> on a RHEL system, how to back up <span class="strong strong"><strong>PostgreSQL</strong></span> data, and how to migrate from an earlier <span class="strong strong"><strong>PostgreSQL</strong></span> version
		</p><section class="section" id="introduction-to-postgresql_using-postgresql"><div class="titlepage"><div><div><h2 class="title">4.1. Getting started with PostgreSQL</h2></div></div></div><p>
				The <span class="strong strong"><strong>PostgreSQL</strong></span> 
server provides an object-relational database system, which allows you 
to manage extensive datasets and a high number of concurrent users. For 
these reasons, the <span class="strong strong"><strong>PostgreSQL</strong></span> servers can be used in clusters to manage high amounts of data.
			</p><p>
				The <span class="strong strong"><strong>PostgreSQL</strong></span> 
server includes features for ensuring data integrity, building 
fault-tolerant environments, and building applications. It allows users 
to extend a database with users' own data types, custom functions, or 
code from different programming languages without the need to recompile 
the database.
			</p><p>
				This part describes:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						How to install <span class="strong strong"><strong>PostgreSQL</strong></span> in <a class="link" href="#installing-postgresql_using-postgresql" title="4.2.&nbsp;Installing PostgreSQL">Installing PostgreSQL</a>.
					</li><li class="listitem">
						Users, roles, and privileges in <a class="link" href="#con_postgresql-users_using-postgresql" title="4.3.&nbsp;Creating PostgreSQL users">Creating PostgreSQL users</a>.
					</li><li class="listitem">
						How to adjust <span class="strong strong"><strong>PostgreSQL</strong></span> configuration in <a class="link" href="#configuring-postgresql_using-postgresql" title="4.4.&nbsp;Configuring PostgreSQL">Configuring PostgreSQL</a>.
					</li><li class="listitem">
						How to enable Transport Layer Security (TLS) support on the <span class="strong strong"><strong>PostgreSQL</strong></span> server in <a class="link" href="#proc_configuring-tls-encryption-on-a-postgresql-server_using-postgresql" title="4.5.&nbsp;Configuring TLS encryption on a PostgreSQL server">Configuring TLS encryption on a PostgreSQL server</a>.
					</li><li class="listitem">
						How to back up your databases in <a class="link" href="#backing-up-postgresql-data_using-postgresql" title="4.6.&nbsp;Backing up PostgreSQL data">Backing up PostgreSQL data</a>.
					</li><li class="listitem">
						How to migrate to the RHEL 9 version of <span class="strong strong"><strong>PostgreSQL</strong></span> in <a class="link" href="#migrating-to-a-rhel-9-version-of-postgresql_using-postgresql" title="4.7.&nbsp;Migrating to a RHEL 9 version of PostgreSQL">Migrating to a RHEL 9 version of PostgreSQL</a>. One of the prerequisites of migration is performing a data backup.
					</li></ul></div></section><section class="section" id="installing-postgresql_using-postgresql"><div class="titlepage"><div><div><h2 class="title">4.2. Installing PostgreSQL</h2></div></div></div><p class="_abstract _abstract">
				RHEL 9 provides <span class="strong strong"><strong>PostgreSQL 13</strong></span> as the initial version of this Application Stream, which you can install easily as an RPM package.
			</p><p>
				Additional <span class="strong strong"><strong>PostgreSQL</strong></span> versions are provided as modules with a shorter life cycle in minor releases of RHEL 9. RHEL 9.2 introduced <span class="strong strong"><strong>PostgreSQL 15</strong></span> as the <code class="literal">postgresql:15</code> module stream.
			</p><p>
				To install <span class="strong strong"><strong>PostgreSQL</strong></span>, use the following procedure.
			</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Install the <span class="strong strong"><strong>PostgreSQL</strong></span> server packages:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								For <span class="strong strong"><strong>PostgreSQL 13</strong></span> from the RPM package:
							</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--73yhrde"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed"># <span class="strong strong"><strong>dnf install postgresql-server</strong></span></pre></div></div></li><li class="listitem"><p class="simpara">
								For <span class="strong strong"><strong>PostgreSQL 15</strong></span> by selecting stream (version) 15 from the <code class="literal">postgresql</code> module and specifying the <code class="literal">server</code> profile:
							</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--fofbg5s"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed"># <span class="strong strong"><strong>dnf module install postgresql:15/server</strong></span></pre></div></div><p class="simpara">
								The <code class="literal">postgres</code> superuser is created automatically.
							</p></li></ul></div></li><li class="listitem"><p class="simpara">
						Initialize the database cluster:
					</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--bb93syp"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed"># <span class="strong strong"><strong>postgresql-setup --initdb</strong></span></pre></div></div><p class="simpara">
						Red Hat recommends storing the data in the default <code class="literal">/var/lib/pgsql/data</code> directory.
					</p></li><li class="listitem"><p class="simpara">
						Start the <code class="literal">postgresql</code> service:
					</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--ml0ztvk"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed"># <span class="strong strong"><strong>systemctl start postgresql.service</strong></span></pre></div></div></li><li class="listitem"><p class="simpara">
						Enable the <code class="literal">postgresql</code> service to start at boot:
					</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--dzx8yf7"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed"># <span class="strong strong"><strong>systemctl enable postgresql.service</strong></span></pre></div></div></li></ol></div></section><section class="section" id="con_postgresql-users_using-postgresql"><div class="titlepage"><div><div><h2 class="title">4.3. Creating PostgreSQL users</h2></div></div></div><p class="_abstract _abstract">
				PostgreSQL users are of the following types:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						The <code class="literal">postgres</code> UNIX system user - should be used only to run the <span class="strong strong"><strong>PostgreSQL</strong></span> server and client applications, such as <code class="literal">pg_dump</code>. Do not use the <code class="literal">postgres</code> system user for any interactive work on <span class="strong strong"><strong>PostgreSQL</strong></span> administration, such as database creation and user management.
					</li><li class="listitem">
						A database superuser - the default <code class="literal">postgres</code> <span class="strong strong"><strong>PostgreSQL</strong></span> superuser is not related to the <code class="literal">postgres</code> system user. You can limit access of the <code class="literal">postgres</code> superuser in the <code class="literal">pg_hba.conf</code> file, otherwise no other permission limitations exist. You can also create other database superusers.
					</li><li class="listitem"><p class="simpara">
						A role with specific database access permissions:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
								A database user - has a permission to log in by default
							</li><li class="listitem">
								A group of users - enables managing permissions for the group as a whole
							</li></ul></div></li></ul></div><p>
				Roles can own database objects (for example, tables and functions) 
and can assign object privileges to other roles using SQL commands.
			</p><p>
				Standard database management privileges include <code class="literal">SELECT</code>, <code class="literal">INSERT</code>, <code class="literal">UPDATE</code>, <code class="literal">DELETE</code>, <code class="literal">TRUNCATE</code>, <code class="literal">REFERENCES</code>, <code class="literal">TRIGGER</code>, <code class="literal">CREATE</code>, <code class="literal">CONNECT</code>, <code class="literal">TEMPORARY</code>, <code class="literal">EXECUTE</code>, and <code class="literal">USAGE</code>.
			</p><p>
				Role attributes are special privileges, such as <code class="literal">LOGIN</code>, <code class="literal">SUPERUSER</code>, <code class="literal">CREATEDB</code>, and <code class="literal">CREATEROLE</code>.
			</p><div class="admonition important"><div class="admonition_header">Important</div><div><p>
					Red Hat recommends performing most tasks as a role that is not a 
superuser. A common practice is to create a role that has the <code class="literal">CREATEDB</code> and <code class="literal">CREATEROLE</code> privileges and use this role for all routine management of databases and roles.
				</p></div></div><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						The <span class="strong strong"><strong>PostgreSQL</strong></span> server is installed.
					</li><li class="listitem">
						The database cluster is initialized.
					</li></ul></div><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						To create a user, set a password for the user, and assign the user the <code class="literal">CREATEROLE</code> and <code class="literal">CREATEDB</code> permissions:
					</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--hvoxzv0"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed">postgres=# <span class="strong strong"><strong>CREATE USER <span class="emphasis"><em>mydbuser</em></span> WITH PASSWORD '<span class="emphasis"><em>mypasswd</em></span>' CREATEROLE CREATEDB;</strong></span></pre></div></div><p class="simpara">
						Replace <span class="emphasis"><em>mydbuser</em></span> with the username and <span class="emphasis"><em>mypasswd</em></span> with the user’s password.
					</p></li></ul></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<a class="link" href="https://www.postgresql.org/docs/15/user-manag.html">PostgreSQL database roles</a>
					</li><li class="listitem">
						<a class="link" href="https://www.postgresql.org/docs/15/ddl-priv.html">PostgreSQL privileges</a>
					</li><li class="listitem">
						<a class="link" href="#configuring-postgresql_using-postgresql" title="4.4.&nbsp;Configuring PostgreSQL">Configuring PostgreSQL</a>
					</li></ul></div><div class="example" id="idm140509574448256"><p class="title">Example 4.1. Initializing, creating, and connecting to a PostgreSQL database</p><div class="example-contents"><p>
					This example demonstrates how to initialize a PostgreSQL database, 
create a database user with routine database management privileges, and 
how to create a database that is accessible from any system account 
through the database user with management privileges.
				</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Install the PosgreSQL server:
						</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--m66bpe3"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed"># <span class="strong strong"><strong>dnf install postgresql-server</strong></span></pre></div></div></li><li class="listitem"><p class="simpara">
							Initialize the database cluster:
						</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--cscif7d"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed"># <span class="strong strong"><strong>postgresql-setup --initdb</strong></span>
* Initializing database in '/var/lib/pgsql/data'
* Initialized, logs are in /var/lib/pgsql/initdb_postgresql.log</pre></div></div></li><li class="listitem"><p class="simpara">
							Set the password hashing algorithm to <code class="literal">scram-sha-256</code>.
						</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
									In the <code class="literal">/var/lib/pgsql/data/postgresql.conf</code> file, change the following line:
								</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--ez87czk"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed">#password_encryption = md5              # md5 or scram-sha-256</pre></div></div><p class="simpara">
									to:
								</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--tknggqh"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed">password_encryption = scram-sha-256</pre></div></div></li><li class="listitem"><p class="simpara">
									In the <code class="literal">/var/lib/pgsql/data/pg_hba.conf</code> file, change the following line for the IPv4 local connections:
								</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--48bh6cu"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed">host    all             all             127.0.0.1/32            ident</pre></div></div><p class="simpara">
									to:
								</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--elzvh1e"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed">host    all             all             127.0.0.1/32            scram-sha-256</pre></div></div></li></ol></div></li><li class="listitem"><p class="simpara">
							Start the postgresql service:
						</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--oa4gaab"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed"># <span class="strong strong"><strong>systemctl start postgresql.service</strong></span></pre></div></div></li><li class="listitem"><p class="simpara">
							Log in as the system user named <code class="literal">postgres</code>:
						</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--m5ksgv0"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed"># <span class="strong strong"><strong>su - postgres</strong></span></pre></div></div></li><li class="listitem"><p class="simpara">
							Start the <span class="strong strong"><strong>PostgreSQL</strong></span> interactive terminal:
						</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--d4cjm5b"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed">$ <span class="strong strong"><strong>psql</strong></span>
psql (13.7)
Type "help" for help.

postgres=#</pre></div></div></li><li class="listitem"><p class="simpara">
							Optional: Obtain information about the current database connection:
						</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--1aaqn3v"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed">postgres=# <span class="strong strong"><strong>\conninfo</strong></span>
You are connected to database "postgres" as user "postgres" via socket in "/var/run/postgresql" at port "5432".</pre></div></div></li><li class="listitem"><p class="simpara">
							Create a user named <code class="literal">mydbuser</code>, set a password for <code class="literal">mydbuser</code>, and assign <code class="literal">mydbuser</code> the <code class="literal">CREATEROLE</code> and <code class="literal">CREATEDB</code> permissions:
						</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--3g4zkj3"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed">postgres=# <span class="strong strong"><strong>CREATE USER mydbuser WITH PASSWORD 'mypasswd' CREATEROLE CREATEDB;</strong></span>
CREATE ROLE</pre></div></div><p class="simpara">
							The <code class="literal">mydbuser</code> user now can perform routine database management operations: create databases and manage user indexes.
						</p></li><li class="listitem"><p class="simpara">
							Log out of the interactive terminal by using the <code class="literal">\q</code> meta command:
						</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--itfwetk"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed">postgres=# <span class="strong strong"><strong>\q</strong></span></pre></div></div></li><li class="listitem"><p class="simpara">
							Log out of the <code class="literal">postgres</code> user session:
						</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--a86wezy"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed">$ <span class="strong strong"><strong>logout</strong></span></pre></div></div></li><li class="listitem"><p class="simpara">
							Log in to the <span class="strong strong"><strong>PostgreSQL</strong></span> terminal as <code class="literal">mydbuser</code>, specify the hostname, and connect to the default <code class="literal">postgres</code> database, which was created during initialization:
						</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--j1a92rk"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed"># <span class="strong strong"><strong>psql -U mydbuser -h 127.0.0.1 -d postgres</strong></span>
Password for user mydbuser:
Type the password.
psql (13.7)
Type "help" for help.

postgres=&gt;</pre></div></div></li><li class="listitem"><p class="simpara">
							Create a database named <code class="literal">mydatabase</code>:
						</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--xkxguil"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed">postgres=&gt; <span class="strong strong"><strong>CREATE DATABASE mydatabase;</strong></span>
CREATE DATABASE
postgres=&gt;</pre></div></div></li><li class="listitem"><p class="simpara">
							Log out of the session:
						</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--yber0m5"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed">postgres=# <span class="strong strong"><strong>\q</strong></span></pre></div></div></li><li class="listitem"><p class="simpara">
							Connect to mydatabase as <code class="literal">mydbuser</code>:
						</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--tehkrhu"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed"># <span class="strong strong"><strong>psql -U mydbuser -h 127.0.0.1 -d mydatabase</strong></span>
Password for user mydbuser:
psql (13.7)
Type "help" for help.
mydatabase=&gt;</pre></div></div></li><li class="listitem"><p class="simpara">
							Optional: Obtain information about the current database connection:
						</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--f7k3yww"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed">mydatabase=&gt; <span class="strong strong"><strong>\conninfo</strong></span>
You are connected to database "mydatabase" as user "mydbuser" on host "127.0.0.1" at port "5432".</pre></div></div></li></ol></div></div></div></section><section class="section" id="configuring-postgresql_using-postgresql"><div class="titlepage"><div><div><h2 class="title">4.4. Configuring PostgreSQL</h2></div></div></div><p>
				In a <span class="strong strong"><strong>PostgreSQL</strong></span> 
database, all data and configuration files are stored in a single 
directory called a database cluster. Red&nbsp;Hat recommends storing all
 data, including configuration files, in the default <code class="literal filename">/var/lib/pgsql/data/</code> directory.
			</p><p>
				<span class="strong strong"><strong>PostgreSQL</strong></span> configuration consists of the following files:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						<code class="literal filename">postgresql.conf</code> - is used for setting the database cluster parameters.
					</li><li class="listitem">
						<code class="literal filename">postgresql.auto.conf</code> - holds basic <span class="strong strong"><strong>PostgreSQL</strong></span> settings similarly to <code class="literal filename">postgresql.conf</code>. However, this file is under the server control. It is edited by the <code class="literal">ALTER SYSTEM</code> queries, and cannot be edited manually.
					</li><li class="listitem">
						<code class="literal filename">pg_ident.conf</code> - is used for mapping user identities from external authentication mechanisms into the <span class="strong strong"><strong>PostgreSQL</strong></span> user identities.
					</li><li class="listitem">
						<code class="literal filename">pg_hba.conf</code> - is used for configuring client authentication for <span class="strong strong"><strong>PostgreSQL</strong></span> databases.
					</li></ul></div><p>
				To change the <span class="strong strong"><strong>PostgreSQL</strong></span> configuration, use the following procedure.
			</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
						Edit the respective configuration file, for example, <code class="literal filename">/var/lib/pgsql/data/postgresql.conf</code>.
					</li><li class="listitem"><p class="simpara">
						Restart the <code class="literal">postgresql</code> service so that the changes become effective:
					</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--jdwooka"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed"># <span class="strong strong"><strong>systemctl restart postgresql.service</strong></span></pre></div></div></li></ol></div><div class="example" id="idm140509571932992"><p class="title">Example 4.2. Configuring PostgreSQL database cluster parameters</p><div class="example-contents"><p>
					This example shows basic settings of the database cluster parameters in the <code class="literal filename">/var/lib/pgsql/data/postgresql.conf</code> file.
				</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--npitegz"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed"># This is a comment
log_connections = yes
log_destination = 'syslog'
search_path = '"$user", public'
shared_buffers = 128MB
password_encryption = scram-sha-256</pre></div></div></div></div><div class="example" id="idm140509571930080"><p class="title">Example 4.3. Setting client authentication in PostgreSQL</p><div class="example-contents"><p>
					This example demonstrates how to set client authentication in the <code class="literal filename">/var/lib/pgsql/data/pg_hba.conf</code> file.
				</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--psghn6d"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed"># TYPE    DATABASE       USER        ADDRESS              METHOD
local     all            all                              trust
host      postgres       all         192.168.93.0/24      ident
host      all            all         .example.com         scram-sha-256</pre></div></div></div></div></section><section class="section" id="proc_configuring-tls-encryption-on-a-postgresql-server_using-postgresql"><div class="titlepage"><div><div><h2 class="title">4.5. Configuring TLS encryption on a PostgreSQL server</h2></div></div></div><p>
				By default, <span class="strong strong"><strong>PostgreSQL</strong></span> uses unencrypted connections. For more secure connections, you can enable Transport Layer Security (TLS) support on the <span class="strong strong"><strong>PostgreSQL</strong></span> server and configure your clients to establish encrypted connections.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						The <span class="strong strong"><strong>PostgreSQL</strong></span> server is installed.
					</li><li class="listitem">
						The database cluster is initialized.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Install the OpenSSL library:
					</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--qm2nrwa"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed"># <span class="strong strong"><strong>dnf install openssl</strong></span></pre></div></div></li><li class="listitem"><p class="simpara">
						Generate a TLS certificate and a key:
					</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--0wcqz2i"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed"># <span class="strong strong"><strong>openssl req -new -x509 -days 365 -nodes -text -out server.crt \</strong></span>
  <span class="strong strong"><strong>-keyout server.key -subj "/CN=<span class="emphasis"><em>dbhost.yourdomain.com</em></span>"</strong></span></pre></div></div><p class="simpara">
						Replace <span class="emphasis"><em>dbhost.yourdomain.com with</em></span> your database host and domain name.
					</p></li><li class="listitem"><p class="simpara">
						Copy your signed certificate and your private key to the required locations on the database server:
					</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--2idmudv"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed"># <span class="strong strong"><strong>cp server.{key,crt} /var/lib/pgsql/data/.</strong></span></pre></div></div></li><li class="listitem"><p class="simpara">
						Change the owner and group ownership of the signed certificate and your private key to the <code class="literal">postgres</code> user:
					</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--0a98pbt"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed"># <span class="strong strong"><strong>chown postgres:postgres /var/lib/pgsql/data/server.{key,crt}</strong></span></pre></div></div></li><li class="listitem"><p class="simpara">
						Restrict the permissions for your private key so that it is readable only by the owner:
					</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--ecrk00w"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed"># <span class="strong strong"><strong>chmod 0400 /var/lib/pgsql/data/server.key</strong></span></pre></div></div></li><li class="listitem"><p class="simpara">
						Set the password hashing algorithm to <code class="literal">scram-sha-256</code> by changing the following line in the <code class="literal">/var/lib/pgsql/data/postgresql.conf</code> file:
					</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--gvgtaki"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed">#password_encryption = md5              # md5 or scram-sha-256</pre></div></div><p class="simpara">
						to:
					</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--2lcymdt"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed">password_encryption = scram-sha-256</pre></div></div></li><li class="listitem"><p class="simpara">
						Configure PostgreSQL to use SSL/TLS by changing the following line in the <code class="literal">/var/lib/pgsql/data/postgresql.conf</code> file:
					</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--w41bviq"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed">#ssl = off</pre></div></div><p class="simpara">
						to:
					</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--1isq8x0"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed">ssl=on</pre></div></div></li><li class="listitem"><p class="simpara">
						Restrict access to all databases to accept only connections from 
clients using TLS by changing the following line for the IPv4 local 
connections in the <code class="literal">/var/lib/pgsql/data/pg_hba.conf</code> file:
					</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--ykcy87w"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed">host		all		all		127.0.0.1/32		ident</pre></div></div><p class="simpara">
						to:
					</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--f6qhxau"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed">hostssl 	all		all		127.0.0.1/32		scram-sha-256</pre></div></div><p class="simpara">
						Alternatively, you can restrict access for a single database and a user by adding the following new line:
					</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--ldl0hyi"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed">hostssl	<span class="emphasis"><em>mydatabase</em></span>	<span class="emphasis"><em>mydbuser</em></span>	127.0.0.1/32		scram-sha-256</pre></div></div><p class="simpara">
						Replace <span class="emphasis"><em>mydatabase</em></span> with the database name and <span class="emphasis"><em>mydbuser</em></span> with the username.
					</p></li><li class="listitem"><p class="simpara">
						Make the changes effective by restarting the <code class="literal">postgresql</code> service:
					</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--jojy6wi"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed"># <span class="strong strong"><strong>systemctl restart postgresql.service</strong></span></pre></div></div></li></ol></div><div class="itemizedlist"><p class="title"><strong>Verification</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						To manually verify that the connection is encrypted:
					</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
								Connect to the <span class="strong strong"><strong>PostgreSQL</strong></span> database as the <span class="emphasis"><em>mydbuser</em></span> user, specify the host name and the database name:
							</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--slcqzuk"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed">$ <span class="strong strong"><strong>psql -U <span class="emphasis"><em>mydbuser</em></span> -h 127.0.0.1 -d <span class="emphasis"><em>mydatabase</em></span></strong></span>
Password for user <span class="emphasis"><em>mydbuser</em></span>:</pre></div></div><p class="simpara">
								Replace <span class="emphasis"><em>mydatabase</em></span> with the database name and <span class="emphasis"><em>mydbuser</em></span> with the username.
							</p></li><li class="listitem"><p class="simpara">
								Obtain information about the current database connection:
							</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--4ovwrwn"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed">mydbuser=&gt; <span class="strong strong"><strong>\conninfo</strong></span>
You are connected to database "mydatabase" as user "mydbuser" on host "127.0.0.1" at port "5432".
SSL connection (protocol: TLSv1.3, cipher: TLS_AES_256_GCM_SHA384, bits: 256, compression: off)</pre></div></div></li></ol></div></li><li class="listitem"><p class="simpara">
						You can write a simple application that verifies whether a connection to <span class="strong strong"><strong>PostgreSQL</strong></span> is encrypted. This example demonstrates such an application written in C that uses the <code class="literal">libpq</code> client library, which is provided by the <code class="literal">libpq-devel</code> package:
					</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--e4ngiqb"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><button title="Expand" class="codeblock__expand">Expand</button><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed">#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;
#include &lt;libpq-fe.h&gt;

int main(int argc, char* argv[])
{
//Create connection
PGconn* connection = PQconnectdb("hostaddr=127.0.0.1 password=<span class="emphasis"><em>mypassword</em></span> port=5432 dbname=<span class="emphasis"><em>mydatabase</em></span> user=<span class="emphasis"><em>mydbuser</em></span>");

if (PQstatus(connection) ==CONNECTION_BAD)
    {
    printf("Connection error\n");
    PQfinish(connection);
    return -1; //Execution of the program will stop here
    }
    printf("Connection ok\n");
    //Verify TLS
    if (PQsslInUse(connection)){
     printf("TLS in use\n");
     printf("%s\n", PQsslAttribute(connection,"protocol"));
    }
    //End connection
    PQfinish(connection);
    printf("Disconnected\n");
    return 0;
}</pre></div></div><p class="simpara">
						Replace <span class="emphasis"><em>mypassword</em></span> with the password, <span class="emphasis"><em>mydatabase</em></span> with the database name, and <span class="emphasis"><em>mydbuser</em></span> with the username.
					</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							You must load the <code class="literal">pq</code> libraries for compilation by using the <code class="literal">-lpq</code> option. For example, to compile the application by using the GCC compiler:
						</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--80bocu0"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed">$ <span class="strong strong"><strong>gcc <span class="emphasis"><em>source_file.c</em></span> -lpq -o <span class="emphasis"><em>myapplication</em></span></strong></span></pre></div></div><p>
							where the <span class="emphasis"><em>source_file.c</em></span> contains the example code above, and <span class="emphasis"><em>myapplication</em></span> is the name of your application for verifying secured <span class="strong strong"><strong>PostgreSQL</strong></span> connection.
						</p></div></div></li></ul></div><div class="example" id="idm140509574780064"><p class="title">Example 4.4. Initializing, creating, and connecting to a PostgreSQL database using TLS encryption</p><div class="example-contents"><p>
					This example demonstrates how to initialize a PostgreSQL database, 
create a database user and a database, and how to connect to the 
database using a secured connection.
				</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Install the PosgreSQL server:
						</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--ctbift7"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed"># <span class="strong strong"><strong>dnf install postgresql-server</strong></span></pre></div></div></li><li class="listitem"><p class="simpara">
							Initialize the database cluster:
						</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--vmfgi50"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed"># <span class="strong strong"><strong>postgresql-setup --initdb</strong></span>
* Initializing database in '/var/lib/pgsql/data'
* Initialized, logs are in /var/lib/pgsql/initdb_postgresql.log</pre></div></div></li><li class="listitem"><p class="simpara">
							Install the OpenSSL library:
						</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--w7pk3p9"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed"># <span class="strong strong"><strong>dnf install openssl</strong></span></pre></div></div></li><li class="listitem"><p class="simpara">
							Generate a TLS certificate and a key:
						</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--nu4qk5e"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed"># <span class="strong strong"><strong>openssl req -new -x509 -days 365 -nodes -text -out server.crt \</strong></span>
  <span class="strong strong"><strong>-keyout server.key -subj "/CN=<span class="emphasis"><em>dbhost.yourdomain.com</em></span>"</strong></span></pre></div></div><p class="simpara">
							Replace <span class="emphasis"><em>dbhost.yourdomain.com with</em></span> your database host and domain name.
						</p></li><li class="listitem"><p class="simpara">
							Copy your signed certificate and your private key to the required locations on the database server:
						</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--wc4ia5q"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed"># <span class="strong strong"><strong>cp server.{key,crt} /var/lib/pgsql/data/.</strong></span></pre></div></div></li><li class="listitem"><p class="simpara">
							Change the owner and group ownership of the signed certificate and your private key to the <code class="literal">postgres</code> user:
						</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--2ngztwf"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed"># <span class="strong strong"><strong>chown postgres:postgres /var/lib/pgsql/data/server.{key,crt}</strong></span></pre></div></div></li><li class="listitem"><p class="simpara">
							Restrict the permissions for your private key so that it is readable only by the owner:
						</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--kd6osnk"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed"># <span class="strong strong"><strong>chmod 0400 /var/lib/pgsql/data/server.key</strong></span></pre></div></div></li><li class="listitem"><p class="simpara">
							Set the password hashing algorithm to <code class="literal">scram-sha-256</code>. In the <code class="literal">/var/lib/pgsql/data/postgresql.conf</code> file, change the following line:
						</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--xg0tl9i"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed">#password_encryption = md5              # md5 or scram-sha-256</pre></div></div><p class="simpara">
							to:
						</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--683yw9r"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed">password_encryption = scram-sha-256</pre></div></div></li><li class="listitem"><p class="simpara">
							Configure PostgreSQL to use SSL/TLS. In the <code class="literal">/var/lib/pgsql/data/postgresql.conf</code> file, change the following line:
						</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--xc1lq0k"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed">#ssl = off</pre></div></div><p class="simpara">
							to:
						</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--03zkt9w"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed">ssl=on</pre></div></div></li><li class="listitem"><p class="simpara">
							Start the <code class="literal">postgresql</code> service:
						</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--tdg4au1"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed"># <span class="strong strong"><strong>systemctl start postgresql.service</strong></span></pre></div></div></li><li class="listitem"><p class="simpara">
							Log in as the system user named <code class="literal">postgres</code>:
						</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--6upqf2q"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed"># <span class="strong strong"><strong>su - postgres</strong></span></pre></div></div></li><li class="listitem"><p class="simpara">
							Start the <span class="strong strong"><strong>PostgreSQL</strong></span> interactive terminal as the <code class="literal">postgres</code> user:
						</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--o0uko5d"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed">$ <span class="strong strong"><strong>psql -U postgres</strong></span>
psql (13.7)
Type "help" for help.

postgres=#</pre></div></div></li><li class="listitem"><p class="simpara">
							Create a user named <code class="literal">mydbuser</code> and set a password for <code class="literal">mydbuser</code>:
						</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--jl4yapr"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed">postgres=# <span class="strong strong"><strong>CREATE USER mydbuser WITH PASSWORD 'mypasswd';</strong></span>
CREATE ROLE
postgres=#</pre></div></div></li><li class="listitem"><p class="simpara">
							Create a database named <code class="literal">mydatabase</code>:
						</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--fsessd1"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed">postgres=# <span class="strong strong"><strong>CREATE DATABASE mydatabase;</strong></span>
CREATE DATABASE
postgres=#</pre></div></div></li><li class="listitem"><p class="simpara">
							Grant all permissions to the <code class="literal">mydbuser</code> user:
						</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--w9mzen8"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed">postgres=# <span class="strong strong"><strong>GRANT ALL PRIVILEGES ON DATABASE mydatabase TO mydbuser;</strong></span>
GRANT
postgres=#</pre></div></div></li><li class="listitem"><p class="simpara">
							Log out of the interactive terminal:
						</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--m41zftj"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed">postgres=# <span class="strong strong"><strong>\q</strong></span></pre></div></div></li><li class="listitem"><p class="simpara">
							Log out of the <code class="literal">postgres</code> user session:
						</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--m60ko8p"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed">$ <span class="strong strong"><strong>logout</strong></span></pre></div></div></li><li class="listitem"><p class="simpara">
							Restrict access to all databases to accept only connections from 
clients using TLS by changing the following line for the IPv4 local 
connections in the <code class="literal">/var/lib/pgsql/data/pg_hba.conf</code> file:
						</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--b5cti24"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed">host		all		all		127.0.0.1/32		ident</pre></div></div><p class="simpara">
							to:
						</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--dbjtwc2"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed">hostssl 	all		all		127.0.0.1/32		scram-sha-256</pre></div></div></li><li class="listitem"><p class="simpara">
							Make the changes effective by restarting the <code class="literal">postgresql</code> service:
						</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--geiw0xd"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed"># <span class="strong strong"><strong>systemctl restart postgresql.service</strong></span></pre></div></div></li><li class="listitem"><p class="simpara">
							Connect to the <span class="strong strong"><strong>PostgreSQL</strong></span> database as the <code class="literal">mydbuser</code> user, specify the host name and the database name:
						</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--14jw7id"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed">$ <span class="strong strong"><strong>psql -U mydbuser -h 127.0.0.1 -d mydatabase</strong></span>
Password for user mydbuser:
psql (13.7)
SSL connection (protocol: TLSv1.3, cipher: TLS_AES_256_GCM_SHA384, bits: 256, compression: off)
Type "help" for help.

mydatabase=&gt;</pre></div></div></li></ol></div></div></div></section><section class="section" id="backing-up-postgresql-data_using-postgresql"><div class="titlepage"><div><div><h2 class="title">4.6. Backing up PostgreSQL data</h2></div></div></div><p class="_abstract _abstract">
				To back up <span class="strong strong"><strong>PostgreSQL</strong></span> data, use one of the following approaches:
			</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">SQL dump</span></dt><dd>
							See <a class="link" href="#backuping-postgresql-sql-dump_backing-up-postgresql-data" title="4.6.1.&nbsp;Backing up PostgreSQL data with an SQL dump">Backing up with SQL dump</a>.
						</dd><dt><span class="term">File system level backup</span></dt><dd>
							See <a class="link" href="#backuping-postgresql-system-level-backup_backing-up-postgresql-data" title="4.6.2.&nbsp;Backing up PostgreSQL data with a file system level backup">File system level backup</a>.
						</dd><dt><span class="term">Continuous archiving</span></dt><dd>
							See <a class="link" href="#backuping-postgresql-continuous-archiving_backing-up-postgresql-data" title="4.6.3.&nbsp;Backing up PostgreSQL data by continuous archiving">Continuous archiving</a>.
						</dd></dl></div><section class="section" id="backuping-postgresql-sql-dump_backing-up-postgresql-data"><div class="titlepage"><div><div><h3 class="title">4.6.1. Backing up PostgreSQL data with an SQL dump</h3></div></div></div><p>
					The SQL dump method is based on generating a dump file with SQL 
commands. When a dump is uploaded back to the database server, it 
recreates the database in the same state as it was at the time of the 
dump.
				</p><p>
					The SQL dump is ensured by the following <span class="strong strong"><strong>PostgreSQL</strong></span> client applications:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							<span class="strong strong"><strong><span class="application application">pg_dump</span></strong></span> dumps a single database without cluster-wide information about roles or tablespaces
						</li><li class="listitem">
							<span class="strong strong"><strong><span class="application application">pg_dumpall</span></strong></span> dumps each database in a given cluster and preserves cluster-wide data, such as role and tablespace definitions.
						</li></ul></div><p>
					By default, the <code class="literal command">pg_dump</code> and <code class="literal command">pg_dumpall</code>
 commands write their results into the standard output. To store the 
dump in a file, redirect the output to an SQL file. The resulting SQL 
file can be either in a text format or in other formats that allow for 
parallelism and for more detailed control of object restoration.
				</p><p>
					You can perform the SQL dump from any remote host that has access to the database.
				</p><section class="section" id="advantages-sql-dump_backing-up-postgresql-data"><div class="titlepage"><div><div><h4 class="title">4.6.1.1. Advantages and disadvantages of an SQL dump</h4></div></div></div><p>
						An SQL dump has the following advantages compared to other <span class="strong strong"><strong>PostgreSQL</strong></span> backup methods:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								An SQL dump is the only <span class="strong strong"><strong>PostgreSQL</strong></span> backup method that is not server version-specific. The output of the <span class="strong strong"><strong><span class="application application">pg_dump</span></strong></span> utility can be reloaded into later versions of <span class="strong strong"><strong>PostgreSQL</strong></span>, which is not possible for file system level backups or continuous archiving.
							</li><li class="listitem">
								An SQL dump is the only method that works when transferring a 
database to a different machine architecture, such as going from a 
32-bit to a 64-bit server.
							</li><li class="listitem">
								An SQL dump provides internally consistent dumps. A dump represents a snapshot of the database at the time <span class="strong strong"><strong><span class="application application">pg_dump</span></strong></span> began running.
							</li><li class="listitem">
								The <span class="strong strong"><strong><span class="application application">pg_dump</span></strong></span> utility does not block other operations on the database when it is running.
							</li></ul></div><p>
						A disadvantage of an SQL dump is that it takes more time compared to file system level backup.
					</p></section><section class="section" id="perforing-sql-dump_backing-up-postgresql-data"><div class="titlepage"><div><div><h4 class="title">4.6.1.2. Performing an SQL dump using pg_dump</h4></div></div></div><p>
						To dump a single database without cluster-wide information, use the <span class="strong strong"><strong><span class="application application">pg_dump</span></strong></span> utility.
					</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
								You must have read access to all tables that you want to dump. 
To dump the entire database, you must run the commands as the <code class="literal">postgres</code> superuser or a user with database administrator privileges.
							</li></ul></div><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								Dump a database without cluster-wide information:
							</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--zbsounx"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed">$ <span class="strong strong"><strong>pg_dump dbname &gt; dumpfile</strong></span></pre></div></div></li></ul></div><p>
						To specify which database server <span class="strong strong"><strong><span class="application application">pg_dump</span></strong></span> will contact, use the following command-line options:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								The <code class="literal option">-h</code> option to define the host.
							</p><p class="simpara">
								The default host is either the local host or what is specified by the <code class="literal">PGHOST</code> environment variable.
							</p></li><li class="listitem"><p class="simpara">
								The <code class="literal option">-p</code> option to define the port.
							</p><p class="simpara">
								The default port is indicated by the <code class="literal">PGPORT</code> environment variable or the compiled-in default.
							</p></li></ul></div></section><section class="section" id="perforing-sql-dump_pg_dumpall_backing-up-postgresql-data"><div class="titlepage"><div><div><h4 class="title">4.6.1.3. Performing an SQL dump using pg_dumpall</h4></div></div></div><p>
						To dump each database in a given database cluster and to preserve cluster-wide data, use the <span class="strong strong"><strong><span class="application application">pg_dumpall</span></strong></span> utility.
					</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
								You must run the commands as the <code class="literal">postgres</code> superuser or a user with database administrator privileges.
							</li></ul></div><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								Dump all databases in the database cluster and preserve cluster-wide data:
							</p><p class="simpara">
								$ <span class="strong strong"><strong>pg_dumpall &gt; dumpfile</strong></span>
							</p></li></ul></div><p>
						To specify which database server <span class="strong strong"><strong><span class="application application">pg_dumpall</span></strong></span> will contact, use the following command-line options:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								The <code class="literal option">-h</code> option to define the host.
							</p><p class="simpara">
								The default host is either the local host or what is specified by the <code class="literal">PGHOST</code> environment variable.
							</p></li><li class="listitem"><p class="simpara">
								The <code class="literal option">-p</code> option to define the port.
							</p><p class="simpara">
								The default port is indicated by the <code class="literal">PGPORT</code> environment variable or the compiled-in default.
							</p></li><li class="listitem"><p class="simpara">
								The <code class="literal option">-l</code> option to define the default database.
							</p><p class="simpara">
								This option enables you to choose a default database different from the <code class="literal">postgres</code> database created automatically during initialization.
							</p></li></ul></div></section><section class="section" id="restoring-from-sql-dump_backing-up-postgresql-data"><div class="titlepage"><div><div><h4 class="title">4.6.1.4. Restoring a database dumped using pg_dump</h4></div></div></div><p>
						To restore a database from an SQL dump that you dumped using the <span class="strong strong"><strong><span class="application application">pg_dump</span></strong></span> utility, follow the steps below.
					</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
								You must run the commands as the <code class="literal">postgres</code> superuser or a user with database administrator privileges.
							</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
								Create a new database:
							</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--ewoq1if"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed">$ <span class="strong strong"><strong>createdb dbname</strong></span></pre></div></div></li><li class="listitem">
								Verify that all users who own objects or were granted 
permissions on objects in the dumped database already exist. If such 
users do not exist, the restore fails to recreate the objects with the 
original ownership and permissions.
							</li><li class="listitem"><p class="simpara">
								Run the <span class="strong strong"><strong><span class="application application">psql</span></strong></span> utility to restore a text file dump created by the <span class="strong strong"><strong><span class="application application">pg_dump</span></strong></span> utility:
							</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--j7e7emb"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed">$ <span class="strong strong"><strong>psql dbname &lt; dumpfile</strong></span></pre></div></div><p class="simpara">
								where <code class="literal filename">dumpfile</code> is the output of the <code class="literal command">pg_dump</code> command. To restore a non-text file dump, use the <code class="literal command">pg_restore</code> utility instead:
							</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--sn2ea55"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed">$ <span class="strong strong"><strong>pg_restore non-plain-text-file</strong></span></pre></div></div></li></ol></div></section><section class="section" id="restoring-from-sql-dump-pg_dumpall_backing-up-postgresql-data"><div class="titlepage"><div><div><h4 class="title">4.6.1.5. Restoring databases dumped using pg_dumpall</h4></div></div></div><p>
						To restore data from a database cluster that you dumped using the <span class="strong strong"><strong><span class="application application">pg_dumpall</span></strong></span> utility, follow the steps below.
					</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
								You must run the commands as the <code class="literal">postgres</code> superuser or a user with database administrator privileges.
							</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
								Ensure that all users who own objects or were granted 
permissions on objects in the dumped databases already exist. If such 
users do not exist, the restore fails to recreate the objects with the 
original ownership and permissions.
							</li><li class="listitem"><p class="simpara">
								Run the <span class="strong strong"><strong><span class="application application">psql</span></strong></span> utility to restore a text file dump created by the <span class="strong strong"><strong><span class="application application">pg_dumpall</span></strong></span> utility:
							</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--bjx0npl"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed">$ <span class="strong strong"><strong>psql &lt; dumpfile</strong></span></pre></div></div><p class="simpara">
								where <code class="literal filename">dumpfile</code> is the output of the <code class="literal command">pg_dumpall</code> command.
							</p></li></ol></div></section><section class="section" id="dumping-a-database-on-another-server_backing-up-postgresql-data"><div class="titlepage"><div><div><h4 class="title">4.6.1.6. Performing an SQL dump of a database on another server</h4></div></div></div><p>
						Dumping a database directly from one server to another is possible because <span class="strong strong"><strong><span class="application application">pg_dump</span></strong></span> and <span class="strong strong"><strong><span class="application application">psql</span></strong></span> can write to and read from pipes.
					</p><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								To dump a database from one server to another, run:
							</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--2adteyd"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed">$ <span class="strong strong"><strong>pg_dump -h host1 dbname | psql -h host2 dbname</strong></span></pre></div></div></li></ul></div></section><section class="section" id="handling-sql-errors-during-restore_backing-up-postgresql-data"><div class="titlepage"><div><div><h4 class="title">4.6.1.7. Handling SQL errors during restore</h4></div></div></div><p>
						By default, <span class="strong strong"><strong><span class="application application">psql</span></strong></span> continues to execute if an SQL error occurs, causing the database to restore only partially.
					</p><p>
						To change the default behavior, use one of the following approaches when restoring a dump.
					</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
								You must run the commands as the <code class="literal">postgres</code> superuser or a user with database administrator privileges.
							</li></ul></div><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								Make <span class="strong strong"><strong><span class="application application">psql</span></strong></span> exit with an exit status of 3 if an SQL error occurs by setting the <code class="literal">ON_ERROR_STOP</code> variable:
							</p><p class="simpara">
								$ <span class="strong strong"><strong>psql --set ON_ERROR_STOP=on dbname &lt; dumpfile</strong></span>
							</p></li><li class="listitem"><p class="simpara">
								Specify that the whole dump is restored as a single transaction 
so that the restore is either fully completed or canceled.
							</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem"><p class="simpara">
										When restoring a text file dump using the <code class="literal">psql</code> utility:
									</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--taatljl"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed">$ <span class="strong strong"><strong>psql -1</strong></span></pre></div></div></li><li class="listitem"><p class="simpara">
										When restoring a non-text file dump using the <code class="literal">pg_restore</code> utility:
									</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--ge4qmr5"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed">$ <span class="strong strong"><strong>pg_restore -e</strong></span></pre></div></div><p class="simpara">
										Note that when using this approach, even a minor error can 
cancel a restore operation that has already run for many hours.
									</p></li></ul></div></li></ul></div></section><section class="section _additional-resources" id="additional_resources_2"><div class="titlepage"><div><div><h4 class="title">4.6.1.8. ADDITIONAL RESOURCES</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								<a class="link" href="https://www.postgresql.org/docs/15/backup-dump.html">PostgreSQL Documentation - SQL dump</a>
							</li></ul></div></section></section><section class="section" id="backuping-postgresql-system-level-backup_backing-up-postgresql-data"><div class="titlepage"><div><div><h3 class="title">4.6.2. Backing up PostgreSQL data with a file system level backup</h3></div></div></div><p>
					To create a file system level backup, copy <span class="strong strong"><strong>PostgreSQL</strong></span> database files to another location. For example, you can use any of the following approaches:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							Create an archive file using the <span class="strong strong"><strong>tar</strong></span> utility.
						</li><li class="listitem">
							Copy the files to a different location using the <span class="strong strong"><strong>rsync</strong></span> utility.
						</li><li class="listitem">
							Create a consistent snapshot of the data directory.
						</li></ul></div><section class="section" id="advantages_and_limitations_of_file_system_backing_up"><div class="titlepage"><div><div><h4 class="title">4.6.2.1. Advantages and limitations of file system backing up</h4></div></div></div><p>
						File system level backing up has the following advantage compared to other <span class="strong strong"><strong>PostgreSQL</strong></span> backup methods:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								File system level backing up is usually faster than an SQL dump.
							</li></ul></div><p>
						File system level backing up has the following limitations compared to other <span class="strong strong"><strong>PostgreSQL</strong></span> backup methods:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								This backing up method is not suitable when you want to upgrade 
from RHEL 8 to RHEL 9 and migrate your data to the upgraded system. File
 system level backup is specific to an architecture and a RHEL major 
version. You can restore your data on your RHEL 8 system if the upgrade 
is not successful but you cannot restore the data on a RHEL 9 system.
							</li><li class="listitem">
								The database server must be shut down before backing up and restoring data.
							</li><li class="listitem">
								Backing up and restoring certain individual files or tables is 
impossible. Backing up a file system works only for complete backing up 
and restoring of an entire database cluster.
							</li></ul></div></section><section class="section" id="performing_file_system_level_backing_up"><div class="titlepage"><div><div><h4 class="title">4.6.2.2. Performing file system level backing up</h4></div></div></div><p>
						To perform file system level backing up, use the following procedure.
					</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
								Choose the location of a database cluster and initialize this cluster:
							</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--zu9p2od"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed"># <span class="strong strong"><strong>postgresql-setup --initdb</strong></span></pre></div></div></li><li class="listitem"><p class="simpara">
								Stop the postgresql service:
							</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--kegjcia"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed"># <span class="strong strong"><strong>systemctl stop postgresql.service</strong></span></pre></div></div></li><li class="listitem"><p class="simpara">
								Use any method to create a file system backup, for example a <code class="literal">tar</code> archive:
							</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--6h2d4kq"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed">$ <span class="strong strong"><strong>tar -cf backup.tar /var/lib/pgsql/data</strong></span></pre></div></div></li><li class="listitem"><p class="simpara">
								Start the postgresql service:
							</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--011j71m"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed"># <span class="strong strong"><strong>systemctl start postgresql.service</strong></span></pre></div></div></li></ol></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
								<a class="link" href="https://www.postgresql.org/docs/15/backup-file.html">PostgreSQL Documentation - file system level backup</a>
							</li></ul></div></section></section><section class="section" id="backuping-postgresql-continuous-archiving_backing-up-postgresql-data"><div class="titlepage"><div><div><h3 class="title">4.6.3. Backing up PostgreSQL data by continuous archiving</h3></div></div></div><section class="section" id="intro-continuous-archiving"><div class="titlepage"><div><div><h4 class="title">4.6.3.1. Introduction to continuous archiving</h4></div></div></div><p>
						<span class="strong strong"><strong>PostgreSQL</strong></span> records every change made to the database’s data files into a write ahead log (WAL) file that is available in the <code class="literal filename">pg_wal/</code>
 subdirectory of the cluster’s data directory. This log is intended 
primarily for a crash recovery. After a crash, the log entries made 
since the last checkpoint can be used for restoring the database to a 
consistency.
					</p><p>
						The continuous archiving method, also known as an online backup, 
combines the WAL files with a copy of the database cluster in the form 
of a base backup performed on a running server or a file system level 
backup.
					</p><p>
						If a database recovery is needed, you can restore the database 
from the copy of the database cluster and then replay log from the 
backed up WAL files to bring the system to the current state.
					</p><p>
						With the continuous archiving method, you must keep a continuous 
sequence of all archived WAL files that extends at minimum back to the 
start time of your last base backup. Therefore the ideal frequency of 
base backups depends on:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								The storage volume available for archived WAL files.
							</li><li class="listitem">
								The maximum possible duration of data recovery in situations 
when recovery is necessary. In cases with a long period since the last 
backup, the system replays more WAL segments, and the recovery therefore
 takes more time.
							</li></ul></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							You cannot use <span class="strong strong"><strong><span class="application application">pg_dump</span></strong></span> and <span class="strong strong"><strong><span class="application application">pg_dumpall</span></strong></span>
 SQL dumps as a part of a continuous archiving backup solution. SQL 
dumps produce logical backups and do not contain enough information to 
be used by a WAL replay.
						</p></div></div><p>
						To perform a database backup and restore using the continuous archiving method, follow these instructions:
					</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
								Set up and test your procedure for archiving WAL files - see <a class="link" href="#setting-wal-archiving" title="4.6.3.3.&nbsp;Setting up WAL archiving">WAL archiving</a>.
							</li><li class="listitem">
								Perform a base backup - see <a class="link" href="#making-base-backup" title="4.6.3.4.&nbsp;Making a base backup">base backup</a>.
							</li></ol></div><p>
						To restore your data, follow instructions in <a class="link" href="#restoring-database-with-continuous-archiving" title="4.6.3.5.&nbsp;Restoring the database using a continuous archive backup">Restoring database with continuous archiving</a>.
					</p></section><section class="section" id="advantages-continuous-archiving"><div class="titlepage"><div><div><h4 class="title">4.6.3.2. Advantages and disadvantages of continuous archiving</h4></div></div></div><p>
						Continuous archiving has the following advantages compared to other <span class="strong strong"><strong>PostgreSQL</strong></span> backup methods:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								With the continuous backup method, it is possible to use a base 
backup that is not entirely consistent because any internal 
inconsistency in the backup is corrected by the log replay. Therefore 
you can perform a base backup on a running <span class="strong strong"><strong>PostgreSQL</strong></span> server.
							</li><li class="listitem">
								A file system snapshot is not needed; <code class="literal">tar</code> or a similar archiving utility is sufficient.
							</li><li class="listitem">
								Continuous backup can be achieved by continuing to archive the 
WAL files because the sequence of WAL files for the log replay can be 
indefinitely long. This is particularly valuable for large databases.
							</li><li class="listitem">
								Continuous backup supports point-in-time recovery. It is not 
necessary to replay the WAL entries to the end. The replay can be 
stopped at any point and the database can be restored to its state at 
any time since the base backup was taken.
							</li><li class="listitem">
								If the series of WAL files are continuously available to another
 machine that has been loaded with the same base backup file, it is 
possible to restore the other machine with a nearly-current copy of the 
database at any point.
							</li></ul></div><p>
						Continuous archiving has the following disadvantages compared to other <span class="strong strong"><strong>PostgreSQL</strong></span> backup methods:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								Continuous backup method supports only restoration of an entire database cluster, not a subset.
							</li><li class="listitem">
								Continuous backup requires extensive archival storage.
							</li></ul></div></section><section class="section" id="setting-wal-archiving"><div class="titlepage"><div><div><h4 class="title">4.6.3.3. Setting up WAL archiving</h4></div></div></div><p>
						A running <span class="strong strong"><strong>PostgreSQL</strong></span>
 server produces a sequence of write ahead log (WAL) records. The server
 physically divides this sequence into WAL segment files, which are 
given numeric names that reflect their position in the WAL sequence. 
Without WAL archiving, the segment files are reused and renamed to 
higher segment numbers.
					</p><p>
						When archiving WAL data, the contents of each segment file are 
captured and saved at a new location before the segment file is reused. 
You have multiple options where to save the content, such as an 
NFS-mounted directory on another machine, a tape drive, or a CD.
					</p><p>
						Note that WAL records do not include changes to configuration files.
					</p><p>
						To enable WAL archiving, use the following procedure.
					</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
								In the <code class="literal filename">/var/lib/pgsql/data/postgresql.conf</code> file:
							</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
										Set the <code class="literal">wal_level</code> configuration parameter to <code class="literal">replica</code> or higher.
									</li><li class="listitem">
										Set the <code class="literal">archive_mode</code> parameter to <code class="literal">on</code>.
									</li><li class="listitem">
										Specify the shell command in the <code class="literal">archive_command</code> configuration parameter. You can use the <code class="literal">cp</code> command, another command, or a shell script.
									</li></ol></div></li><li class="listitem"><p class="simpara">
								Restart the <code class="literal">postgresql</code> service to enable the changes:
							</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--vzyus09"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed"># <span class="strong strong"><strong>systemctl restart postgresql.service</strong></span></pre></div></div></li><li class="listitem">
								Test your archive command and ensure it does not overwrite an 
existing file and that it returns a non-zero exit status if it fails.
							</li><li class="listitem">
								To protect your data, ensure that the segment files are archived
 into a directory that does not have group or world read access.
							</li></ol></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							The archive command is executed only on completed WAL segments. A
 server that generates little WAL traffic can have a substantial delay 
between the completion of a transaction and its safe recording in 
archive storage. To limit how old unarchived data can be, you can:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									Set the <code class="literal">archive_timeout</code> parameter to force the server to switch to a new WAL segment file with a given frequency.
								</li><li class="listitem">
									Use the <code class="literal">pg_switch_wal</code> parameter to force a segment switch to ensure that a transaction is archived immediately after it finishes.
								</li></ul></div></div></div><div class="example" id="idm140509576176320"><p class="title">Example 4.5. Shell command for archiving WAL segments</p><div class="example-contents"><p>
							This example shows a simple shell command you can set in the <code class="literal">archive_command</code> configuration parameter.
						</p><p>
							The following command copies a completed segment file to the required location:
						</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--rqnwxbj"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed"><span class="strong strong"><strong>archive_command = 'test ! -f /mnt/server/archivedir/%f &amp;&amp; cp %p /mnt/server/archivedir/%f'</strong></span></pre></div></div><p>
							where the <code class="literal">%p</code> parameter is replaced by the relative path to the file to archive and the <code class="literal">%f</code> parameter is replaced by the file name.
						</p><p>
							This command copies archivable WAL segments to the <code class="literal filename">/mnt/server/archivedir/</code> directory. After replacing the <code class="literal">%p</code> and <code class="literal">%f</code> parameters, the executed command looks as follows:
						</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--6jojhsm"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed"><span class="strong strong"><strong>test ! -f /mnt/server/archivedir/00000001000000A900000065 &amp;&amp; cp pg_wal/00000001000000A900000065 /mnt/server/archivedir/00000001000000A900000065</strong></span></pre></div></div><p>
							A similar command is generated for each new file that is archived.
						</p></div></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
								<a class="link" href="https://www.postgresql.org/docs/15/continuous-archiving.html#BACKUP-ARCHIVING-WAL">PostgreSQL 15 Documentation</a>
							</li></ul></div></section><section class="section" id="making-base-backup"><div class="titlepage"><div><div><h4 class="title">4.6.3.4. Making a base backup</h4></div></div></div><p>
						You can create a base backup in several ways. This section 
describes the simplest way of performing a base backup using the <span class="strong strong"><strong><span class="application application">pg_basebackup</span></strong></span> utility on a running <span class="strong strong"><strong>PostgreSQL</strong></span> server.
					</p><p>
						The base backup process creates a backup history file that is 
stored into the WAL archive area and is named after the first WAL 
segment file that you need for the base backup.
					</p><p>
						The backup history file is a small text file containing the 
starting and ending times, and WAL segments of the backup. If you used 
the label string to identify the associated dump file, you can use the 
backup history file to determine which dump file to restore.
					</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							Consider keeping several backup sets to be certain that you can recover your data.
						</p></div></div><p>
						To perform a base backup, use the following procedure.
					</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
								You must run the commands as the <code class="literal">postgres</code> superuser, a user with database administrator privileges, or another user with at least <code class="literal">REPLICATION</code> permissions.
							</li><li class="listitem">
								You must keep all the WAL segment files generated during and after the base backup.
							</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
								Use the <code class="literal">pg_basebackup</code> utility to perform the base backup.
							</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
										To create a base backup as individual files (plain format):
									</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--fxdm6lk"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed">$ <span class="strong strong"><strong>pg_basebackup -D <span class="emphasis"><em>backup_directory</em></span> -Fp</strong></span></pre></div></div><p class="simpara">
										Replace <span class="emphasis"><em>backup_directory</em></span> with your desired backup location.
									</p><p class="simpara">
										If you use tablespaces and perform the base backup on the same host as the server, you must also use the <code class="literal">--tablespace-mapping</code> option, otherwise the backup will fail upon an attempt to write the backup to the same location.
									</p></li><li class="listitem"><p class="simpara">
										To create a base backup as a <code class="literal">tar</code> archive (<code class="literal">tar</code> and compressed format):
									</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--59y5chu"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed">$ <span class="strong strong"><strong>pg_basebackup -D <span class="emphasis"><em>backup_directory</em></span> -Ft -z</strong></span></pre></div></div><p class="simpara">
										Replace <span class="emphasis"><em>backup_directory</em></span> with your desired backup location.
									</p><p class="simpara">
										To restore such data, you must manually extract the files in the correct locations.
									</p></li></ul></div></li><li class="listitem">
								After the base backup process is complete, safely archive the 
copy of the database cluster and the WAL segment files used during the 
backup, which are specified in the backup history file.
							</li><li class="listitem">
								Delete WAL segments numerically lower than the WAL segment files
 used in the base backup because these are older than the base backup 
and no longer needed for a restore.
							</li></ol></div><p>
						To specify which database server <span class="strong strong"><strong>pg_basebackup</strong></span> will contact, use the following command-line options:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								The <code class="literal">-h</code> option to define the host.
							</p><p class="simpara">
								The default host is either the local host or a host specified by the <code class="literal">PGHOST</code> environment variable.
							</p></li><li class="listitem"><p class="simpara">
								The <code class="literal">-p</code> option to define the port.
							</p><p class="simpara">
								The default port is indicated by the <code class="literal">PGPORT</code> environment variable or the compiled-in default.
							</p></li></ul></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
								<a class="link" href="https://www.postgresql.org/docs/15/continuous-archiving.html#BACKUP-BASE-BACKUP">PostgreSQL Documentation - base backup</a>
							</li><li class="listitem">
								<a class="link" href="https://www.postgresql.org/docs/15/app-pgbasebackup.html">PostgreSQL Documentation - pg_basebackup utility</a>
							</li></ul></div></section><section class="section" id="restoring-database-with-continuous-archiving"><div class="titlepage"><div><div><h4 class="title">4.6.3.5. Restoring the database using a continuous archive backup</h4></div></div></div><p>
						To restore a database using a continuous backup, use the following procedure.
					</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
								Stop the server:
							</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--e4ko8gg"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="literallayout language-none codeblock codeblock--processed">#<span class="strong strong"><strong> systemctl stop postgresql.service</strong></span></pre></div></div></li><li class="listitem"><p class="simpara">
								Copy the necessary data to a temporary location.
							</p><p class="simpara">
								Preferably, copy the whole cluster data directory and any 
tablespaces. Note that this requires enough free space on your system to
 hold two copies of your existing database.
							</p><p class="simpara">
								If you do not have enough space, save the contents of the cluster’s <code class="literal filename">pg_wal</code> directory, which can contain logs that were not archived before the system went down.
							</p></li><li class="listitem">
								Remove all existing files and subdirectories under the cluster 
data directory and under the root directories of any tablespaces you are
 using.
							</li><li class="listitem"><p class="simpara">
								Restore the database files from your base backup.
							</p><p class="simpara">
								Ensure that:
							</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
										The files are restored with the correct ownership (the database system user, not <code class="literal">root</code>).
									</li><li class="listitem">
										The files are restored with the correct permissions.
									</li><li class="listitem">
										The symbolic links in the <code class="literal filename">pg_tblspc/</code> subdirectory are restored correctly.
									</li></ul></div></li><li class="listitem"><p class="simpara">
								Remove any files present in the <code class="literal filename">pg_wal/</code> subdirectory.
							</p><p class="simpara">
								These files resulted from the base backup and are therefore obsolete. If you did not archive <code class="literal filename">pg_wal/</code>, recreate it with proper permissions.
							</p></li><li class="listitem">
								Copy any unarchived WAL segment files that you saved in step 2 into <code class="literal filename">pg_wal/</code>.
							</li><li class="listitem"><p class="simpara">
								Create the <code class="literal filename">recovery.conf</code> recovery command file in the cluster data directory and specify the shell command in the <code class="literal">restore_command</code> configuration parameter. You can use the <code class="literal">cp</code> command, another command, or a shell script. For example:
							</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--9iu2bsh"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="literallayout language-none codeblock codeblock--processed"><span class="strong strong"><strong>restore_command = 'cp /mnt/server/archivedir/%f "%p"'</strong></span></pre></div></div></li><li class="listitem"><p class="simpara">
								Start the server:
							</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--lwkzwqe"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="literallayout language-none codeblock codeblock--processed">#<span class="strong strong"><strong> systemctl start postgresql.service</strong></span></pre></div></div><p class="simpara">
								The server will enter the recovery mode and proceed to read through the archived WAL files that it needs.
							</p><p class="simpara">
								If the recovery is terminated due to an external error, the 
server can be restarted and it will continue the recovery. When the 
recovery process is completed, the server renames <code class="literal filename">recovery.conf</code> to <code class="literal filename">recovery.done</code>. This prevents the server from accidental re-entering the recovery mode after it starts normal database operations.
							</p></li><li class="listitem"><p class="simpara">
								Check the contents of the database to verify that the database has recovered into the required state.
							</p><p class="simpara">
								If the database has not recovered into the required state, 
return to step 1. If the database has recovered into the required state,
 allow the users to connect by restoring the client authentication 
configuration in the <code class="literal filename">pg_hba.conf</code> file.
							</p></li></ol></div><p>
						For more information about restoring using the continuous backup, see <a class="link" href="https://www.postgresql.org/docs/15/continuous-archiving.html#BACKUP-PITR-RECOVERY">PostgreSQL Documentation</a>.
					</p></section><section class="section _additional-resources" id="additional_resources_3"><div class="titlepage"><div><div><h4 class="title">4.6.3.6. ADDITIONAL RESOURCES</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								<a class="link" href="https://www.postgresql.org/docs/15/continuous-archiving.html">Continuous archiving method</a>
							</li></ul></div></section></section></section><section class="section" id="migrating-to-a-rhel-9-version-of-postgresql_using-postgresql"><div class="titlepage"><div><div><h2 class="title">4.7. Migrating to a RHEL 9 version of PostgreSQL</h2></div></div></div><p class="_abstract _abstract">
				Red Hat Enterprise Linux 8 provides <span class="strong strong"><strong>PostgreSQL</strong></span> in multiple module streams: <span class="strong strong"><strong>PostgreSQL 10</strong></span> (the default postgresql stream), <span class="strong strong"><strong>PostgreSQL 9.6</strong></span>, <span class="strong strong"><strong>PostgreSQL 12</strong></span>, <span class="strong strong"><strong>PostgreSQL 13</strong></span>, and <span class="strong strong"><strong>PostgreSQL 15</strong></span>. In RHEL 9, <span class="strong strong"><strong>PostgreSQL 13</strong></span> and <span class="strong strong"><strong>PostgreSQL 15</strong></span> are available.
			</p><p>
				On RHEL, you can use two <span class="strong strong"><strong>PostgreSQL</strong></span> migration paths for the database files:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						<a class="link" href="#fast-upgrade-using-the-pg_upgrade-tool_migrating-to-a-rhel-9-version-of-postgresql" title="4.7.2.&nbsp;Fast upgrade using the pg_upgrade utility">Fast upgrade using the pg_upgrade utility</a>
					</li><li class="listitem">
						<a class="link" href="#dump-and-restore-upgrade_migrating-to-a-rhel-9-version-of-postgresql" title="4.7.3.&nbsp;Dump and restore upgrade">Dump and restore upgrade</a>
					</li></ul></div><p>
				The fast upgrade method is quicker than the dump and restore 
process. However, in certain cases, the fast upgrade does not work, and 
you can only use the dump and restore process, for example in case of 
cross-architecture upgrades.
			</p><p>
				As a prerequisite for migration to a later version of <span class="strong strong"><strong>PostgreSQL</strong></span>, back up all your <span class="strong strong"><strong>PostgreSQL</strong></span> databases.
			</p><p>
				Dumping the databases and performing backup of the SQL files is 
required for the dump and restore process and recommended for the fast 
upgrade method.
			</p><p>
				Before migrating to a later version of <span class="strong strong"><strong>PostgreSQL</strong></span>, see the <a class="link" href="https://www.postgresql.org/docs/15/release.html">upstream compatibility notes</a> for the version of <span class="strong strong"><strong>PostgreSQL</strong></span> to which you want to migrate, as well as for all skipped <span class="strong strong"><strong>PostgreSQL</strong></span> versions between the one you are migrating from and the target version.
			</p><section class="section" id="notable-differences-between-postgresql-13-and-postgresql-15_migrating-to-a-rhel-9-version-of-postgresql"><div class="titlepage"><div><div><h3 class="title">4.7.1. Notable differences between PostgreSQL 13 and PostgreSQL 15</h3></div></div></div><p class="_abstract _abstract">
					<span class="strong strong"><strong>PostgreSQL 15</strong></span> introduced the following backwards incompatible changes.
				</p><div class="formalpara"><p class="title"><strong>Default permissions of the public schema</strong></p><p>
						The default permissions of the public schema have been modified in <span class="strong strong"><strong>PostgreSQL 15</strong></span>. Newly created users need to grant permission explicitly by using the <code class="literal">GRANT ALL ON SCHEMA public TO myuser;</code> command.
					</p></div><p>
					The following example works in <span class="strong strong"><strong>PostgreSQL 13</strong></span> and earlier:
				</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--z4kmzgv"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed">postgres=# CREATE USER mydbuser;
postgres=# \c postgres mydbuser
postgres=$ CREATE TABLE mytable (id int);</pre></div></div><p>
					The following example works in <span class="strong strong"><strong>PostgreSQL 15</strong></span>:
				</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--htiyhqq"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed">postgres=# CREATE USER mydbuser;
postgres=# GRANT ALL ON SCHEMA public TO mydbuser;
postgres=# \c postgres mydbuser
postgres=$ CREATE TABLE mytable (id int);</pre></div></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						Ensure that the <code class="literal">mydbuser</code> acces is configured appropriately in the <code class="literal">pg_hba.conf</code> file. See <a class="link" href="#con_postgresql-users_using-postgresql" title="4.3.&nbsp;Creating PostgreSQL users">Creating PostgreSQL users</a> for more information.
					</p></div></div><div class="formalpara"><p class="title"><strong><code class="literal">PQsendQuery()</code> no longer supported in pipeline mode</strong></p><p>
						Since <span class="strong strong"><strong>PostgreSQL 15</strong></span>, the <code class="literal">libpq</code> <code class="literal">PQsendQuery()</code> function is no longer supported in pipeline mode. Modify affected applications to use the <code class="literal">PQsendQueryParams()</code> function instead.
					</p></div></section><section class="section" id="fast-upgrade-using-the-pg_upgrade-tool_migrating-to-a-rhel-9-version-of-postgresql"><div class="titlepage"><div><div><h3 class="title">4.7.2. Fast upgrade using the pg_upgrade utility</h3></div></div></div><p class="_abstract _abstract">
					As a system administrator, you can upgrade to the most recent version of <span class="strong strong"><strong>PostgreSQL</strong></span> by using the fast upgrade method. To perform a fast upgrade, copy binary data files to the <code class="literal filename">/var/lib/pgsql/data/</code> directory and use the <code class="literal">pg_upgrade</code> utility.
				</p><p>
					You can use this method for migrating data:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							From the RHEL 8 version of <span class="strong strong"><strong>PostgreSQL 12</strong></span> to the RHEL 9 version of <span class="strong strong"><strong>PostgreSQL 13</strong></span>
						</li><li class="listitem">
							From the RHEL 8 version of <span class="strong strong"><strong>PostgreSQL 13</strong></span> to the RHEL 9 version of <span class="strong strong"><strong>PostgreSQL 13</strong></span> or <span class="strong strong"><strong>PostgreSQL 15</strong></span>
						</li><li class="listitem">
							From the RHEL 8 version of <span class="strong strong"><strong>PostgreSQL 15</strong></span> to the RHEL 9 version of <span class="strong strong"><strong>PostgreSQL 15</strong></span>
						</li><li class="listitem">
							From the RHEL 9 version of <span class="strong strong"><strong>PostgreSQL 13</strong></span> to the RHEL 9 version of <span class="strong strong"><strong>PostgreSQL 15</strong></span>
						</li></ul></div><p>
					The following procedure describes migration from the RHEL 8 version of <span class="strong strong"><strong>PostgreSQL 12</strong></span> to the RHEL 9 version of <span class="strong strong"><strong>PostgreSQL 13</strong></span> using the fast upgrade method. For migration from <code class="literal">postgresql</code> streams other than <code class="literal">12</code>, use one of the following approaches:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							Update your <span class="strong strong"><strong>PostgreSQL</strong></span> server to version 12 on RHEL 8 and then use the <code class="literal">pg_upgrade</code> utility to perform the fast upgrade to RHEL 9 version of <span class="strong strong"><strong>PostgreSQL 13</strong></span>.
						</li><li class="listitem">
							Use the dump and restore upgrade directly between any RHEL 8 version of <span class="strong strong"><strong>PostgreSQL</strong></span> and an equal or later <span class="strong strong"><strong>PostgreSQL</strong></span> version in RHEL 9.
						</li></ul></div><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							Before performing the upgrade, back up all your data stored in the <span class="strong strong"><strong>PostgreSQL</strong></span> databases. By default, all data is stored in the <code class="literal filename">/var/lib/pgsql/data/</code> directory on both the RHEL 8 and RHEL 9 systems.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							On the RHEL 9 system, install the <code class="literal package">postgresql-server</code> and <code class="literal package">postgresql-upgrade</code> packages:
						</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--wsfjyve"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed"># <span class="strong strong"><strong>dnf install postgresql-server postgresql-upgrade</strong></span></pre></div></div><p class="simpara">
							Optionally, if you used any <span class="strong strong"><strong>PostgreSQL</strong></span> server modules on RHEL 8, install them also on the RHEL 9 system in two versions, compiled both against <span class="strong strong"><strong>PostgreSQL 12</strong></span> (installed as the <code class="literal package">postgresql-upgrade</code> package) and the target version of <span class="strong strong"><strong>PostgreSQL 13</strong></span> (installed as the <code class="literal package">postgresql-server</code> package). If you need to compile a third-party <span class="strong strong"><strong>PostgreSQL</strong></span> server module, build it both against the <code class="literal package">postgresql-devel</code> and <code class="literal package">postgresql-upgrade-devel</code> packages.
						</p></li><li class="listitem"><p class="simpara">
							Check the following items:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									Basic configuration: On the RHEL 9 system, check whether your server uses the default <code class="literal filename">/var/lib/pgsql/data</code>
 directory and the database is correctly initialized and enabled. In 
addition, the data files must be stored in the same path as mentioned in
 the <code class="literal filename">/usr/lib/systemd/system/postgresql.service</code> file.
								</li><li class="listitem">
									<span class="strong strong"><strong>PostgreSQL</strong></span> servers: Your system can run multiple <span class="strong strong"><strong>PostgreSQL</strong></span> servers. Ensure that the data directories for all these servers are handled independently.
								</li><li class="listitem">
									<span class="strong strong"><strong>PostgreSQL</strong></span> server modules: Ensure that the <span class="strong strong"><strong>PostgreSQL</strong></span> server modules that you used on RHEL 8 are installed on your RHEL 9 system as well. Note that plug-ins are installed in the <code class="literal filename">/usr/lib64/pgsql/</code> directory.
								</li></ul></div></li><li class="listitem"><p class="simpara">
							Ensure that the <code class="literal">postgresql</code> service is not running on either of the source and target systems at the time of copying data.
						</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--ddbaxt4"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed"># <span class="strong strong"><strong>systemctl stop postgresql.service</strong></span></pre></div></div></li><li class="listitem">
							Copy the database files from the source location to the <code class="literal filename">/var/lib/pgsql/data/</code> directory on the RHEL 9 system.
						</li><li class="listitem"><p class="simpara">
							Perform the upgrade process by running the following command as the <span class="strong strong"><strong>PostgreSQL</strong></span> user:
						</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--t1xjhwh"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed"># <span class="strong strong"><strong>postgresql-setup --upgrade</strong></span></pre></div></div><p class="simpara">
							This launches the <code class="literal">pg_upgrade</code> process in the background.
						</p><p class="simpara">
							In case of failure, <code class="literal command">postgresql-setup</code> provides an informative error message.
						</p></li><li class="listitem"><p class="simpara">
							Copy the prior configuration from <code class="literal filename">/var/lib/pgsql/data-old</code> to the new cluster.
						</p><p class="simpara">
							Note that the fast upgrade does not reuse the prior configuration
 in the newer data stack and the configuration is generated from 
scratch. If you want to combine the old and new configurations manually,
 use the *.conf files in the data directories.
						</p></li><li class="listitem"><p class="simpara">
							Start the new <span class="strong strong"><strong>PostgreSQL</strong></span> server:
						</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--m0zavb7"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed"># <span class="strong strong"><strong>systemctl start postgresql.service</strong></span></pre></div></div></li><li class="listitem"><p class="simpara">
							Analyze the new database cluster.
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
									For <span class="strong strong"><strong>PostgreSQL 13</strong></span>:
								</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--onzx4mg"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed">su postgres -c '~/analyze_new_cluster.sh'</pre></div></div></li><li class="listitem"><p class="simpara">
									For <span class="strong strong"><strong>PostgreSQL 15</strong></span>:
								</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--5i23okp"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed">su postgres -c 'vacuumdb --all --analyze-in-stages'</pre></div></div></li></ul></div></li><li class="listitem"><p class="simpara">
							If you want the new <span class="strong strong"><strong>PostgreSQL</strong></span> server to be automatically started on boot, run:
						</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--k405p2a"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="screen language-none codeblock codeblock--processed"># <span class="strong strong"><strong>systemctl enable postgresql.service</strong></span></pre></div></div></li></ol></div></section><section class="section" id="dump-and-restore-upgrade_migrating-to-a-rhel-9-version-of-postgresql"><div class="titlepage"><div><div><h3 class="title">4.7.3. Dump and restore upgrade</h3></div></div></div><p class="_abstract _abstract">
					When using the dump and restore upgrade, you must dump all 
databases contents into an SQL file dump file. Note that the dump and 
restore upgrade is slower than the fast upgrade method and it may 
require some manual fixing in the generated SQL file.
				</p><p>
					You can use this method for migrating data from any RHEL 8 version of <span class="strong strong"><strong>PostgreSQL</strong></span> to any equal or later version of PostgreSQL in RHEL 9.
				</p><p>
					On RHEL 8 and RHEL 9 systems, <span class="strong strong"><strong>PostgreSQL</strong></span> data is stored in the <code class="literal filename">/var/lib/pgsql/data/</code> directory by default.
				</p><p>
					To perform the dump and restore upgrade, change the user to <code class="literal">root</code>.
				</p><p>
					The following procedure describes migration from the RHEL 8 default version of <span class="strong strong"><strong>PostgreSQL 10</strong></span> to the RHEL 9 version of <span class="strong strong"><strong>PostgreSQL 13</strong></span>.
				</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							On your RHEL 8 system, start the <span class="strong strong"><strong>PostgreSQL 10</strong></span> server:
						</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--q78isgi"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="literallayout language-none codeblock codeblock--processed"># <span class="strong strong"><strong>systemctl start postgresql.service</strong></span></pre></div></div></li><li class="listitem"><p class="simpara">
							On the RHEL 8 system, dump all databases contents into the <code class="literal filename">pgdump_file.sql</code> file:
						</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--vp5c9a8"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="literallayout language-none codeblock codeblock--processed"><span class="strong strong"><strong>su - postgres -c "pg_dumpall &gt; ~/pgdump_file.sql"</strong></span></pre></div></div></li><li class="listitem"><p class="simpara">
							Ensure that the databases were dumped correctly:
						</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--ub37ovz"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="literallayout language-none codeblock codeblock--processed"><span class="strong strong"><strong>su - postgres -c 'less "$HOME/pgdump_file.sql"'</strong></span></pre></div></div><p class="simpara">
							As a result, the path to the dumped sql file is displayed: <code class="literal filename">/var/lib/pgsql/pgdump_file.sql</code>.
						</p></li><li class="listitem"><p class="simpara">
							On the RHEL 9 system, install the <code class="literal package">postgresql-server</code> package:
						</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--shi5pxa"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="literallayout language-none codeblock codeblock--processed"># <span class="strong strong"><strong>dnf install postgresql-server</strong></span></pre></div></div><p class="simpara">
							Optionally, if you used any <span class="strong strong"><strong>PostgreSQL</strong></span> server modules on RHEL 8, install them also on the RHEL 9 system. If you need to compile a third-party <span class="strong strong"><strong>PostgreSQL</strong></span> server module, build it against the <code class="literal package">postgresql-devel</code> package.
						</p></li><li class="listitem"><p class="simpara">
							On the RHEL 9 system, initialize the data directory for the new <span class="strong strong"><strong>PostgreSQL</strong></span> server:
						</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--c7qv3pp"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="literallayout language-none codeblock codeblock--processed">#<span class="strong strong"><strong> postgresql-setup --initdb</strong></span></pre></div></div></li><li class="listitem"><p class="simpara">
							On the RHEL 9 system, copy the <code class="literal filename">pgdump_file.sql</code> into the <span class="strong strong"><strong>PostgreSQL</strong></span> home directory, and check that the file was copied correctly:
						</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--ixgzggy"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="literallayout language-none codeblock codeblock--processed"><span class="strong strong"><strong>su - postgres -c 'test -e "$HOME/pgdump_file.sql" &amp;&amp; echo exists'</strong></span></pre></div></div></li><li class="listitem"><p class="simpara">
							Copy the configuration files from the RHEL 8 system:
						</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--ogoj96x"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="literallayout language-none codeblock codeblock--processed"><span class="strong strong"><strong>su - postgres -c 'ls -1 $PGDATA/*.conf'</strong></span></pre></div></div><p class="simpara">
							The configuration files to be copied are:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									<code class="literal filename">/var/lib/pgsql/data/pg_hba.conf</code>
								</li><li class="listitem">
									<code class="literal filename">/var/lib/pgsql/data/pg_ident.conf</code>
								</li><li class="listitem">
									<code class="literal filename">/var/lib/pgsql/data/postgresql.conf</code>
								</li></ul></div></li><li class="listitem"><p class="simpara">
							On the RHEL 9 system, start the new <span class="strong strong"><strong>PostgreSQL</strong></span> server:
						</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--cshqyht"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="literallayout language-none codeblock codeblock--processed">#<span class="strong strong"><strong> systemctl start postgresql.service</strong></span></pre></div></div></li><li class="listitem"><p class="simpara">
							On the RHEL 9 system, import data from the dumped sql file:
						</p><div class="codeblock__wrapper" data-plain-code-block-id="codeblock--plain--zxlkf1d"><pfe-clipboard title="Copy" copy-from="property" class="codeblock__copy PFElement" copied-duration="3" role="button" tabindex="0" pfelement="" type="content"><span slot="text">Copy</span><span slot="text--success">Copied!</span></pfe-clipboard><div class="codeblock__inner-wrapper" tabindex="0"><pre class="literallayout language-none codeblock codeblock--processed"><span class="strong strong"><strong>su - postgres -c 'psql -f ~/pgdump_file.sql postgres'</strong></span></pre></div></div></li></ol></div></section></section></section><div><div xml:lang="en-US" class="legalnotice" id="idm140509576071024"><h1 class="legalnotice">Legal Notice</h1><div class="para">
		Copyright <span class="trademark"><!--Empty--></span>© 2023 Red Hat, Inc.
	</div><div class="para">
		The text of and illustrations in this document are licensed by Red Hat
 under a Creative Commons Attribution–Share Alike 3.0 Unported license 
("CC-BY-SA"). An explanation of CC-BY-SA is available at <a class="uri" href="http://creativecommons.org/licenses/by-sa/3.0/">http://creativecommons.org/licenses/by-sa/3.0/</a>.
 In accordance with CC-BY-SA, if you distribute this document or an 
adaptation of it, you must provide the URL for the original version.
	</div><div class="para">
		Red Hat, as the licensor of this document, waives the right to 
enforce, and agrees not to assert, Section 4d of CC-BY-SA to the fullest
 extent permitted by applicable law.
	</div><div class="para">
		Red Hat, Red Hat Enterprise Linux, the Shadowman logo, the Red Hat 
logo, JBoss, OpenShift, Fedora, the Infinity logo, and RHCE are 
trademarks of Red Hat, Inc., registered in the United States and other 
countries.
	</div><div class="para">
		<span class="trademark">Linux</span>® is the registered trademark of Linus Torvalds in the United States and other countries.
	</div><div class="para">
		<span class="trademark">Java</span>® is a registered trademark of Oracle and/or its affiliates.
	</div><div class="para">
		<span class="trademark">XFS</span>® is a trademark of Silicon Graphics International Corp. or its subsidiaries in the United States and/or other countries.
	</div><div class="para">
		<span class="trademark">MySQL</span>® is a registered trademark of MySQL AB in the United States, the European Union and other countries.
	</div><div class="para">
		<span class="trademark">Node.js</span>® is an official trademark of 
Joyent. Red Hat is not formally related to or endorsed by the official 
Joyent Node.js open source or commercial project.
	</div><div class="para">
		The <span class="trademark">OpenStack</span>® Word Mark and OpenStack 
logo are either registered trademarks/service marks or 
trademarks/service marks of the OpenStack Foundation, in the United 
States and other countries and are used with the OpenStack Foundation's 
permission. We are not affiliated with, endorsed or sponsored by the 
OpenStack Foundation, or the OpenStack community.
	</div><div class="para">
		All other trademarks are the property of their respective owners.
	</div></div></div></div>


  <nav class="pvof-doc__book-nav">
  <ol class="book-nav__list">
              </ol>
</nav>


          </div>
              </div>
              <div id="comments-footer" class="book-comments">
          

  

        </div>
          </div>
  </article>
<meta itemscope="" itemref="md1">



    </div>
      <!-- CP_PRIMER_FOOTER -->            </div>
        </main>
    </div>
    <!--googleoff: all-->
    <div id="to-top"><a class="btn_slideto affix-top" href="#masthead" aria-label="Back to Top"><span class="web-icon-upload"></span></a></div>
    <footer class="footer-main">
        <div class="footer-top">
            <div class="container">

              <div class="brand">
                <a href="https://redhat.com/">
                  <svg class="rh-logo" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 613 145">
                    <defs>
                      <style>
                        .rh-logo-hat {
                          fill: #e00;
                        }
                        .rh-logo-type {
                          fill: #fff;
                        }
                      </style>
                    </defs>
                    <title>Red Hat</title>
                    <path class="rh-logo-hat" d="M127.47,83.49c12.51,0,30.61-2.58,30.61-17.46a14,14,0,0,0-.31-3.42l-7.45-32.36c-1.72-7.12-3.23-10.35-15.73-16.6C124.89,8.69,103.76.5,97.51.5,91.69.5,90,8,83.06,8c-6.68,0-11.64-5.6-17.89-5.6-6,0-9.91,4.09-12.93,12.5,0,0-8.41,23.72-9.49,27.16A6.43,6.43,0,0,0,42.53,44c0,9.22,36.3,39.45,84.94,39.45M160,72.07c1.73,8.19,1.73,9.05,1.73,10.13,0,14-15.74,21.77-36.43,21.77C78.54,104,37.58,76.6,37.58,58.49a18.45,18.45,0,0,1,1.51-7.33C22.27,52,.5,55,.5,74.22c0,31.48,74.59,70.28,133.65,70.28,45.28,0,56.7-20.48,56.7-36.65,0-12.72-11-27.16-30.83-35.78"></path>
                      <path class="rh-logo-band" d="M160,72.07c1.73,8.19,1.73,9.05,1.73,10.13,0,14-15.74,21.77-36.43,21.77C78.54,104,37.58,76.6,37.58,58.49a18.45,18.45,0,0,1,1.51-7.33l3.66-9.06A6.43,6.43,0,0,0,42.53,44c0,9.22,36.3,39.45,84.94,39.45,12.51,0,30.61-2.58,30.61-17.46a14,14,0,0,0-.31-3.42Z"></path>
                      <path class="rh-logo-type" d="M579.74,92.8c0,11.89,7.15,17.67,20.19,17.67a52.11,52.11,0,0,0,11.89-1.68V95a24.84,24.84,0,0,1-7.68,1.16c-5.37,0-7.36-1.68-7.36-6.73V68.3h15.56V54.1H596.78v-18l-17,3.68V54.1H568.49V68.3h11.25Zm-53,.32c0-3.68,3.69-5.47,9.26-5.47a43.12,43.12,0,0,1,10.1,1.26v7.15a21.51,21.51,0,0,1-10.63,2.63c-5.46,0-8.73-2.1-8.73-5.57m5.2,17.56c6,0,10.84-1.26,15.36-4.31v3.37h16.82V74.08c0-13.56-9.14-21-24.39-21-8.52,0-16.94,2-26,6.1l6.1,12.52c6.52-2.74,12-4.42,16.83-4.42,7,0,10.62,2.73,10.62,8.31v2.73a49.53,49.53,0,0,0-12.62-1.58c-14.31,0-22.93,6-22.93,16.73,0,9.78,7.78,17.24,20.19,17.24m-92.44-.94h18.09V80.92h30.29v28.82H506V36.12H487.93V64.41H457.64V36.12H439.55ZM370.62,81.87c0-8,6.31-14.1,14.62-14.1A17.22,17.22,0,0,1,397,72.09V91.54A16.36,16.36,0,0,1,385.24,96c-8.2,0-14.62-6.1-14.62-14.09m26.61,27.87h16.83V32.44l-17,3.68V57.05a28.3,28.3,0,0,0-14.2-3.68c-16.19,0-28.92,12.51-28.92,28.5a28.25,28.25,0,0,0,28.4,28.6,25.12,25.12,0,0,0,14.93-4.83ZM320,67c5.36,0,9.88,3.47,11.67,8.83H308.47C310.15,70.3,314.36,67,320,67M291.33,82c0,16.2,13.25,28.82,30.28,28.82,9.36,0,16.2-2.53,23.25-8.42l-11.26-10c-2.63,2.74-6.52,4.21-11.14,4.21a14.39,14.39,0,0,1-13.68-8.83h39.65V83.55c0-17.67-11.88-30.39-28.08-30.39a28.57,28.57,0,0,0-29,28.81M262,51.58c6,0,9.36,3.78,9.36,8.31S268,68.2,262,68.2H244.11V51.58Zm-36,58.16h18.09V82.92h13.77l13.89,26.82H292l-16.2-29.45a22.27,22.27,0,0,0,13.88-20.72c0-13.25-10.41-23.45-26-23.45H226Z"></path>
                  </svg>
                </a>
              </div>

              <div role="navigation" aria-label="quick">
                  <h3>Quick Links</h3>
                  <ul>
                      <li><a class="download-software" href="https://access.redhat.com/downloads/">Downloads</a></li>
                      <li><a class="manage-subscriptions" href="https://access.redhat.com/management">Subscriptions</a></li>
                      <li><a class="support-cases" href="https://access.redhat.com/support">Support Cases</a></li>
                      <li><a class="customer-service" href="https://access.redhat.com/support/customer-service">Customer Service</a></li>
                      <li><a class="quick-docs" href="https://access.redhat.com/documentation">Product Documentation</a></li>
                  </ul>
              </div>

              <div role="navigation" aria-label="help">
                  <h3>Help</h3>
                  <ul>
                      <li><a class="contact-us" href="https://access.redhat.com/support/contact/">Contact Us</a></li>
                      <li><a class="cp-faqs" href="https://access.redhat.com/articles/33844">Customer Portal FAQ</a></li>
                      <li><a class="login-problems" href="https://access.redhat.com/help/login_assistance">Log-in Assistance</a></li>
                  </ul>
              </div>

              <div role="navigation" aria-label="site">
                  <h3>Site Info</h3>
                  <ul>
                      <li><a class="trust-red-hat" href="https://www.redhat.com/en/trust">Trust Red Hat</a></li>
                      <li><a class="browser-support-policy" href="https://www.redhat.com/en/about/browser-support">Browser Support Policy</a></li>
                      <li><a class="accessibility" href="https://www.redhat.com/en/about/digital-accessibility">Accessibility</a></li>
                      <li><a class="recognition" href="https://access.redhat.com/recognition/">Awards and Recognition</a></li>
                      <li><a class="colophon" href="https://access.redhat.com/help/colophon/">Colophon</a></li>
                  </ul>
              </div>

              <div role="navigation" aria-label="other">
                  <h3>Related Sites</h3>
                  <ul>
                      <li><a href="https://www.redhat.com/" class="red-hat-com">redhat.com</a></li>
                      <li><a href="http://developers.redhat.com/" class="red-hat-developers">developers.redhat.com</a></li>
                      <li><a href="https://connect.redhat.com/" class="partner-connect">connect.redhat.com</a></li>
                      <li><a href="https://cloud.redhat.com/" class="cloud-com">cloud.redhat.com</a></li>
                  </ul>
              </div>

              <div role="navigation" aria-label="about">
                  <h3>About</h3>
                  <ul>
                      <li><a href="https://access.redhat.com/subscription-value" class="subscription-value">Red Hat Subscription Value</a></li>
                      <li><a href="https://www.redhat.com/about/" class="about-red-hat">About Red Hat</a></li>
                      <li><a href="http://jobs.redhat.com/" class="about-jobs">Red Hat Jobs</a></li>
                  </ul>
              </div>

            </div>
        </div>

        <div class="anchor">
            <div class="container">
                <div class="status-legal">
                    <a href="https://status.redhat.com/" class="status-page-widget">
                        <span class="status-description">All systems operational</span>
                        <span class="status-dot shape-circle shape-dash-lime"></span>
                    </a>
                    <div class="legal-copyright">
                        <div class="copyright">Copyright © 2023 Red Hat, Inc.</div>

                        <div role="navigation" aria-label="legal" class="legal">
                            <ul>
                                <li><a href="http://www.redhat.com/en/about/privacy-policy" class="privacy-policy">Privacy Statement</a></li>
                                <li><a href="https://www.redhat.com/en/about/terms-use" class="terms-of-use">Terms of Use</a></li>
                                <li><a href="http://www.redhat.com/en/about/all-policies-guidelines" class="all-policies">All Policies and Guidelines</a></li>
                                <li><a id="teconsent" consent="0,1,2"><a role="link" id="icon-id019697703056427818" tabindex="0" aria-haspopup="dialog" aria-label="Cookie Preferences, opens a dedicated popup modal window" class="truste_cursor_pointer" lang="en">Cookie preferences</a></a></li>
                            </ul>
                        </div>
                    </div>
                </div>
                <div class="social">
                    <a href="http://www.redhat.com/summit/" class="summit">
                        <img src="Configuring%20and%20using%20database%20servers%20Red%20Hat%20Enterprise%20Linux%209%20Red%20Hat%20Customer%20Portal_files/rh-summit-red-a.svg" alt="Red Hat Summit"> <span class="offscreen">Red Hat Summit</span>
                    </a>

                    <div class="social-media">
                        <a href="https://twitter.com/RedHat" class="sm-icon twitter"><span class="nicon-twitter"></span><span class="offscreen">Twitter</span></a>                        
                    </div>
                </div>
            </div>
        </div>
    </footer>
    <!-- TrustArc -->
    <div id="consent_blackbar"></div> 
    <!--googleon: all-->
</div>
<!-- /CP_PRIMER_FOOTER -->


  </div>

    
  

<script>_satellite["_runScript2"](function(event, target, Promise) {
window._sdi=window._sdi||{},window._sdi.addEventHandler=window.addEventListener?function(e,i,t){e.addEventListener(i,t,!1)}:function(e,i,t){e.attachEvent("on"+i,t)},window._sdi.addEventHandler(window,"message",(function(e){var i={},t=0;(-1!==e.origin.indexOf("loop=1")||e.srcElement&&e.srcElement.playerOptions&&1==e.srcElement.playerOptions.loop)&&(t=1);var a=0;if(e.srcElement&&e.srcElement.playerOptions&&1==e.srcElement.playerOptions.autoplay&&(a=1),e.origin.match(/youtube\.com/)&&"undefined"!=typeof JSON&&!t&&!a){i=JSON.parse(e.data);var n=window._sdi.yt.videos;if("infoDelivery"==i.event){var d,o={};for(var r in i.info.videoData&&((o=n[d=i.info.videoData.video_id]||{}).info=i.info,o.id=i.id,n[d]=o),window._sdi.yt.videos){(c=window._sdi.yt.videos[r]).id==i.id&&(o=c)}var s=window._sdi.yt.sc||{};o.info&&(Math.abs(i.info.currentTime-o.info.currentTime)>1.5&&!0===s.track&&(s.s().Media.stop(o.info.videoData.title,o.info.currentTime),"paused"!=o.state&&s.s().Media.play(o.info.videoData.title,i.info.currentTime)),o.info.currentTime=i.info.currentTime),2==i.info.playerState&&(s.s().Media.stop(o.info.videoData.title,o.info.currentTime),o.state="paused"),1==i.info.playerState&&(o.started?!0===s.track&&s.s().Media.play(o.info.videoData.title,o.info.currentTime):(o.started=!0,!0===s.track&&(s.s().Media.open(o.info.videoData.title,o.info.duration,"youtube"),s.s().Media.play(o.info.videoData.title,o.info.currentTime))),o.state="playing"),3==i.info.playerState&&o.started&&(!0===s.track&&s.s().Media.stop(o.info.videoData.title,o.info.currentTime),o.state="paused"),0===i.info.playerState&&(!0===s.track&&(s.s().Media.stop(o.info.videoData.title,o.info.currentTime),s.s().Media.close(o.info.videoData.title)),o.state="completed")}else if("onStateChange"==i.event){for(var r in window._sdi.yt.videos){var c;(c=window._sdi.yt.videos[r]).id==i.id&&(o=c)}s=window._sdi.yt.sc||{};1==i.info&&(o.started?!0===s.track&&s.s().Media.play(o.info.videoData.title,o.info.currentTime):(o.started=!0,!0===s.track&&(s.s().Media.open(o.info.videoData.title,o.info.duration,"youtube"),"paused"!=o.state&&s.s().Media.play(o.info.videoData.title,i.info.currentTime))),o.state="playing"),2==i.info&&(!0===s.track&&s.s().Media.stop(o.info.videoData.title,o.info.currentTime),o.state="paused"),3==i.info&&o.started&&(!0===s.track&&s.s().Media.stop(o.info.videoData.title,o.info.currentTime),o.state="paused"),0===i.info&&(!0===s.track&&(s.s().Media.stop(o.info.videoData.title,o.info.currentTime),s.s().Media.close(o.info.videoData.title)),o.state="completed")}}})),window._sdi.loadScript=function(e,i){var t=document.createElement("script");t.type="text/javascript",i&&"function"==typeof i&&(t.readyState?t.onreadystatechange=function(){"loaded"!==t.readyState&&"complete"!==t.readyState||(t.onreadystatechange=null,i())}:t.onload=function(){i()}),t.src=e,document.getElementsByTagName("head")[0].appendChild(t)},window._sdi.yt={stages:{},players:{},sc:{track:!0,s:function(){return window.s}},init:function(){for(var e=document.getElementsByTagName("script"),i=!1,t=(window._sdi.yt.videos,0);t<e.length;t++){(e[t].src||"").match(/youtube\.com\/iframe_api/)&&(i=!0)}!1===i?window._sdi.loadScript("//www.youtube.com/iframe_api",(function(){window._sdi.yt.ready("api")})):window._sdi.yt.ready("api")},ready:function(e){window._sdi.yt.stages[e]=!0,window._sdi.yt.stages.dom&&window._sdi.yt.stages.api&&window._sdi.yt.checkIframes()},checkIframes:function(){var e=window._sdi.yt.videos,i=1e3,t=0;document.querySelectorAll("iframe[src*=youtube][data-sdiyt]").forEach((a=>{if("true"==a.dataset.sdiyt)return!1;if(-1!=a.src.indexOf("loop=1"))var n=null;else{var d;n=a.src.match(/h?t?t?p?s?\:?\/\/www\.youtube(-nocookie)?\.com\/embed\/([\w-]{11})(?:\?.*)?/)}if(n){d=n.length>2?n[2]:"",a.id||(a.id=d+t,t++);var o=!1;if(a.src.match(/enablejsapi=1/)||(a.src+=(a.src.indexOf("?")>-1?"&":"?")+"enablejsapi=1",o=!0),o){var r=a.cloneNode(!0);r.src=a.src,r.id=a.id,a.replaceWith(r)}else"undefined"!=typeof YT&&void 0!==YT.get?(ready=!0,e[d]={},(!YT.get(a.id)||void 0===YT.get(a.id).v&&void 0!==YT.get(a.id).v.videoId)&&(e[d].player=new YT.Player(a.id,{events:{onReady:function(){},onStateChange:function(){},videoId:a.id}})),a.setAttribute("data-sdiyt","true")):i=100}})),setTimeout((function(){window._sdi.yt.checkIframes()}),i)},videos:{}},void 0!==window._sdi&&void 0!==window._sdi.addEventHandler&&window._sdi.addEventHandler(window,"load",(function(){document.querySelectorAll('iframe[src*="youtube"]').length>=1?(window._sdi.yt.init(),window._sdi.yt.ready("dom")):window._sdi.ytinterval=setInterval((function(){document.querySelectorAll('iframe[src*="youtube"]').length>=1&&(window._sdi.yt.init(),window._sdi.yt.ready("dom"),clearInterval(window._sdi.ytinterval))}),500)}));
});</script><script>_satellite["_runScript3"](function(event, target, Promise) {
var dataLayerName="appEventData",reservedAttributes=["event"],internalDomains=[],downloadExtensions=["doc","docx","eps","jpg","png","svg","xls","ppt","pptx","pdf","xlsx","tab","csv","zip","txt","vsd","vxd","xml","js","css","rar","exe","wma","mov","avi","wmv","mp3","wav","m4v"],parseAttributes=function(t){var e={};for(var n in t.dataset)if("analytics"===n.substr(0,9)){var a=n.replace("analytics","");e[a[0]?a[0].toLocaleLowerCase()+a.slice(1):""]=t.dataset[n]}return e},addAttributes=function(t,e){return isJavascript(t)&&(e.isJavascript=!0),isDownload(t)&&(e.isDownload=!0),isCrossPropertyDomain(t)&&(e.isCrossPropertyDomain=!0,e.linkTypeName="cross property link"),isCta(t)&&(e.isCta=!0,e.linkTypeName="cta link"),isExitLink(t)&&(e.isExitLink=!0,e.linkTypeName="exit link"),isFooter(t)&&(e.isFooter=!0),isInternalCampaign(t)&&(e.isInternalCampaign=!0),isPromoSection(t)&&(e.isPromoSection=!0),isSearchContainer(t)&&(e.isSearchContainer=!0),e.targetHost=getHostName(t.href),e.internalCampaign=window._sdi.util.getQueryParam("icid",t.href)||window._sdi.util.getQueryParam("intcmp",t.href),e},getLinkText=function(t){return t.getAttribute("data-analytics-text")||t.getAttribute("sObjectId")||t.getAttribute("s-object-id")||t.getAttribute("sObjectID")||t.getAttribute("data-s-object-id")||t.innerText&&""!==t.innerText.trim()&&t.innerText.trim()||t.textContent&&""!==t.textContent.trim()&&t.textContent.trim()||t.querySelector("[alt]")&&t.querySelector("[alt]").getAttribute("alt")||t.querySelector("[title]")&&t.querySelector("[title]").getAttribute("title")||t.getAttribute("aria-label")||t.href||"unknown"},getRegions=function(t,e){if(e=e||[],!t)return e;var n=t.closest("[data-analytics-region]");return n?(e.push(n.dataset.analyticsRegion),e=getRegions(n.parentElement,e)):e},removeReservedAttributes=function(t){return reservedAttributes.forEach((function(e){delete t[e]})),t},redactEmail=function(t){return t.replace(/[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,6}/gi,"email_address_redacted")},buildDataObject=function(t,e,n){return n=n||getRegions(t),{event:buildEventName(t,e,n),linkInfo:Object.assign({href:t.href,regions:n.reverse().join("|"),text:redactEmail(getLinkText(t))},removeReservedAttributes(e))}},buildEventName=function(t,e,n){if(e.event)return e.event;var a={};if(n=n||getRegions(t))for(var i=0;i<n.length;i++)if(a[n[i]])return a[n[i]];return"Master Link Clicked"},findRootElement=function(t){if(t)return t.closest("a, [data-analytics-event]")},isJavascript=function(t){return new RegExp("^javascript:","i").test(t.href)},isDownload=function(t){return new RegExp(".("+downloadExtensions.join("|")+")$","i").test(t.href)},isInternalDomain=function(t){return new RegExp(internalDomains.join("|"),"i").test(t.href)},isExitLink=function(t){return!!t.href&&!new RegExp(_satellite.getVar("exitExclusionArray").join("|"),"i").test(t.href)},isCrossPropertyDomain=function(t){return document.location.hostname!==getHostName(t.href)&&"access.cdn.redhat.com"!==getHostName(t.href)&&new RegExp(_satellite.getVar("redHatDomains").join("|"),"i").test(getHostName(t.href))},isCta=function(t){return!(!t.classList.contains("cta-primary")&&"primary"!=t.getAttribute("data-rh-cta-type")&&"primary"!=t.getAttribute("data-ux-cta-type"))},isTab=function(t){return!!(t.classList.contains('[data-toggle="tab"]')||t.classList.contains("pfe-accordion-header")||t.classList.contains('[role="tab"]')||t.classList.contains("ux-vtab-nav-link")||t.classList.contains("ux-tile-nav-link")||t.classList.contains("btn-brick")||t.classList.contains("ux-htab-nav-link")||t.classList.contains("ux-horizontal-tab-nav-link")||t.classList.contains("ux-oss-hub-filter-type-text")||t.classList.contains("ux-htabb-nav-link")||"tab"==t.getAttribute("data-toggle")||"PFE-ACCORDION-HEADER"==t.tagName||"tab"==t.getAttribute("role"))},isFooter=function(t){return el=t.closest("footer"),"undefined"!=typeof el&&null!=el},isInternalCampaign=function(t){return(""!=window._sdi.util.getQueryParam("icid",t.href)||""!=window._sdi.util.getQueryParam("intcmp",t.href))&&(linkRole=t.getAttribute("role")||"",_satellite.logger.log("isInternalCampaign: linkRole:",linkRole),"tab"!==linkRole||void 0)},isPromoSection=function(t){return el=t.closest("div.band-hero"),"undefined"!=typeof el&&null!=el},isSearchContainer=function(t){return _satellite.logger.log("isSearchContainer ran"),el=t.closest("div.cp-sidebar")||t.closest("div.cp-search-results"),_satellite.logger.log("isSearchContainer el",el),_satellite.logger.log("isSearchContainer return","undefined"!=typeof el&&null!=el&&document.location.href.indexOf("search")>-1),"undefined"!=typeof el&&null!=el&&document.location.href.indexOf("search")>-1},getHostName=function(e){return t=document.createElement("a"),t.href=e,t.hostname},pushEvent=function(t){window.appEventData=window.appEventData||[],console.info("Pushing to the dataLayer",t);var e=window[dataLayerName];Array.isArray(e)&&e.push(t)};window.analyticsHelper=window.analyticsHelper||{},window.analyticsHelper.parseCustomEvent=function(t,e,n){_satellite.logger.log("target:",t);var a=parseAttributes(t),i=null,r=getRegions(t);if(e)i=e.closest("[data-analytics-region]");else{var s=t.getRootNode();s&&s.host&&(i=t.getRootNode().host.closest("[data-analytics-region]"))}i&&(r=r.concat(getRegions(i))),"expand"===n&&r.includes("mega menu")&&(a.event="Mega Menu Expanded"),"expand"===n&&r.includes("site-switcher")&&(a.event="Site Switcher Expanded"),"true"!==a.istab&&"true"!==a.isTab||(a.event="Tab Link Clicked",tabHref=t.getAttribute("href")||getLinkText(t)||"",tabHref=tabHref.trim(),a.tabHref=tabHref),_satellite.logger.log("attributes",a),_satellite.logger.log("event type",n),_satellite.logger.log("regions",r),a=addAttributes(t,a);var o=buildDataObject(t,a,r);o.event&&pushEvent(o)};var clickHandler=function(t){if(!(t.target&&t.target.tagName&&t.target.tagName.indexOf("-")>0)){var e=findRootElement(t.target);if(e){var n=parseAttributes(e);isTab(e)&&(n.event="Tab Link Clicked",tabHref=e.getAttribute("href")||getLinkText(e)||"",tabHref=tabHref.trim(),n.tabHref=tabHref),n=addAttributes(e,n);var a=buildDataObject(e,n);a.event&&pushEvent(a)}}};document.addEventListener("click",clickHandler,!0),document.addEventListener("pfe-tabs:shown-tab",(function(t){if(window.analyticsHelper&&"function"==typeof window.analyticsHelper.parseCustomEvent){var e=t.target.closest("pfe-content-set")||t.target.closest("pfe-tabs"),n=null;if(e){if("PFE-CONTENT-SET"===e.tagName){var a=t.detail.tab.querySelector("slot");if(a)(n=e.getSlot(a.getAttribute("name")))&&(n=e.getSlot(t.detail.tab.querySelector("slot").getAttribute("name"))[0])}else n=t.detail.tab;n?(n.setAttribute("data-analytics-isTab","true"),_satellite.logger.info("Called pfe-tabs:shown-tab:parseCustomEvent clicked"),window.analyticsHelper.parseCustomEvent(n,e,"clicked")):console.warn("Wasn't able to find the tabTextWrapper")}else console.warn("Wasn't able to find the componentParent")}})),document.addEventListener("pfe-accordion:change",(function(t){if(window.analyticsHelper&&"function"==typeof window.analyticsHelper.parseCustomEvent){var e=t.target.closest("pfe-content-set")||t.target.closest("pfe-accordion");if(t.detail.expanded){var n="PFE-ACCORDION-HEADER"===t.target.tagName?t.target:t.path[0];if(e&&"PFE-CONTENT-SET"===e.tagName){var a=n.querySelector("slot");if(a){var i=e.getSlot(a.getAttribute("name"));i&&i[0]&&(n=i[0])}}n&&n.setAttribute("data-analytics-isTab","true"),_satellite.logger.info("Called pfe-accordion:change:parseCustomEvent expand"),window.analyticsHelper.parseCustomEvent(n,e,"expand")}}})),document.addEventListener("pfe-shadow-dom-event",(function(t){window.analyticsHelper&&"function"==typeof window.analyticsHelper.parseCustomEvent&&window.analyticsHelper.parseCustomEvent(t.detail.target,t.detail.parentComponent,"click")})),document.addEventListener("pfe-navigation:expanded-item",(function(t){window.analyticsHelper&&"function"==typeof window.analyticsHelper.parseCustomEvent&&window.analyticsHelper.parseCustomEvent(t.detail.toggle,t.target,"expand")}));
});</script><div id="ZN_bCxD2jjWRr4bfVQ"></div><script type="text/javascript" src="Configuring%20and%20using%20database%20servers%20Red%20Hat%20Enterprise%20Linux%209%20Red%20Hat%20Customer%20Portal_files/Untitled.js"></script><script src="Configuring%20and%20using%20database%20servers%20Red%20Hat%20Enterprise%20Linux%209%20Red%20Hat%20Customer%20Portal_files/CoreModule.js" defer="defer"></script><script>_satellite["_runScript4"](function(event, target, Promise) {
_satellite.getVar("eloqua_Tag");
});</script><script>_satellite["_runScript5"](function(event, target, Promise) {
var body=document.body,html=document.documentElement,pageHeight=Math.max(body.scrollHeight,body.offsetHeight,html.clientHeight,html.scrollHeight,html.offsetHeight),viewportHeight=window.innerHeight,initialPercent=viewportHeight/pageHeight,maxInterval=0;initialPercent=initialPercent>1?100:Math.round(100*initialPercent);var maxScroll=Math.floor(initialPercent);_satellite.cookie.set("sat_ppv",maxScroll,{domain:".redhat.com"});var ticking=!1,s=window.scrollY;document.addEventListener("scroll",(()=>{ticking||(window.requestAnimationFrame((()=>{var t=document.body,e=document.documentElement;s=window.scrollY;var i=Math.max(t.scrollHeight,t.offsetHeight,e.clientHeight,e.scrollHeight,e.offsetHeight),o=window.innerHeight,l=s/(i-o)*100;l>maxScroll&&(maxScroll=Math.floor(l)),_satellite.cookie.set("sat_ppv",maxScroll,{domain:".redhat.com"}),ticking=!1})),ticking=!0)}),{passive:!0});
});</script><script>
if("yes"==_satellite.getVar("tagsAllowedFunc")){var profileID=_satellite.getVar("profileID")||"";if(profileID)try{!function(e){!function(t,n,i,a,o){var c,l,r,f,s;for((o=t[a]=t[a]||{})._q=[],l=0,r=(c=["initialize","identify","updateOptions","pageLoad"]).length;l<r;++l)!function(e){o[e]=o[e]||function(){o._q[e===c[0]?"unshift":"push"]([e].concat([].slice.call(arguments,0)))}}(c[l]);(f=n.createElement(i)).async=!0,f.src="https://cdn.pendo.io/agent/static/"+e+"/pendo.js",(s=n.getElementsByTagName(i)[0]).parentNode.insertBefore(f,s)}(window,document,"script","pendo"),setTimeout((function(){"undefined"!=typeof pendo&&pendo.initialize({visitor:{id:_satellite.getVar("profileID"),internal:"",lang:""},account:{id:_satellite.getVar("accountID"),account_number:_satellite.getVar("accountID")}})}),2e3)}("f210c485-387f-43ad-4eee-f55bab22507f")}catch(e){}}
</script></body></html>